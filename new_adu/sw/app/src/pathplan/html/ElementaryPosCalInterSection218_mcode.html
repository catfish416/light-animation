<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="75,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T10U3">GCdInfo_Me</span>,<span class="var type1" id="S3T1U4">GCdxposition</span>,<span class="var type1" id="S4T1U5">GCdyposition</span>,<span class="var type1" id="S5T1U6">GCdAx</span>,<span class="var type1" id="S6T1U7">GCdAy</span>,<span class="var type1" id="S7T1U8">GCdVx</span>,<span class="var type1" id="S8T1U9">GCdVy</span>,<span class="var type1" id="S9T1U10">GCdTheta</span>,<span class="var type1" id="S10T1U11">GCdxpositionNex</span>,<span class="var type1" id="S11T1U12">GCdypositionNex</span>,<span class="var type1" id="S12T1U13">PreTimeAcu</span>,<span class="var type1" id="S13T1U14">PathTrjFinishFlg</span>] = ElementaryPosCalInterSection( <span class="var type1" id="S14T1U17">StopFlg</span>,<span class="var type1" id="S15T1U18">StopArc</span>,<span class="var type1" id="S16T1U19">ArcNex</span>,<span class="var type1" id="S17T1U20">ArcPre</span>,<span class="var type1" id="S18T1U21">VPre</span>,<span class="var type1" id="S19T1U22">VNex</span>,<span class="var type1" id="S20T10U23">Info_Me</span>,<span class="var type1" id="S21T1U24">V_tar</span>,<span class="var type1" id="S22T1U25">Delta</span>,<span class="var type1" id="S23T1U26">Arclength</span>,<span class="var type1" id="S24T1U27">T_long</span>,<span class="var type1" id="S25T1U28">T_lat</span>,<span class="var type1" id="S26T1U29">PathPlanRes</span>,<span class="var type1" id="S27T1U30">x_in</span>,<span class="var type1" id="S28T1U31">y_in</span>,<span class="var type1" id="S29T1U32">angle_in</span>,<span class="var type1" id="S30T1U33">x_out</span>,<span class="var type1" id="S31T1U34">y_out</span>,<span class="var type1" id="S32T1U35">angle_out</span>,<span class="var type1" id="S33T1U36">CurOp</span>,<span class="var type1" id="S34T3U37">PGCdInfo</span>,<span class="var type1" id="S35T1U38">PreTime</span>,<span class="var type1" id="S36T1U39">SimpleStop</span>,<span class="var type1" id="S37T1U40">PosPreDisEn</span>,<span class="var type1" id="S38T1U41">ResumeVelAduEnFlg</span>,<span class="var type1" id="S39T1U42">aResume</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="75,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%UNTITLED Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%   Detailed explanation goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,4" id="srcline4">  4</a></span><span class="line">    <span class="keyword">persistent</span> <span class="var type1" id="S40T1U44">PrePointCalEn</span> <span class="var type1" id="S41T1U45">PointCalEn</span> <span class="var type1" id="S42T1U46">PV_tar</span> <span class="var type1" id="S43T1U47">PDelta</span> <span class="var type1" id="S44T1U48">PArclength</span> <span class="var type1" id="S45T1U49">PT_long</span> <span class="var type1" id="S46T1U50">PT_lat</span> <span class="var type1" id="S47T1U51">PInfo_Me</span> <span class="var type1" id="S48T1U52">Px_in</span> <span class="var type1" id="S49T1U53">Py_in</span> <span class="var type1" id="S50T1U54">Pangle_in</span> <span class="var type1" id="S51T1U55">Px_out</span> <span class="var type1" id="S52T1U56">Py_out</span> <span class="var type1" id="S53T1U57">Pangle_out</span> <span class="var type1" id="S54T1U58">PTime</span> <span class="var type1" id="S55T1U59">PV_me</span> <span class="var type1" id="S56T1U60">StopFlgRiseEdge</span> <span class="var type1" id="S57T1U61">ArcHistory</span> <span class="var type1" id="S58T1U62">ArcAdd</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,5" id="srcline5">  5</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U58">isempty(<span class="var type0" id="S40T0U69">PrePointCalEn</span>)</span>||(<span class="mxinfo " id="T8:U59"><span class="var type1" id="S26T1U72">PathPlanRes</span> &lt; <span class="mxinfo " id="T1:U61">1e-1</span></span>)||(<span class="mxinfo " id="T8:U62"><span class="mxinfo " id="T1:U63">abs(<span class="mxinfo " id="T1:U64"><span class="var type1" id="S33T1U80">CurOp</span> - <span class="mxinfo " id="T1:U66">1</span></span>)</span> &gt; <span class="mxinfo " id="T1:U67">0.1</span></span> &amp;&amp; <span class="mxinfo " id="T8:U68"><span class="mxinfo " id="T1:U69">abs(<span class="mxinfo " id="T1:U70"><span class="var type1" id="S33T1U87">CurOp</span> - <span class="mxinfo " id="T1:U72">2</span></span>)</span> &gt; <span class="mxinfo " id="T1:U73">0.1</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="75,6" id="srcline6">  6</a></span><span class="line">        <span class="mxinfo " id="T1:U74"><span class="var type1" id="S40T1U92">PrePointCalEn</span> = <span class="mxinfo " id="T1:U76">0</span></span>; <span class="mxinfo " id="T1:U77"><span class="var type1" id="S41T1U96">PointCalEn</span> = <span class="mxinfo " id="T1:U79">0</span></span>;<span class="mxinfo " id="T1:U80"><span class="var type1" id="S42T1U100">PV_tar</span> = <span class="mxinfo " id="T1:U82">0</span></span>; <span class="mxinfo " id="T1:U83"><span class="var type1" id="S43T1U104">PDelta</span> = <span class="mxinfo " id="T1:U85">0</span></span>; <span class="mxinfo " id="T1:U86"><span class="var type1" id="S44T1U108">PArclength</span> = <span class="mxinfo " id="T1:U88">0</span></span>; <span class="mxinfo " id="T1:U89"><span class="var type1" id="S45T1U112">PT_long</span> = <span class="mxinfo " id="T1:U91">0</span></span>; <span class="mxinfo " id="T1:U92"><span class="var type1" id="S46T1U116">PT_lat</span> = <span class="mxinfo " id="T1:U94">0</span></span>; <span class="mxinfo " id="T1:U95"><span class="var type1" id="S47T1U120">PInfo_Me</span> = <span class="mxinfo " id="T1:U97">0</span></span>; <span class="mxinfo " id="T1:U98"><span class="var type1" id="S48T1U124">Px_in</span> = <span class="mxinfo " id="T1:U100">0</span></span>; <span class="mxinfo " id="T1:U101"><span class="var type1" id="S49T1U128">Py_in</span> = <span class="mxinfo " id="T1:U103">0</span></span>; <span class="mxinfo " id="T1:U104"><span class="var type1" id="S50T1U132">Pangle_in</span> = <span class="mxinfo " id="T1:U106">0</span></span>; <span class="mxinfo " id="T1:U107"><span class="var type1" id="S51T1U136">Px_out</span> = <span class="mxinfo " id="T1:U109">0</span></span>; <span class="mxinfo " id="T1:U110"><span class="var type1" id="S52T1U140">Py_out</span> = <span class="mxinfo " id="T1:U112">0</span></span>;<span class="mxinfo " id="T1:U113"><span class="var type1" id="S54T1U144">PTime</span> = <span class="mxinfo " id="T1:U115">0</span></span>; <span class="mxinfo " id="T1:U116"><span class="var type1" id="S53T1U148">Pangle_out</span> = <span class="mxinfo " id="T1:U118">0</span></span>;<span class="mxinfo " id="T1:U119"><span class="var type1" id="S55T1U152">PV_me</span> = <span class="mxinfo " id="T1:U121">0</span></span>;<span class="mxinfo " id="T1:U122"><span class="var type1" id="S56T1U156">StopFlgRiseEdge</span> = <span class="mxinfo " id="T1:U124">0</span></span>;<span class="mxinfo " id="T1:U125"><span class="var type1" id="S57T1U160">ArcHistory</span> =<span class="mxinfo " id="T1:U127">0</span></span>;<span class="mxinfo " id="T1:U128"><span class="var type1" id="S58T1U164">ArcAdd</span> = <span class="mxinfo " id="T1:U130">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,7" id="srcline7">  7</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,8" id="srcline8">  8</a></span><span class="line">    <span class="mxinfo " id="T1:U131"><span class="var type1" id="S61T1U168">FirstTrigFlg</span> = <span class="mxinfo " id="T1:U133">0</span></span>;<span class="mxinfo " id="T1:U134"><span class="var type1" id="S62T1U172">FlagInit</span> = <span class="mxinfo " id="T1:U136">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,9" id="srcline9">  9</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U137"><span class="var type1" id="S41T1U177">PointCalEn</span> &lt;<span class="mxinfo " id="T1:U139">1e-1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,10" id="srcline10"> 10</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U140"><span class="var type1" id="S26T1U182">PathPlanRes</span> &gt; <span class="mxinfo " id="T1:U142">1e-1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,11" id="srcline11"> 11</a></span><span class="line">            <span class="mxinfo " id="T1:U143"><span class="var type1" id="S41T1U186">PointCalEn</span> = <span class="mxinfo " id="T1:U145">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,12" id="srcline12"> 12</a></span><span class="line">            <span class="keyword">if</span> (<span class="mxinfo " id="T8:U146"><span class="var type1" id="S41T1U193">PointCalEn</span> &gt; <span class="mxinfo " id="T1:U148">1e-1</span></span>) &amp;&amp; (<span class="mxinfo " id="T8:U149"><span class="var type1" id="S40T1U197">PrePointCalEn</span> &lt; <span class="mxinfo " id="T1:U151">1e-1</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="75,13" id="srcline13"> 13</a></span><span class="line">                <span class="mxinfo " id="T1:U152"><span class="var type1" id="S40T1U201">PrePointCalEn</span> = <span class="var type1" id="S41T1U202">PointCalEn</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,14" id="srcline14"> 14</a></span><span class="line">                <span class="mxinfo " id="T1:U155"><span class="var type1" id="S61T1U205">FirstTrigFlg</span> = <span class="mxinfo " id="T1:U157">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,15" id="srcline15"> 15</a></span><span class="line">                <span class="mxinfo " id="T1:U158"><span class="var type1" id="S62T1U209">FlagInit</span> = <span class="mxinfo " id="T1:U160">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,16" id="srcline16"> 16</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,17" id="srcline17"> 17</a></span><span class="line">                <span class="mxinfo " id="T1:U161"><span class="var type1" id="S61T1U214">FirstTrigFlg</span> = <span class="mxinfo " id="T1:U163">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,18" id="srcline18"> 18</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,19" id="srcline19"> 19</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,20" id="srcline20"> 20</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,21" id="srcline21"> 21</a></span><span class="line">    <span class="mxinfo " id="T1:U164"><span class="var type1" id="S63T1U218">xpositionPre</span> = <span class="mxinfo " id="T1:U166">0</span></span>;<span class="mxinfo " id="T1:U167"><span class="var type1" id="S64T1U222">ypositionPre</span> = <span class="mxinfo " id="T1:U169">0</span></span>;<span class="mxinfo " id="T1:U170"><span class="var type1" id="S65T1U226">Ax</span> = <span class="mxinfo " id="T1:U172">0</span></span>;<span class="mxinfo " id="T1:U173"><span class="var type1" id="S66T1U230">Ay</span> = <span class="mxinfo " id="T1:U175">0</span></span>;<span class="mxinfo " id="T1:U176"><span class="var type1" id="S67T1U234">Vx</span> = <span class="mxinfo " id="T1:U178">0</span></span>;<span class="mxinfo " id="T1:U179"><span class="var type1" id="S68T1U238">Vy</span> = <span class="mxinfo " id="T1:U181">0</span></span>;<span class="mxinfo " id="T1:U182"><span class="var type1" id="S69T1U242">Theta</span> = <span class="mxinfo " id="T1:U184">0</span></span>;<span class="mxinfo " id="T1:U185"><span class="var type1" id="S13T1U246">PathTrjFinishFlg</span> = <span class="mxinfo " id="T1:U187">0</span></span>;<span class="mxinfo " id="T1:U188"><span class="var type1" id="S70T1U250">xpositionNex</span> = <span class="mxinfo " id="T1:U190">0</span></span>;<span class="mxinfo " id="T1:U191"><span class="var type1" id="S71T1U254">ypositionNex</span> = <span class="mxinfo " id="T1:U193">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,22" id="srcline22"> 22</a></span><span class="line">    <span class="mxinfo " id="T1:U194"><span class="var type1" id="S3T1U258">GCdxposition</span> = <span class="mxinfo " id="T1:U196">0</span></span>;<span class="mxinfo " id="T1:U197"><span class="var type1" id="S4T1U262">GCdyposition</span> = <span class="mxinfo " id="T1:U199">0</span></span>;<span class="mxinfo " id="T1:U200"><span class="var type1" id="S5T1U266">GCdAx</span> = <span class="mxinfo " id="T1:U202">0</span></span>;<span class="mxinfo " id="T1:U203"><span class="var type1" id="S6T1U270">GCdAy</span> = <span class="mxinfo " id="T1:U205">0</span></span>;<span class="mxinfo " id="T1:U206"><span class="var type1" id="S7T1U274">GCdVx</span> = <span class="mxinfo " id="T1:U208">0</span></span>;<span class="mxinfo " id="T1:U209"><span class="var type1" id="S8T1U278">GCdVy</span> = <span class="mxinfo " id="T1:U211">0</span></span>;<span class="mxinfo " id="T1:U212"><span class="var type1" id="S9T1U282">GCdTheta</span> = <span class="mxinfo " id="T1:U214">0</span></span>;<span class="mxinfo " id="T1:U215"><span class="var type1" id="S10T1U286">GCdxpositionNex</span> = <span class="mxinfo " id="T1:U217">0</span></span>;<span class="mxinfo " id="T1:U218"><span class="var type1" id="S11T1U290">GCdypositionNex</span> = <span class="mxinfo " id="T1:U220">0</span></span>;<span class="mxinfo " id="T1:U221"><span class="var type1" id="S12T1U294">PreTimeAcu</span> = <span class="var type1" id="S35T1U295">PreTime</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,23" id="srcline23"> 23</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U224"><span class="var type1" id="S41T1U299">PointCalEn</span> &gt; <span class="mxinfo " id="T1:U226">1e-1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,24" id="srcline24"> 24</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U227"><span class="var type1" id="S61T1U304">FirstTrigFlg</span> &gt; <span class="mxinfo " id="T1:U229">1e-1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,25" id="srcline25"> 25</a></span><span class="line">            <span class="mxinfo " id="T1:U230"><span class="var type1" id="S42T1U308">PV_tar</span>=<span class="var type1" id="S21T1U309">V_tar</span></span>;<span class="mxinfo " id="T1:U233"><span class="var type1" id="S43T1U312">PDelta</span>=<span class="var type1" id="S22T1U313">Delta</span></span>;<span class="mxinfo " id="T1:U236"><span class="var type1" id="S44T1U316">PArclength</span>=<span class="var type1" id="S23T1U317">Arclength</span></span>;<span class="mxinfo " id="T1:U239"><span class="var type1" id="S45T1U320">PT_long</span>=<span class="var type1" id="S24T1U321">T_long</span></span>;<span class="mxinfo " id="T1:U242"><span class="var type1" id="S46T1U324">PT_lat</span>=<span class="var type1" id="S25T1U325">T_lat</span></span>;<span class="mxinfo " id="T1:U245"><span class="var type1" id="S48T1U328">Px_in</span>=<span class="var type1" id="S27T1U329">x_in</span></span>;<span class="mxinfo " id="T1:U248"><span class="var type1" id="S49T1U332">Py_in</span>=<span class="var type1" id="S28T1U333">y_in</span></span>;<span class="mxinfo " id="T1:U251"><span class="var type1" id="S50T1U336">Pangle_in</span>= <span class="var type1" id="S29T1U337">angle_in</span></span>;<span class="mxinfo " id="T1:U254"><span class="var type1" id="S51T1U340">Px_out</span>=<span class="var type1" id="S30T1U341">x_out</span></span>;<span class="mxinfo " id="T1:U257"><span class="var type1" id="S52T1U344">Py_out</span>=<span class="var type1" id="S31T1U345">y_out</span></span>;<span class="mxinfo " id="T1:U260"><span class="var type1" id="S53T1U348">Pangle_out</span>=<span class="var type1" id="S32T1U349">angle_out</span></span>;<span class="mxinfo " id="T1:U263"><span class="var type1" id="S55T1U352">PV_me</span> = <span class="mxinfo " id="T1:U265"><span class="var type1" id="S20T10U354">Info_Me</span>(<span class="mxinfo " id="T1:U267">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,26" id="srcline26"> 26</a></span><span class="line">            <span class="mxinfo " id="T1:U268"><span class="var type1" id="S54T1U358">PTime</span> = <span class="mxinfo " id="T1:U270">0</span></span>;<span class="mxinfo " id="T1:U271"><span class="var type1" id="S56T1U362">StopFlgRiseEdge</span> = <span class="mxinfo " id="T1:U273">0</span></span>;<span class="mxinfo " id="T1:U274"><span class="var type1" id="S57T1U366">ArcHistory</span> =<span class="mxinfo " id="T1:U276">0</span></span>;<span class="mxinfo " id="T1:U277"><span class="var type1" id="S58T1U370">ArcAdd</span> = <span class="mxinfo " id="T1:U279">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,27" id="srcline27"> 27</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,28" id="srcline28"> 28</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U280"><span class="var type1" id="S14T1U376">StopFlg</span> &lt; <span class="mxinfo " id="T1:U282">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,29" id="srcline29"> 29</a></span><span class="line">                <span class="mxinfo " id="T1:U283"><span class="var type1" id="S54T1U380">PTime</span> = <span class="mxinfo " id="T1:U285"><span class="var type1" id="S54T1U382">PTime</span> + <span class="mxinfo " id="T1:U287">0.01</span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="75,30" id="srcline30"> 30</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T8:U288"><span class="var type1" id="S56T1U387">StopFlgRiseEdge</span> &gt; <span class="mxinfo " id="T1:U290">0.5</span></span>                     </span></span>
<span class="srcline"><span class="lineno"><a href="75,31" id="srcline31"> 31</a></span><span class="line">                    <span class="var type1" id="S56T1U391">StopFlgRiseEdge</span> = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="75,32" id="srcline32"> 32</a></span><span class="line">                    <span class="keyword">if</span> <span class="var type1" id="S38T1U396">ResumeVelAduEnFlg</span> &lt; 0.5</span></span>
<span class="srcline"><span class="lineno"><a href="75,33" id="srcline33"> 33</a></span><span class="line">                        <span class="var type1" id="S54T1U400">PTime</span> = <span class="var type1" id="S54T1U402">PTime</span> + 2*<span class="var type1" id="S15T1U406">StopArc</span>/<span class="var type1" id="S55T1U407">PV_me</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,34" id="srcline34"> 34</a></span><span class="line">                    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,35" id="srcline35"> 35</a></span><span class="line">                    <span class="comment">% In order to resume the previous operation, a modify</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,36" id="srcline36"> 36</a></span><span class="line">                    <span class="comment">% of Lat and Long time is needed</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,37" id="srcline37"> 37</a></span><span class="line">                        <span class="var type1" id="S54T1U411">PTime</span> = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="75,38" id="srcline38"> 38</a></span><span class="line">                        <span class="var type1" id="S55T1U415">PV_me</span> = <span class="var type1" id="S20T10U417">Info_Me</span>(3);</span></span>
<span class="srcline"><span class="lineno"><a href="75,39" id="srcline39"> 39</a></span><span class="line">                        <span class="var type1" id="S45T1U421">PT_long</span> = abs(<span class="var type1" id="S42T1U426">PV_tar</span> - <span class="var type1" id="S55T1U427">PV_me</span>)/<span class="var type1" id="S39T1U428">aResume</span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="75,40" id="srcline40"> 40</a></span><span class="line">                        <span class="var type1" id="S58T1U431">ArcAdd</span> = <span class="var type1" id="S57T1U432">ArcHistory</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,41" id="srcline41"> 41</a></span><span class="line">                    <span class="keyword">end</span>  </span></span>
<span class="srcline"><span class="lineno"><a href="75,42" id="srcline42"> 42</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="75,43" id="srcline43"> 43</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,44" id="srcline44"> 44</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,45" id="srcline45"> 45</a></span><span class="line">                <span class="var type1" id="S56T1U436">StopFlgRiseEdge</span> = 1;</span></span>
<span class="srcline"><span class="lineno"><a href="75,46" id="srcline46"> 46</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,47" id="srcline47"> 47</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,48" id="srcline48"> 48</a></span><span class="line">        <span class="mxinfo " id="T1:U307"><span class="var type1" id="S72T1U440">i</span> = <span class="mxinfo " id="T1:U309">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,49" id="srcline49"> 49</a></span><span class="line">        <span class="mxinfo " id="T1:U310"><span class="var type1" id="S73T1U444">V_tarPos</span> = <span class="mxinfo " id="T1:U312">0</span></span>;<span class="mxinfo " id="T1:U313"><span class="var type1" id="S74T1U448">Kur</span> = <span class="mxinfo " id="T1:U315">0</span></span>;<span class="mxinfo " id="T1:U316"><span class="var type1" id="S69T1U452">Theta</span> = <span class="mxinfo " id="T1:U318">0</span></span>;<span class="mxinfo " id="T1:U319"><span class="var type1" id="S75T1U456">PreDis</span> = <span class="mxinfo " id="T1:U321">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,50" id="srcline50"> 50</a></span><span class="line"><span class="comment">%         while((xpositionPre &lt; (Info_Me(1)+0.5))&amp;&amp;(StopFlg&lt;0.5)&amp;&amp;((i&lt;0.5)||(PosPreDisEn&gt;0.5)))||((StopFlg&gt;0.5)&amp;&amp;(i&lt;0.5))</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,51" id="srcline51"> 51</a></span><span class="line"><span class="comment">%         while(i&lt;0.5)||((xpositionPre &lt; (Info_Me(1)+0.5))&amp;&amp;(StopFlg&lt;0.5)&amp;&amp;(PosPreDisEn&gt;0.5)&amp;&amp;(i&lt;10))</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,52" id="srcline52"> 52</a></span><span class="line"><span class="comment">%         while(i&lt;0.5)||((PreDis&lt;0.5)&amp;&amp;(StopFlg&lt;0.5)&amp;&amp;(PosPreDisEn&gt;0.5)&amp;&amp;(i&lt;10))</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,53" id="srcline53"> 53</a></span><span class="line">        <span class="keyword">while</span>(<span class="mxinfo " id="T8:U322"><span class="var type1" id="S72T1U461">i</span>&lt;<span class="mxinfo " id="T1:U324">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="75,54" id="srcline54"> 54</a></span><span class="line">            <span class="mxinfo " id="T1:U325"><span class="var type1" id="S72T1U465">i</span>=<span class="mxinfo " id="T1:U327"><span class="var type1" id="S72T1U467">i</span>+<span class="mxinfo " id="T1:U329">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,55" id="srcline55"> 55</a></span><span class="line">            <span class="mxinfo " id="T1:U330"><span class="var type1" id="S76T1U471">Time</span> = <span class="mxinfo " id="T1:U332"><span class="var type1" id="S54T1U473">PTime</span> + <span class="mxinfo " id="T1:U334">(<span class="var type1" id="S35T1U476">PreTime</span>)*<span class="var type1" id="S72T1U477">i</span></span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="75,56" id="srcline56"> 56</a></span><span class="line">            <span class="mxinfo " id="T1:U337"><span class="var type1" id="S12T1U480">PreTimeAcu</span> = <span class="mxinfo " id="T1:U339">(<span class="var type1" id="S35T1U483">PreTime</span>)*<span class="var type1" id="S72T1U484">i</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,57" id="srcline57"> 57</a></span><span class="line">    <span class="comment">%         Time = PTime + PreTime; </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,58" id="srcline58"> 58</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U342"><span class="var type1" id="S14T1U488">StopFlg</span> &lt; <span class="mxinfo " id="T1:U344">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,59" id="srcline59"> 59</a></span><span class="line"><span class="comment">%                 Time = PTime + PreTime;     </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,60" id="srcline60"> 60</a></span><span class="line">                <span class="mxinfo " id="T1:U345"><span class="var type1" id="S77T1U492">V_me</span> = <span class="mxinfo " id="T1:U347"><span class="var type1" id="S20T10U494">Info_Me</span>(<span class="mxinfo " id="T1:U349">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,61" id="srcline61"> 61</a></span><span class="line">                <span class="mxinfo " id="T1:U350"><span class="var type1" id="S78T1U498">Arc</span> = <span class="mxinfo " id="T1:U352">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,62" id="srcline62"> 62</a></span><span class="line">                <span class="mxinfo " id="T1:U353"><span class="var type1" id="S73T1U502">V_tarPos</span> = <span class="mxinfo " id="T1:U355">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,63" id="srcline63"> 63</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T8:U356"><span class="var type1" id="S76T1U507">Time</span> &lt;= <span class="var type1" id="S45T1U508">PT_long</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,64" id="srcline64"> 64</a></span><span class="line">                    <span class="keyword">if</span> <span class="mxinfo " id="T8:U359"><span class="mxinfo " id="T1:U360">abs(<span class="mxinfo " id="T1:U361"><span class="var type1" id="S42T1U515">PV_tar</span> - <span class="var type1" id="S55T1U516">PV_me</span></span>)</span> &gt;<span class="mxinfo " id="T1:U364">1e-5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,65" id="srcline65"> 65</a></span><span class="line">                        <span class="mxinfo " id="T1:U365"><span class="var type1" id="S79T1U520">a_me</span> = <span class="mxinfo " id="T1:U367">(<span class="mxinfo " id="T1:U368"><span class="var type1" id="S42T1U524">PV_tar</span> - <span class="var type1" id="S55T1U525">PV_me</span></span>)/<span class="var type1" id="S45T1U526">PT_long</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,66" id="srcline66"> 66</a></span><span class="line">                    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,67" id="srcline67"> 67</a></span><span class="line">                        <span class="mxinfo " id="T1:U372"><span class="var type1" id="S79T1U530">a_me</span> = <span class="mxinfo " id="T1:U374">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,68" id="srcline68"> 68</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,69" id="srcline69"> 69</a></span><span class="line">                    <span class="mxinfo " id="T1:U375"><span class="var type1" id="S78T1U534">Arc</span> = <span class="mxinfo " id="T1:U377"><span class="mxinfo " id="T1:U378"><span class="var type1" id="S55T1U537">PV_me</span> * <span class="var type1" id="S76T1U538">Time</span></span> + <span class="mxinfo " id="T1:U381"><span class="mxinfo " id="T1:U382"><span class="mxinfo " id="T1:U383">0.5</span> * <span class="var type1" id="S79T1U542">a_me</span></span> * <span class="mxinfo " id="T1:U385"><span class="var type1" id="S76T1U544">Time</span> ^2</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,70" id="srcline70"> 70</a></span><span class="line">                    <span class="mxinfo " id="T1:U387"><span class="var type1" id="S73T1U548">V_tarPos</span> = <span class="mxinfo " id="T1:U389"><span class="var type1" id="S55T1U550">PV_me</span> + <span class="mxinfo " id="T1:U391"><span class="var type1" id="S76T1U552">Time</span> * <span class="var type1" id="S79T1U553">a_me</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,71" id="srcline71"> 71</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,72" id="srcline72"> 72</a></span><span class="line">                    <span class="mxinfo " id="T1:U394"><span class="var type1" id="S78T1U557">Arc</span> = <span class="mxinfo " id="T1:U396"><span class="mxinfo " id="T1:U397"><span class="mxinfo " id="T1:U398">(<span class="mxinfo " id="T1:U399"><span class="var type1" id="S55T1U563">PV_me</span> + <span class="var type1" id="S42T1U564">PV_tar</span></span>) /<span class="mxinfo " id="T1:U402">2</span></span> * <span class="var type1" id="S45T1U566">PT_long</span></span> + <span class="mxinfo " id="T1:U404">(<span class="mxinfo " id="T1:U405"><span class="var type1" id="S76T1U570">Time</span> - <span class="var type1" id="S45T1U571">PT_long</span></span>) * <span class="var type1" id="S42T1U572">PV_tar</span></span></span></span>;            </span></span>
<span class="srcline"><span class="lineno"><a href="75,73" id="srcline73"> 73</a></span><span class="line">                    <span class="mxinfo " id="T1:U409"><span class="var type1" id="S73T1U575">V_tarPos</span> = <span class="var type1" id="S42T1U576">PV_tar</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,74" id="srcline74"> 74</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,75" id="srcline75"> 75</a></span><span class="line"><span class="comment">%                 if Time &gt; PT_lat</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,76" id="srcline76"> 76</a></span><span class="line"><span class="comment">%                     if Time &lt;= PT_long</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,77" id="srcline77"> 77</a></span><span class="line"><span class="comment">%                         if abs(PV_tar - PV_me) &gt;1e-5</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,78" id="srcline78"> 78</a></span><span class="line"><span class="comment">%                             a_me = (PV_tar - PV_me)/PT_long;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,79" id="srcline79"> 79</a></span><span class="line"><span class="comment">%                         else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,80" id="srcline80"> 80</a></span><span class="line"><span class="comment">%                             a_me = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,81" id="srcline81"> 81</a></span><span class="line"><span class="comment">%                         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,82" id="srcline82"> 82</a></span><span class="line"><span class="comment">%                         Arc = PV_me * Time + 0.5 * a_me * Time ^2;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,83" id="srcline83"> 83</a></span><span class="line"><span class="comment">%                         V_tarPos = PV_me + Time * a_me;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,84" id="srcline84"> 84</a></span><span class="line"><span class="comment">%                     else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,85" id="srcline85"> 85</a></span><span class="line"><span class="comment">%                         Arc = (PV_me + PV_tar) /2 * PT_long + (Time - PT_long) * PV_tar;            </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,86" id="srcline86"> 86</a></span><span class="line"><span class="comment">%                         V_tarPos = PV_tar;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,87" id="srcline87"> 87</a></span><span class="line"><span class="comment">%                     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,88" id="srcline88"> 88</a></span><span class="line"><span class="comment">%                     V_tarPos = PV_tar;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,89" id="srcline89"> 89</a></span><span class="line"><span class="comment">%                 else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,90" id="srcline90"> 90</a></span><span class="line"><span class="comment">%                     if Time &lt;= PT_long</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,91" id="srcline91"> 91</a></span><span class="line"><span class="comment">%                         if abs(PV_tar - PV_me) &gt;1e-5</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,92" id="srcline92"> 92</a></span><span class="line"><span class="comment">%                             a_me = (PV_tar - PV_me)/PT_long;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,93" id="srcline93"> 93</a></span><span class="line"><span class="comment">%                         else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,94" id="srcline94"> 94</a></span><span class="line"><span class="comment">%                             a_me = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,95" id="srcline95"> 95</a></span><span class="line"><span class="comment">%                         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,96" id="srcline96"> 96</a></span><span class="line"><span class="comment">%                         Arc = PV_me * Time + 0.5 * a_me * Time ^2;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,97" id="srcline97"> 97</a></span><span class="line"><span class="comment">%                         V_tarPos = PV_me + Time * a_me;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,98" id="srcline98"> 98</a></span><span class="line"><span class="comment">%                     else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,99" id="srcline99"> 99</a></span><span class="line"><span class="comment">%                         Arc = (PV_me + PV_tar) /2 * PT_long + (Time - PT_long) * PV_tar;            </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,100" id="srcline100">100</a></span><span class="line"><span class="comment">%                         V_tarPos = PV_tar;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,101" id="srcline101">101</a></span><span class="line"><span class="comment">%                     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,102" id="srcline102">102</a></span><span class="line"><span class="comment">%                 end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,103" id="srcline103">103</a></span><span class="line">                <span class="mxinfo " id="T1:U412"><span class="var type1" id="S78T1U579">Arc</span> = <span class="mxinfo " id="T1:U414"><span class="var type1" id="S78T1U581">Arc</span> + <span class="var type1" id="S58T1U582">ArcAdd</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,104" id="srcline104">104</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,105" id="srcline105">105</a></span><span class="line">                <span class="var type1" id="S78T1U586">Arc</span> = <span class="var type1" id="S57T1U588">ArcHistory</span> + <span class="var type1" id="S17T1U589">ArcPre</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,106" id="srcline106">106</a></span><span class="line">                <span class="var type1" id="S73T1U592">V_tarPos</span> = <span class="var type1" id="S18T1U593">VPre</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,107" id="srcline107">107</a></span><span class="line">                <span class="var type1" id="S76T1U596">Time</span> = <span class="var type1" id="S54T1U597">PTime</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,108" id="srcline108">108</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,109" id="srcline109">109</a></span><span class="line">            <span class="mxinfo " id="T1:U424"><span class="var type1" id="S80T1U600">Beta</span> = <span class="mxinfo " id="T1:U426">(<span class="mxinfo " id="T1:U427"><span class="var type1" id="S53T1U604">Pangle_out</span> - <span class="var type1" id="S50T1U605">Pangle_in</span></span>)/<span class="mxinfo " id="T1:U430">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,110" id="srcline110">110</a></span><span class="line">            <span class="mxinfo " id="T1:U431"><span class="var type1" id="S81T1U609">theta_rot</span> = <span class="var type1" id="S50T1U610">Pangle_in</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,111" id="srcline111">111</a></span><span class="line">            <span class="mxinfo " id="T1:U434"><span class="var type1" id="S82T1U613">x_outRot</span> = <span class="mxinfo " id="T1:U436"><span class="mxinfo " id="T1:U437">(<span class="mxinfo " id="T1:U438"><span class="var type1" id="S51T1U618">Px_out</span> - <span class="var type1" id="S48T1U619">Px_in</span></span>)*<span class="mxinfo " id="T1:U441">cos(<span class="var type1" id="S81T1U622">theta_rot</span>)</span></span> + <span class="mxinfo " id="T1:U443">(<span class="mxinfo " id="T1:U444"><span class="var type1" id="S52T1U626">Py_out</span> - <span class="var type1" id="S49T1U627">Py_in</span></span>)*<span class="mxinfo " id="T1:U447">sin(<span class="var type1" id="S81T1U630">theta_rot</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,112" id="srcline112">112</a></span><span class="line">            <span class="mxinfo " id="T1:U449"><span class="var type1" id="S85T1U633">y_outRot</span> = <span class="mxinfo " id="T1:U451"><span class="mxinfo " id="T1:U452">(<span class="mxinfo " id="T1:U453"><span class="var type1" id="S52T1U638">Py_out</span> - <span class="var type1" id="S49T1U639">Py_in</span></span>)*<span class="mxinfo " id="T1:U456">cos(<span class="var type1" id="S81T1U642">theta_rot</span>)</span></span> - <span class="mxinfo " id="T1:U458">(<span class="mxinfo " id="T1:U459"><span class="var type1" id="S51T1U646">Px_out</span> - <span class="var type1" id="S48T1U647">Px_in</span></span>)*<span class="mxinfo " id="T1:U462">sin(<span class="var type1" id="S81T1U650">theta_rot</span>)</span></span></span></span>;    </span></span>
<span class="srcline"><span class="lineno"><a href="75,113" id="srcline113">113</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U464"><span class="var type1" id="S80T1U654">Beta</span> == <span class="mxinfo " id="T1:U466">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,114" id="srcline114">114</a></span><span class="line">                <span class="mxinfo " id="T1:U467"><span class="var type1" id="S86T1U658">SignBeta</span> = <span class="mxinfo " id="T1:U469">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,115" id="srcline115">115</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,116" id="srcline116">116</a></span><span class="line">                <span class="mxinfo " id="T1:U470"><span class="var type1" id="S86T1U663">SignBeta</span> = <span class="mxinfo " id="T1:U472">sign(<span class="var type1" id="S80T1U666">Beta</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,117" id="srcline117">117</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,118" id="srcline118">118</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U474"><span class="var type1" id="S78T1U670">Arc</span> &lt; <span class="mxinfo " id="T1:U476"><span class="var type1" id="S44T1U672">PArclength</span>/<span class="mxinfo " id="T1:U478">2</span></span></span>    </span></span>
<span class="srcline"><span class="lineno"><a href="75,119" id="srcline119">119</a></span><span class="line">                <span class="mxinfo " id="T1:U479"><span class="var type1" id="S88T1U676">ulimit</span> = <span class="mxinfo " id="T1:U481"><span class="var type1" id="S78T1U678">Arc</span> * <span class="mxinfo " id="T1:U483">sqrt(<span class="mxinfo " id="T1:U484"><span class="mxinfo " id="T1:U485">abs(<span class="var type1" id="S43T1U684">PDelta</span>)</span>/<span class="mxinfo " id="T1:U487">2</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,120" id="srcline120">120</a></span><span class="line">                <span class="mxinfo " id="T1:U488"><span class="var type1" id="S69T1U688">Theta</span> = <span class="mxinfo " id="T1:U490"><span class="mxinfo " id="T1:U491"><span class="var type1" id="S43T1U691">PDelta</span> * <span class="mxinfo " id="T1:U493">(<span class="var type1" id="S78T1U694">Arc</span>)^2</span></span>/<span class="mxinfo " id="T1:U495">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,121" id="srcline121">121</a></span><span class="line">                <span class="mxinfo " id="T1:U496"><span class="var type1" id="S90T1U699">xpositionTemp</span> = <span class="mxinfo " id="T1:U498"><span class="mxinfo " id="T1:U499">sqrt(<span class="mxinfo " id="T1:U500"><span class="mxinfo " id="T1:U501">2</span>/<span class="mxinfo " id="T1:U502">abs(<span class="var type1" id="S43T1U707">PDelta</span>)</span></span>)</span>*<span class="mxinfo " id="T1:U504"><span class="fcn" id="F215N12:B709">quadcosu2</span>(<span class="var type1" id="S88T1U710">ulimit</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,122" id="srcline122">122</a></span><span class="line">                <span class="mxinfo " id="T1:U506"><span class="var type1" id="S92T1U713">ypositionTemp</span> = <span class="mxinfo " id="T1:U508"><span class="mxinfo " id="T1:U509"><span class="mxinfo " id="T1:U510">sqrt(<span class="mxinfo " id="T1:U511"><span class="mxinfo " id="T1:U512">2</span>/<span class="mxinfo " id="T1:U513">abs(<span class="var type1" id="S43T1U722">PDelta</span>)</span></span>)</span>*<span class="mxinfo " id="T1:U515"><span class="fcn" id="F216N13:B724">quadsinu2</span>(<span class="var type1" id="S88T1U725">ulimit</span>)</span></span> * <span class="var type1" id="S86T1U726">SignBeta</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,123" id="srcline123">123</a></span><span class="line">                <span class="mxinfo " id="T1:U518"><span class="var type1" id="S74T1U729">Kur</span> = <span class="mxinfo " id="T1:U520"><span class="var type1" id="S78T1U731">Arc</span> * <span class="var type1" id="S43T1U732">PDelta</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,124" id="srcline124">124</a></span><span class="line">            <span class="keyword">elseif</span> <span class="mxinfo " id="T8:U523"><span class="var type1" id="S78T1U735">Arc</span> &lt;= <span class="var type1" id="S44T1U736">PArclength</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="75,125" id="srcline125">125</a></span><span class="line">                <span class="mxinfo " id="T1:U526"><span class="var type1" id="S88T1U739">ulimit</span> = <span class="mxinfo " id="T1:U528">(<span class="mxinfo " id="T1:U529"><span class="var type1" id="S44T1U743">PArclength</span> - <span class="var type1" id="S78T1U744">Arc</span></span>) * <span class="mxinfo " id="T1:U532">sqrt(<span class="mxinfo " id="T1:U533"><span class="mxinfo " id="T1:U534">abs(<span class="var type1" id="S43T1U750">PDelta</span>)</span>/<span class="mxinfo " id="T1:U536">2</span></span>)</span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="75,126" id="srcline126">126</a></span><span class="line">                <span class="comment">%Theta = 2*Beta*SignBeta - Delta * (Arclength - Arc)^2/2; </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,127" id="srcline127">127</a></span><span class="line">                <span class="mxinfo " id="T1:U537"><span class="var type1" id="S94T1U754">xpositionMirrTemp</span> = <span class="mxinfo " id="T1:U539"><span class="mxinfo " id="T1:U540">sqrt(<span class="mxinfo " id="T1:U541"><span class="mxinfo " id="T1:U542">2</span>/<span class="mxinfo " id="T1:U543">abs(<span class="var type1" id="S43T1U762">PDelta</span>)</span></span>)</span>*<span class="mxinfo " id="T1:U545"><span class="fcn" id="F215N12:B764">quadcosu2</span>(<span class="var type1" id="S88T1U765">ulimit</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,128" id="srcline128">128</a></span><span class="line">                <span class="mxinfo " id="T1:U547"><span class="var type1" id="S95T1U768">ypositionMirrTemp</span> = <span class="mxinfo " id="T1:U549"><span class="mxinfo " id="T1:U550"><span class="mxinfo " id="T1:U551">sqrt(<span class="mxinfo " id="T1:U552"><span class="mxinfo " id="T1:U553">2</span>/<span class="mxinfo " id="T1:U554">abs(<span class="var type1" id="S43T1U777">PDelta</span>)</span></span>)</span>*<span class="mxinfo " id="T1:U556"><span class="fcn" id="F216N13:B779">quadsinu2</span>(<span class="var type1" id="S88T1U780">ulimit</span>)</span></span> * <span class="var type1" id="S86T1U781">SignBeta</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,129" id="srcline129">129</a></span><span class="line">                <span class="comment">%mirror line Ax+By+C=0</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,130" id="srcline130">130</a></span><span class="line">                <span class="mxinfo " id="T1:U559"><span class="var type1" id="S96T1U784">x_mirr</span> = <span class="mxinfo " id="T1:U561">(<span class="var type1" id="S82T1U787">x_outRot</span>)/<span class="mxinfo " id="T1:U563">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,131" id="srcline131">131</a></span><span class="line">                <span class="mxinfo " id="T1:U564"><span class="var type1" id="S97T1U791">y_mirr</span> = <span class="mxinfo " id="T1:U566">(<span class="var type1" id="S85T1U794">y_outRot</span>)/<span class="mxinfo " id="T1:U568">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,132" id="srcline132">132</a></span><span class="line">                <span class="mxinfo " id="T1:U569"><span class="var type1" id="S98T1U798">angle_mirr</span> = <span class="mxinfo " id="T1:U571"><span class="mxinfo " id="T1:U572"><span class="mxinfo " id="T1:U573">pi</span>/<span class="mxinfo " id="T1:U574">2</span></span> + <span class="mxinfo " id="T1:U575">atan(<span class="mxinfo " id="T1:U576">(<span class="var type1" id="S85T1U808">y_outRot</span>)/(<span class="var type1" id="S82T1U810">x_outRot</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,133" id="srcline133">133</a></span><span class="line">                <span class="mxinfo " id="T1:U579"><span class="var type1" id="S101T1U813">A</span> = <span class="mxinfo " id="T1:U581">tan(<span class="var type1" id="S98T1U816">angle_mirr</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,134" id="srcline134">134</a></span><span class="line">                <span class="mxinfo " id="T1:U583"><span class="var type1" id="S103T1U819">B</span> = <span class="mxinfo " id="T1:U585">-1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,135" id="srcline135">135</a></span><span class="line">                <span class="mxinfo " id="T1:U586"><span class="var type1" id="S104T1U824">C</span> = <span class="mxinfo " id="T1:U588"><span class="var type1" id="S97T1U826">y_mirr</span> - <span class="mxinfo " id="T1:U590"><span class="var type1" id="S101T1U828">A</span> * <span class="var type1" id="S96T1U829">x_mirr</span></span></span></span>;      </span></span>
<span class="srcline"><span class="lineno"><a href="75,136" id="srcline136">136</a></span><span class="line">                <span class="comment">%two points are symmetrical to the Ax+By+C we just defined</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,137" id="srcline137">137</a></span><span class="line">                <span class="mxinfo " id="T1:U593"><span class="var type1" id="S90T1U832">xpositionTemp</span> = <span class="mxinfo " id="T1:U595"><span class="var type1" id="S94T1U834">xpositionMirrTemp</span> - <span class="mxinfo " id="T1:U597"><span class="mxinfo " id="T1:U598"><span class="mxinfo " id="T1:U599"><span class="mxinfo " id="T1:U600">2</span>*<span class="var type1" id="S101T1U839">A</span></span>*(<span class="mxinfo " id="T1:U602"><span class="mxinfo " id="T1:U603"><span class="mxinfo " id="T1:U604"><span class="var type1" id="S101T1U844">A</span>*<span class="var type1" id="S94T1U845">xpositionMirrTemp</span></span>+<span class="mxinfo " id="T1:U607"><span class="var type1" id="S103T1U847">B</span>*<span class="var type1" id="S95T1U848">ypositionMirrTemp</span></span></span>+<span class="var type1" id="S104T1U849">C</span></span>)</span>/(<span class="mxinfo " id="T1:U611"><span class="mxinfo " id="T1:U612"><span class="var type1" id="S101T1U853">A</span>^2</span>+<span class="mxinfo " id="T1:U614"><span class="var type1" id="S103T1U856">B</span>^2</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,138" id="srcline138">138</a></span><span class="line">                <span class="mxinfo " id="T1:U616"><span class="var type1" id="S92T1U860">ypositionTemp</span> = <span class="mxinfo " id="T1:U618"><span class="var type1" id="S95T1U862">ypositionMirrTemp</span> - <span class="mxinfo " id="T1:U620"><span class="mxinfo " id="T1:U621"><span class="mxinfo " id="T1:U622"><span class="mxinfo " id="T1:U623">2</span>*<span class="var type1" id="S103T1U867">B</span></span>*(<span class="mxinfo " id="T1:U625"><span class="mxinfo " id="T1:U626"><span class="mxinfo " id="T1:U627"><span class="var type1" id="S101T1U872">A</span>*<span class="var type1" id="S94T1U873">xpositionMirrTemp</span></span>+<span class="mxinfo " id="T1:U630"><span class="var type1" id="S103T1U875">B</span>*<span class="var type1" id="S95T1U876">ypositionMirrTemp</span></span></span>+<span class="var type1" id="S104T1U877">C</span></span>)</span>/(<span class="mxinfo " id="T1:U634"><span class="mxinfo " id="T1:U635"><span class="var type1" id="S101T1U881">A</span>^2</span>+<span class="mxinfo " id="T1:U637"><span class="var type1" id="S103T1U884">B</span>^2</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,139" id="srcline139">139</a></span><span class="line">                <span class="mxinfo " id="T1:U639"><span class="var type1" id="S69T1U888">Theta</span> = <span class="mxinfo " id="T1:U641"><span class="mxinfo " id="T1:U642"><span class="mxinfo " id="T1:U643"><span class="mxinfo " id="T1:U644">2</span>*<span class="mxinfo " id="T1:U645">abs(<span class="var type1" id="S80T1U895">Beta</span>)</span></span>*<span class="var type1" id="S86T1U896">SignBeta</span></span> - <span class="mxinfo " id="T1:U648"><span class="mxinfo " id="T1:U649"><span class="var type1" id="S43T1U899">PDelta</span> * <span class="mxinfo " id="T1:U651">(<span class="mxinfo " id="T1:U652"><span class="var type1" id="S44T1U903">PArclength</span> - <span class="var type1" id="S78T1U904">Arc</span></span>)^2</span></span>/<span class="mxinfo " id="T1:U655">2</span></span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="75,140" id="srcline140">140</a></span><span class="line">                <span class="mxinfo " id="T1:U656"><span class="var type1" id="S74T1U909">Kur</span> = <span class="mxinfo " id="T1:U658"><span class="mxinfo " id="T1:U659"><span class="var type1" id="S43T1U912">PDelta</span> * <span class="var type1" id="S78T1U913">Arc</span></span> - <span class="mxinfo " id="T1:U662"><span class="mxinfo " id="T1:U663"><span class="var type1" id="S44T1U916">PArclength</span>/<span class="mxinfo " id="T1:U665">2</span></span> * <span class="var type1" id="S43T1U918">PDelta</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,141" id="srcline141">141</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,142" id="srcline142">142</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="75,143" id="srcline143">143</a></span><span class="line">                <span class="mxinfo " id="T1:U667"><span class="var type1" id="S90T1U922">xpositionTemp</span> = <span class="mxinfo " id="T1:U669"><span class="var type1" id="S82T1U924">x_outRot</span> + <span class="mxinfo " id="T1:U671">(<span class="mxinfo " id="T1:U672"><span class="var type1" id="S78T1U928">Arc</span> - <span class="var type1" id="S44T1U929">PArclength</span></span>) * <span class="mxinfo " id="T1:U675">cos(<span class="mxinfo " id="T1:U676"><span class="var type1" id="S53T1U933">Pangle_out</span> - <span class="var type1" id="S50T1U934">Pangle_in</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,144" id="srcline144">144</a></span><span class="line">                <span class="mxinfo " id="T1:U679"><span class="var type1" id="S92T1U937">ypositionTemp</span> = <span class="mxinfo " id="T1:U681"><span class="var type1" id="S85T1U939">y_outRot</span> + <span class="mxinfo " id="T1:U683">(<span class="mxinfo " id="T1:U684"><span class="var type1" id="S78T1U943">Arc</span> - <span class="var type1" id="S44T1U944">PArclength</span></span>) * <span class="mxinfo " id="T1:U687">sin(<span class="mxinfo " id="T1:U688"><span class="var type1" id="S53T1U948">Pangle_out</span> - <span class="var type1" id="S50T1U949">Pangle_in</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,145" id="srcline145">145</a></span><span class="line">    <span class="comment">%             PrePointCalEn = 0;PointCalEn = 0;FirstTrigFlg = 0;Kur = 0;Theta = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,146" id="srcline146">146</a></span><span class="line">    <span class="comment">%             PathTrjFinishFlg = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,147" id="srcline147">147</a></span><span class="line">                <span class="mxinfo " id="T1:U691"><span class="var type1" id="S74T1U952">Kur</span> = <span class="mxinfo " id="T1:U693">0</span></span>;<span class="mxinfo " id="T1:U694"><span class="var type1" id="S69T1U956">Theta</span> = <span class="mxinfo " id="T1:U696">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,148" id="srcline148">148</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="75,149" id="srcline149">149</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,150" id="srcline150">150</a></span><span class="line">            <span class="mxinfo " id="T1:U697"><span class="var type1" id="S81T1U960">theta_rot</span> = <span class="mxinfo " id="T1:U699">- <span class="var type1" id="S50T1U962">Pangle_in</span></span></span>;   </span></span>
<span class="srcline"><span class="lineno"><a href="75,151" id="srcline151">151</a></span><span class="line">            <span class="mxinfo " id="T1:U701"><span class="var type1" id="S63T1U965">xpositionPre</span> = <span class="mxinfo " id="T1:U703"><span class="mxinfo " id="T1:U704"><span class="var type1" id="S90T1U968">xpositionTemp</span>*<span class="mxinfo " id="T1:U706">cos(<span class="var type1" id="S81T1U971">theta_rot</span>)</span></span> + <span class="mxinfo " id="T1:U708"><span class="var type1" id="S92T1U973">ypositionTemp</span>*<span class="mxinfo " id="T1:U710">sin(<span class="var type1" id="S81T1U976">theta_rot</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,152" id="srcline152">152</a></span><span class="line">            <span class="mxinfo " id="T1:U712"><span class="var type1" id="S64T1U979">ypositionPre</span> = <span class="mxinfo " id="T1:U714"><span class="mxinfo " id="T1:U715"><span class="var type1" id="S92T1U982">ypositionTemp</span>*<span class="mxinfo " id="T1:U717">cos(<span class="var type1" id="S81T1U985">theta_rot</span>)</span></span> - <span class="mxinfo " id="T1:U719"><span class="var type1" id="S90T1U987">xpositionTemp</span>*<span class="mxinfo " id="T1:U721">sin(<span class="var type1" id="S81T1U990">theta_rot</span>)</span></span></span></span> ;  </span></span>
<span class="srcline"><span class="lineno"><a href="75,153" id="srcline153">153</a></span><span class="line">            <span class="mxinfo " id="T1:U723"><span class="var type1" id="S63T1U993">xpositionPre</span> = <span class="mxinfo " id="T1:U725"><span class="var type1" id="S63T1U995">xpositionPre</span> + <span class="var type1" id="S48T1U996">Px_in</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,154" id="srcline154">154</a></span><span class="line">            <span class="mxinfo " id="T1:U728"><span class="var type1" id="S64T1U999">ypositionPre</span> = <span class="mxinfo " id="T1:U730"><span class="var type1" id="S64T1U1001">ypositionPre</span> + <span class="var type1" id="S49T1U1002">Py_in</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,155" id="srcline155">155</a></span><span class="line">            <span class="mxinfo " id="T1:U733"><span class="var type1" id="S69T1U1005">Theta</span> = <span class="mxinfo " id="T1:U735"><span class="var type1" id="S69T1U1007">Theta</span> + <span class="var type1" id="S50T1U1008">Pangle_in</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,156" id="srcline156">156</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="75,157" id="srcline157">157</a></span><span class="line">            <span class="mxinfo " id="T1:U738"><span class="var type1" id="S105T1U1011">PreDistheta_rot</span> = <span class="mxinfo " id="T1:U740"><span class="var type1" id="S20T10U1013">Info_Me</span>(<span class="mxinfo " id="T9:U742">6</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,158" id="srcline158">158</a></span><span class="line">            <span class="mxinfo " id="T1:U743"><span class="var type1" id="S75T1U1017">PreDis</span> = <span class="mxinfo " id="T1:U745"><span class="mxinfo " id="T1:U746">(<span class="mxinfo " id="T1:U747"><span class="var type1" id="S63T1U1022">xpositionPre</span> - <span class="mxinfo " id="T1:U749"><span class="var type1" id="S20T10U1024">Info_Me</span>(<span class="mxinfo " id="T1:U751">1</span>)</span></span>)*<span class="mxinfo " id="T1:U752">cos(<span class="var type1" id="S105T1U1028">PreDistheta_rot</span>)</span></span> + <span class="mxinfo " id="T1:U754">(<span class="mxinfo " id="T1:U755"><span class="var type1" id="S64T1U1032">ypositionPre</span> - <span class="mxinfo " id="T1:U757"><span class="var type1" id="S20T10U1034">Info_Me</span>(<span class="mxinfo " id="T1:U759">2</span>)</span></span>)*<span class="mxinfo " id="T1:U760">sin(<span class="var type1" id="S105T1U1038">PreDistheta_rot</span>)</span></span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="75,159" id="srcline159">159</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="75,160" id="srcline160">160</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,161" id="srcline161">161</a></span><span class="line">        <span class="mxinfo " id="T1:U762"><span class="var type1" id="S67T1U1041">Vx</span> = <span class="mxinfo " id="T1:U764"><span class="var type1" id="S73T1U1043">V_tarPos</span> * <span class="mxinfo " id="T1:U766">cos(<span class="var type1" id="S69T1U1046">Theta</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,162" id="srcline162">162</a></span><span class="line">        <span class="mxinfo " id="T1:U768"><span class="var type1" id="S68T1U1049">Vy</span> = <span class="mxinfo " id="T1:U770"><span class="var type1" id="S73T1U1051">V_tarPos</span> * <span class="mxinfo " id="T1:U772">sin(<span class="var type1" id="S69T1U1054">Theta</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,163" id="srcline163">163</a></span><span class="line">        <span class="mxinfo " id="T1:U774"><span class="var type1" id="S106T1U1057">Arel</span> = <span class="mxinfo " id="T1:U776"><span class="mxinfo " id="T1:U777"><span class="var type1" id="S73T1U1060">V_tarPos</span>^2</span> * <span class="var type1" id="S74T1U1062">Kur</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,164" id="srcline164">164</a></span><span class="line">        <span class="mxinfo " id="T1:U780"><span class="var type1" id="S65T1U1065">Ax</span> = <span class="mxinfo " id="T1:U782"><span class="var type1" id="S106T1U1067">Arel</span> * <span class="mxinfo " id="T1:U784">cos(<span class="var type1" id="S69T1U1070">Theta</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,165" id="srcline165">165</a></span><span class="line">        <span class="mxinfo " id="T1:U786"><span class="var type1" id="S66T1U1073">Ay</span> = <span class="mxinfo " id="T1:U788"><span class="var type1" id="S106T1U1075">Arel</span> * <span class="mxinfo " id="T1:U790">sin(<span class="var type1" id="S69T1U1078">Theta</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,166" id="srcline166">166</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="75,167" id="srcline167">167</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo " id="T8:U792"><span class="var type1" id="S36T1U1085">SimpleStop</span>&gt;<span class="mxinfo " id="T1:U794">0.5</span></span>)&amp;&amp;(<span class="var type1" id="S14T1U1089">StopFlg</span>&gt;0.5)&amp;&amp;(<span class="var type1" id="S75T1U1093">PreDis</span> &lt; 0.5)</span></span>
<span class="srcline"><span class="lineno"><a href="75,168" id="srcline168">168</a></span><span class="line">            <span class="var type1" id="S63T1U1097">xpositionPre</span> = <span class="var type1" id="S20T10U1100">Info_Me</span>(1) + <span class="var type1" id="S17T1U1103">ArcPre</span>*cos(<span class="var type1" id="S20T10U1107">Info_Me</span>(6));</span></span>
<span class="srcline"><span class="lineno"><a href="75,169" id="srcline169">169</a></span><span class="line">            <span class="var type1" id="S64T1U1111">ypositionPre</span> = <span class="var type1" id="S20T10U1114">Info_Me</span>(2) + <span class="var type1" id="S17T1U1117">ArcPre</span>*sin(<span class="var type1" id="S20T10U1121">Info_Me</span>(6));</span></span>
<span class="srcline"><span class="lineno"><a href="75,170" id="srcline170">170</a></span><span class="line">            <span class="var type1" id="S67T1U1125">Vx</span> = 0;<span class="var type1" id="S68T1U1129">Vy</span> = 0;<span class="var type1" id="S69T1U1133">Theta</span> = <span class="var type1" id="S20T10U1135">Info_Me</span>(6);</span></span>
<span class="srcline"><span class="lineno"><a href="75,171" id="srcline171">171</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,172" id="srcline172">172</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,173" id="srcline173">173</a></span><span class="line">        <span class="comment">%To Cal next point</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,174" id="srcline174">174</a></span><span class="line">        <span class="mxinfo " id="T1:U809"><span class="var type1" id="S76T1U1140">Time</span> = <span class="mxinfo " id="T1:U811"><span class="var type1" id="S54T1U1142">PTime</span> + <span class="mxinfo " id="T1:U813">0.01</span></span></span>;     </span></span>
<span class="srcline"><span class="lineno"><a href="75,175" id="srcline175">175</a></span><span class="line">        <span class="mxinfo " id="T1:U814"><span class="var type1" id="S77T1U1146">V_me</span> = <span class="mxinfo " id="T1:U816"><span class="var type1" id="S20T10U1148">Info_Me</span>(<span class="mxinfo " id="T1:U818">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,176" id="srcline176">176</a></span><span class="line">        <span class="mxinfo " id="T1:U819"><span class="var type1" id="S78T1U1152">Arc</span> = <span class="mxinfo " id="T1:U821">255</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,177" id="srcline177">177</a></span><span class="line"><span class="comment">%         V_tarPos = 255;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,178" id="srcline178">178</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U822"><span class="var type1" id="S14T1U1157">StopFlg</span> &lt; <span class="mxinfo " id="T1:U824">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,179" id="srcline179">179</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U825"><span class="var type1" id="S76T1U1162">Time</span> &lt;= <span class="var type1" id="S45T1U1163">PT_long</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,180" id="srcline180">180</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T8:U828"><span class="mxinfo " id="T1:U829">abs(<span class="mxinfo " id="T1:U830"><span class="var type1" id="S42T1U1170">PV_tar</span> - <span class="var type1" id="S55T1U1171">PV_me</span></span>)</span> &gt;<span class="mxinfo " id="T1:U833">1e-5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,181" id="srcline181">181</a></span><span class="line">                    <span class="mxinfo " id="T1:U834"><span class="var type1" id="S79T1U1175">a_me</span> = <span class="mxinfo " id="T1:U836">(<span class="mxinfo " id="T1:U837"><span class="var type1" id="S42T1U1179">PV_tar</span> - <span class="var type1" id="S55T1U1180">PV_me</span></span>)/<span class="var type1" id="S45T1U1181">PT_long</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,182" id="srcline182">182</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,183" id="srcline183">183</a></span><span class="line">                    <span class="mxinfo " id="T1:U841"><span class="var type1" id="S79T1U1185">a_me</span> = <span class="mxinfo " id="T1:U843">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,184" id="srcline184">184</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,185" id="srcline185">185</a></span><span class="line">                <span class="mxinfo " id="T1:U844"><span class="var type1" id="S78T1U1189">Arc</span> = <span class="mxinfo " id="T1:U846"><span class="mxinfo " id="T1:U847"><span class="var type1" id="S55T1U1192">PV_me</span> * <span class="var type1" id="S76T1U1193">Time</span></span> + <span class="mxinfo " id="T1:U850"><span class="mxinfo " id="T1:U851"><span class="mxinfo " id="T1:U852">0.5</span> * <span class="var type1" id="S79T1U1197">a_me</span></span> * <span class="mxinfo " id="T1:U854"><span class="var type1" id="S76T1U1199">Time</span> ^2</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,186" id="srcline186">186</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,187" id="srcline187">187</a></span><span class="line">                <span class="mxinfo " id="T1:U856"><span class="var type1" id="S78T1U1204">Arc</span> = <span class="mxinfo " id="T1:U858"><span class="mxinfo " id="T1:U859"><span class="mxinfo " id="T1:U860">(<span class="mxinfo " id="T1:U861"><span class="var type1" id="S55T1U1210">PV_me</span> + <span class="var type1" id="S42T1U1211">PV_tar</span></span>) /<span class="mxinfo " id="T1:U864">2</span></span> * <span class="var type1" id="S45T1U1213">PT_long</span></span> + <span class="mxinfo " id="T1:U866">(<span class="mxinfo " id="T1:U867"><span class="var type1" id="S76T1U1217">Time</span> - <span class="var type1" id="S45T1U1218">PT_long</span></span>) * <span class="var type1" id="S42T1U1219">PV_tar</span></span></span></span>;            </span></span>
<span class="srcline"><span class="lineno"><a href="75,188" id="srcline188">188</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,189" id="srcline189">189</a></span><span class="line"><span class="comment">%             if Time &gt; PT_lat</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,190" id="srcline190">190</a></span><span class="line"><span class="comment">%                 if Time &lt;= PT_long</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,191" id="srcline191">191</a></span><span class="line"><span class="comment">%                     if abs(PV_tar - PV_me) &gt;1e-5</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,192" id="srcline192">192</a></span><span class="line"><span class="comment">%                         a_me = (PV_tar - PV_me)/PT_long;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,193" id="srcline193">193</a></span><span class="line"><span class="comment">%                     else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,194" id="srcline194">194</a></span><span class="line"><span class="comment">%                         a_me = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,195" id="srcline195">195</a></span><span class="line"><span class="comment">%                     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,196" id="srcline196">196</a></span><span class="line"><span class="comment">%                     Arc = PV_me * Time + 0.5 * a_me * Time ^2;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,197" id="srcline197">197</a></span><span class="line"><span class="comment">%                 else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,198" id="srcline198">198</a></span><span class="line"><span class="comment">%                     Arc = (PV_me + PV_tar) /2 * PT_long + (Time - PT_long) * PV_tar;            </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,199" id="srcline199">199</a></span><span class="line"><span class="comment">%                 end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,200" id="srcline200">200</a></span><span class="line"><span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,201" id="srcline201">201</a></span><span class="line"><span class="comment">%             else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,202" id="srcline202">202</a></span><span class="line"><span class="comment">%                 if Time &lt;= PT_long</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,203" id="srcline203">203</a></span><span class="line"><span class="comment">%                     if abs(PV_tar - PV_me) &gt;1e-5</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,204" id="srcline204">204</a></span><span class="line"><span class="comment">%                         a_me = (PV_tar - PV_me)/PT_long;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,205" id="srcline205">205</a></span><span class="line"><span class="comment">%                     else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,206" id="srcline206">206</a></span><span class="line"><span class="comment">%                         a_me = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,207" id="srcline207">207</a></span><span class="line"><span class="comment">%                     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,208" id="srcline208">208</a></span><span class="line"><span class="comment">%                     Arc = PV_me * Time + 0.5 * a_me * Time ^2;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,209" id="srcline209">209</a></span><span class="line"><span class="comment">%                 else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,210" id="srcline210">210</a></span><span class="line"><span class="comment">%                     Arc = (PV_me + PV_tar) /2 * PT_long + (Time - PT_long) * PV_tar;            </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,211" id="srcline211">211</a></span><span class="line"><span class="comment">%                 end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,212" id="srcline212">212</a></span><span class="line"><span class="comment">%             end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,213" id="srcline213">213</a></span><span class="line">            <span class="mxinfo " id="T1:U871"><span class="var type1" id="S78T1U1222">Arc</span> = <span class="mxinfo " id="T1:U873"><span class="var type1" id="S78T1U1224">Arc</span> + <span class="var type1" id="S58T1U1225">ArcAdd</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,214" id="srcline214">214</a></span><span class="line">            <span class="mxinfo " id="T1:U876"><span class="var type1" id="S57T1U1228">ArcHistory</span> = <span class="var type1" id="S78T1U1229">Arc</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,215" id="srcline215">215</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,216" id="srcline216">216</a></span><span class="line">            <span class="var type1" id="S78T1U1233">Arc</span> = <span class="var type1" id="S57T1U1235">ArcHistory</span> + <span class="var type1" id="S16T1U1236">ArcNex</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,217" id="srcline217">217</a></span><span class="line">            <span class="var type1" id="S57T1U1239">ArcHistory</span> = <span class="var type1" id="S78T1U1240">Arc</span>; </span></span>
<span class="srcline"><span class="lineno"><a href="75,218" id="srcline218">218</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,219" id="srcline219">219</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo " id="T8:U884"><span class="var type1" id="S36T1U1246">SimpleStop</span>&gt;<span class="mxinfo " id="T1:U886">0.5</span></span>)&amp;&amp;(<span class="var type1" id="S14T1U1250">StopFlg</span>&gt;0.5)</span></span>
<span class="srcline"><span class="lineno"><a href="75,220" id="srcline220">220</a></span><span class="line">            <span class="var type1" id="S70T1U1254">xpositionNex</span> = <span class="var type1" id="S20T10U1257">Info_Me</span>(1) + <span class="var type1" id="S16T1U1260">ArcNex</span>*cos(<span class="var type1" id="S20T10U1264">Info_Me</span>(6));</span></span>
<span class="srcline"><span class="lineno"><a href="75,221" id="srcline221">221</a></span><span class="line">            <span class="var type1" id="S71T1U1268">ypositionNex</span> = <span class="var type1" id="S20T10U1271">Info_Me</span>(2) + <span class="var type1" id="S16T1U1274">ArcNex</span>*sin(<span class="var type1" id="S20T10U1278">Info_Me</span>(6));            </span></span>
<span class="srcline"><span class="lineno"><a href="75,222" id="srcline222">222</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,223" id="srcline223">223</a></span><span class="line">            <span class="mxinfo " id="T1:U896"><span class="var type1" id="S80T1U1283">Beta</span> = <span class="mxinfo " id="T1:U898">(<span class="mxinfo " id="T1:U899"><span class="var type1" id="S53T1U1287">Pangle_out</span> - <span class="var type1" id="S50T1U1288">Pangle_in</span></span>)/<span class="mxinfo " id="T1:U902">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,224" id="srcline224">224</a></span><span class="line">            <span class="mxinfo " id="T1:U903"><span class="var type1" id="S81T1U1292">theta_rot</span> = <span class="var type1" id="S50T1U1293">Pangle_in</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,225" id="srcline225">225</a></span><span class="line">            <span class="mxinfo " id="T1:U906"><span class="var type1" id="S82T1U1296">x_outRot</span> = <span class="mxinfo " id="T1:U908"><span class="mxinfo " id="T1:U909">(<span class="mxinfo " id="T1:U910"><span class="var type1" id="S51T1U1301">Px_out</span> - <span class="var type1" id="S48T1U1302">Px_in</span></span>)*<span class="mxinfo " id="T1:U913">cos(<span class="var type1" id="S81T1U1305">theta_rot</span>)</span></span> + <span class="mxinfo " id="T1:U915">(<span class="mxinfo " id="T1:U916"><span class="var type1" id="S52T1U1309">Py_out</span> - <span class="var type1" id="S49T1U1310">Py_in</span></span>)*<span class="mxinfo " id="T1:U919">sin(<span class="var type1" id="S81T1U1313">theta_rot</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,226" id="srcline226">226</a></span><span class="line">            <span class="mxinfo " id="T1:U921"><span class="var type1" id="S85T1U1316">y_outRot</span> = <span class="mxinfo " id="T1:U923"><span class="mxinfo " id="T1:U924">(<span class="mxinfo " id="T1:U925"><span class="var type1" id="S52T1U1321">Py_out</span> - <span class="var type1" id="S49T1U1322">Py_in</span></span>)*<span class="mxinfo " id="T1:U928">cos(<span class="var type1" id="S81T1U1325">theta_rot</span>)</span></span> - <span class="mxinfo " id="T1:U930">(<span class="mxinfo " id="T1:U931"><span class="var type1" id="S51T1U1329">Px_out</span> - <span class="var type1" id="S48T1U1330">Px_in</span></span>)*<span class="mxinfo " id="T1:U934">sin(<span class="var type1" id="S81T1U1333">theta_rot</span>)</span></span></span></span>;    </span></span>
<span class="srcline"><span class="lineno"><a href="75,227" id="srcline227">227</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U936"><span class="var type1" id="S80T1U1337">Beta</span> == <span class="mxinfo " id="T1:U938">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,228" id="srcline228">228</a></span><span class="line">                <span class="mxinfo " id="T1:U939"><span class="var type1" id="S86T1U1341">SignBeta</span> = <span class="mxinfo " id="T1:U941">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,229" id="srcline229">229</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,230" id="srcline230">230</a></span><span class="line">                <span class="mxinfo " id="T1:U942"><span class="var type1" id="S86T1U1346">SignBeta</span> = <span class="mxinfo " id="T1:U944">sign(<span class="var type1" id="S80T1U1349">Beta</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,231" id="srcline231">231</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,232" id="srcline232">232</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U946"><span class="var type1" id="S78T1U1353">Arc</span> &lt; <span class="mxinfo " id="T1:U948"><span class="var type1" id="S44T1U1355">PArclength</span>/<span class="mxinfo " id="T1:U950">2</span></span></span>    </span></span>
<span class="srcline"><span class="lineno"><a href="75,233" id="srcline233">233</a></span><span class="line">                <span class="mxinfo " id="T1:U951"><span class="var type1" id="S88T1U1359">ulimit</span> = <span class="mxinfo " id="T1:U953"><span class="var type1" id="S78T1U1361">Arc</span> * <span class="mxinfo " id="T1:U955">sqrt(<span class="mxinfo " id="T1:U956"><span class="mxinfo " id="T1:U957">abs(<span class="var type1" id="S43T1U1367">PDelta</span>)</span>/<span class="mxinfo " id="T1:U959">2</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,234" id="srcline234">234</a></span><span class="line">                <span class="mxinfo " id="T1:U960"><span class="var type1" id="S90T1U1371">xpositionTemp</span> = <span class="mxinfo " id="T1:U962"><span class="mxinfo " id="T1:U963">sqrt(<span class="mxinfo " id="T1:U964"><span class="mxinfo " id="T1:U965">2</span>/<span class="mxinfo " id="T1:U966">abs(<span class="var type1" id="S43T1U1379">PDelta</span>)</span></span>)</span>*<span class="mxinfo " id="T1:U968"><span class="fcn" id="F215N12:B1381">quadcosu2</span>(<span class="var type1" id="S88T1U1382">ulimit</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,235" id="srcline235">235</a></span><span class="line">                <span class="mxinfo " id="T1:U970"><span class="var type1" id="S92T1U1385">ypositionTemp</span> = <span class="mxinfo " id="T1:U972"><span class="mxinfo " id="T1:U973"><span class="mxinfo " id="T1:U974">sqrt(<span class="mxinfo " id="T1:U975"><span class="mxinfo " id="T1:U976">2</span>/<span class="mxinfo " id="T1:U977">abs(<span class="var type1" id="S43T1U1394">PDelta</span>)</span></span>)</span>*<span class="mxinfo " id="T1:U979"><span class="fcn" id="F216N13:B1396">quadsinu2</span>(<span class="var type1" id="S88T1U1397">ulimit</span>)</span></span> * <span class="var type1" id="S86T1U1398">SignBeta</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,236" id="srcline236">236</a></span><span class="line">            <span class="keyword">elseif</span> <span class="mxinfo " id="T8:U982"><span class="var type1" id="S78T1U1401">Arc</span> &lt;= <span class="var type1" id="S44T1U1402">PArclength</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="75,237" id="srcline237">237</a></span><span class="line">                <span class="mxinfo " id="T1:U985"><span class="var type1" id="S88T1U1405">ulimit</span> = <span class="mxinfo " id="T1:U987">(<span class="mxinfo " id="T1:U988"><span class="var type1" id="S44T1U1409">PArclength</span> - <span class="var type1" id="S78T1U1410">Arc</span></span>) * <span class="mxinfo " id="T1:U991">sqrt(<span class="mxinfo " id="T1:U992"><span class="mxinfo " id="T1:U993">abs(<span class="var type1" id="S43T1U1416">PDelta</span>)</span>/<span class="mxinfo " id="T1:U995">2</span></span>)</span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="75,238" id="srcline238">238</a></span><span class="line">                <span class="mxinfo " id="T1:U996"><span class="var type1" id="S94T1U1420">xpositionMirrTemp</span> = <span class="mxinfo " id="T1:U998"><span class="mxinfo " id="T1:U999">sqrt(<span class="mxinfo " id="T1:U1000"><span class="mxinfo " id="T1:U1001">2</span>/<span class="mxinfo " id="T1:U1002">abs(<span class="var type1" id="S43T1U1428">PDelta</span>)</span></span>)</span>*<span class="mxinfo " id="T1:U1004"><span class="fcn" id="F215N12:B1430">quadcosu2</span>(<span class="var type1" id="S88T1U1431">ulimit</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,239" id="srcline239">239</a></span><span class="line">                <span class="mxinfo " id="T1:U1006"><span class="var type1" id="S95T1U1434">ypositionMirrTemp</span> = <span class="mxinfo " id="T1:U1008"><span class="mxinfo " id="T1:U1009"><span class="mxinfo " id="T1:U1010">sqrt(<span class="mxinfo " id="T1:U1011"><span class="mxinfo " id="T1:U1012">2</span>/<span class="mxinfo " id="T1:U1013">abs(<span class="var type1" id="S43T1U1443">PDelta</span>)</span></span>)</span>*<span class="mxinfo " id="T1:U1015"><span class="fcn" id="F216N13:B1445">quadsinu2</span>(<span class="var type1" id="S88T1U1446">ulimit</span>)</span></span> * <span class="var type1" id="S86T1U1447">SignBeta</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,240" id="srcline240">240</a></span><span class="line">                <span class="comment">%mirror line Ax+By+C=0</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,241" id="srcline241">241</a></span><span class="line">                <span class="mxinfo " id="T1:U1018"><span class="var type1" id="S96T1U1450">x_mirr</span> = <span class="mxinfo " id="T1:U1020">(<span class="var type1" id="S82T1U1453">x_outRot</span>)/<span class="mxinfo " id="T1:U1022">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,242" id="srcline242">242</a></span><span class="line">                <span class="mxinfo " id="T1:U1023"><span class="var type1" id="S97T1U1457">y_mirr</span> = <span class="mxinfo " id="T1:U1025">(<span class="var type1" id="S85T1U1460">y_outRot</span>)/<span class="mxinfo " id="T1:U1027">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,243" id="srcline243">243</a></span><span class="line">                <span class="mxinfo " id="T1:U1028"><span class="var type1" id="S98T1U1464">angle_mirr</span> = <span class="mxinfo " id="T1:U1030"><span class="mxinfo " id="T1:U1031"><span class="mxinfo " id="T1:U1032">pi</span>/<span class="mxinfo " id="T1:U1033">2</span></span> + <span class="mxinfo " id="T1:U1034">atan(<span class="mxinfo " id="T1:U1035">(<span class="var type1" id="S85T1U1474">y_outRot</span>)/(<span class="var type1" id="S82T1U1476">x_outRot</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,244" id="srcline244">244</a></span><span class="line">                <span class="mxinfo " id="T1:U1038"><span class="var type1" id="S101T1U1479">A</span> = <span class="mxinfo " id="T1:U1040">tan(<span class="var type1" id="S98T1U1482">angle_mirr</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,245" id="srcline245">245</a></span><span class="line">                <span class="mxinfo " id="T1:U1042"><span class="var type1" id="S103T1U1485">B</span> = <span class="mxinfo " id="T1:U1044">-1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,246" id="srcline246">246</a></span><span class="line">                <span class="mxinfo " id="T1:U1045"><span class="var type1" id="S104T1U1490">C</span> = <span class="mxinfo " id="T1:U1047"><span class="var type1" id="S97T1U1492">y_mirr</span> - <span class="mxinfo " id="T1:U1049"><span class="var type1" id="S101T1U1494">A</span> * <span class="var type1" id="S96T1U1495">x_mirr</span></span></span></span>;      </span></span>
<span class="srcline"><span class="lineno"><a href="75,247" id="srcline247">247</a></span><span class="line">                <span class="comment">%two points are symmetrical to the Ax+By+C we just defined</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,248" id="srcline248">248</a></span><span class="line">                <span class="mxinfo " id="T1:U1052"><span class="var type1" id="S90T1U1498">xpositionTemp</span> = <span class="mxinfo " id="T1:U1054"><span class="var type1" id="S94T1U1500">xpositionMirrTemp</span> - <span class="mxinfo " id="T1:U1056"><span class="mxinfo " id="T1:U1057"><span class="mxinfo " id="T1:U1058"><span class="mxinfo " id="T1:U1059">2</span>*<span class="var type1" id="S101T1U1505">A</span></span>*(<span class="mxinfo " id="T1:U1061"><span class="mxinfo " id="T1:U1062"><span class="mxinfo " id="T1:U1063"><span class="var type1" id="S101T1U1510">A</span>*<span class="var type1" id="S94T1U1511">xpositionMirrTemp</span></span>+<span class="mxinfo " id="T1:U1066"><span class="var type1" id="S103T1U1513">B</span>*<span class="var type1" id="S95T1U1514">ypositionMirrTemp</span></span></span>+<span class="var type1" id="S104T1U1515">C</span></span>)</span>/(<span class="mxinfo " id="T1:U1070"><span class="mxinfo " id="T1:U1071"><span class="var type1" id="S101T1U1519">A</span>^2</span>+<span class="mxinfo " id="T1:U1073"><span class="var type1" id="S103T1U1522">B</span>^2</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,249" id="srcline249">249</a></span><span class="line">                <span class="mxinfo " id="T1:U1075"><span class="var type1" id="S92T1U1526">ypositionTemp</span> = <span class="mxinfo " id="T1:U1077"><span class="var type1" id="S95T1U1528">ypositionMirrTemp</span> - <span class="mxinfo " id="T1:U1079"><span class="mxinfo " id="T1:U1080"><span class="mxinfo " id="T1:U1081"><span class="mxinfo " id="T1:U1082">2</span>*<span class="var type1" id="S103T1U1533">B</span></span>*(<span class="mxinfo " id="T1:U1084"><span class="mxinfo " id="T1:U1085"><span class="mxinfo " id="T1:U1086"><span class="var type1" id="S101T1U1538">A</span>*<span class="var type1" id="S94T1U1539">xpositionMirrTemp</span></span>+<span class="mxinfo " id="T1:U1089"><span class="var type1" id="S103T1U1541">B</span>*<span class="var type1" id="S95T1U1542">ypositionMirrTemp</span></span></span>+<span class="var type1" id="S104T1U1543">C</span></span>)</span>/(<span class="mxinfo " id="T1:U1093"><span class="mxinfo " id="T1:U1094"><span class="var type1" id="S101T1U1547">A</span>^2</span>+<span class="mxinfo " id="T1:U1096"><span class="var type1" id="S103T1U1550">B</span>^2</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,250" id="srcline250">250</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,251" id="srcline251">251</a></span><span class="line"><span class="comment">%                 if Time &gt;= PT_long</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,252" id="srcline252">252</a></span><span class="line">                <span class="mxinfo " id="T1:U1098"><span class="var type1" id="S90T1U1555">xpositionTemp</span> = <span class="mxinfo " id="T1:U1100"><span class="var type1" id="S82T1U1557">x_outRot</span> + <span class="mxinfo " id="T1:U1102">(<span class="mxinfo " id="T1:U1103"><span class="var type1" id="S78T1U1561">Arc</span> - <span class="var type1" id="S44T1U1562">PArclength</span></span>) * <span class="mxinfo " id="T1:U1106">cos(<span class="mxinfo " id="T1:U1107"><span class="var type1" id="S53T1U1566">Pangle_out</span> - <span class="var type1" id="S50T1U1567">Pangle_in</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,253" id="srcline253">253</a></span><span class="line">                <span class="mxinfo " id="T1:U1110"><span class="var type1" id="S92T1U1570">ypositionTemp</span> = <span class="mxinfo " id="T1:U1112"><span class="var type1" id="S85T1U1572">y_outRot</span> + <span class="mxinfo " id="T1:U1114">(<span class="mxinfo " id="T1:U1115"><span class="var type1" id="S78T1U1576">Arc</span> - <span class="var type1" id="S44T1U1577">PArclength</span></span>) * <span class="mxinfo " id="T1:U1118">sin(<span class="mxinfo " id="T1:U1119"><span class="var type1" id="S53T1U1581">Pangle_out</span> - <span class="var type1" id="S50T1U1582">Pangle_in</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,254" id="srcline254">254</a></span><span class="line"><span class="comment">%                 else       </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,255" id="srcline255">255</a></span><span class="line"><span class="comment">%                     xpositionTemp = 0;ypositionTemp = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,256" id="srcline256">256</a></span><span class="line"><span class="comment">%                 end  </span></span></span>
<span class="srcline"><span class="lineno"><a href="75,257" id="srcline257">257</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T8:U1122"><span class="var type1" id="S26T1U1586">PathPlanRes</span> &lt; <span class="mxinfo " id="T1:U1124">1e-1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="75,258" id="srcline258">258</a></span><span class="line">                    <span class="mxinfo " id="T1:U1125"><span class="var type1" id="S40T1U1590">PrePointCalEn</span> = <span class="mxinfo " id="T1:U1127">0</span></span>;<span class="mxinfo " id="T1:U1128"><span class="var type1" id="S41T1U1594">PointCalEn</span> = <span class="mxinfo " id="T1:U1130">0</span></span>;<span class="mxinfo " id="T1:U1131"><span class="var type1" id="S61T1U1598">FirstTrigFlg</span> = <span class="mxinfo " id="T1:U1133">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,259" id="srcline259">259</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,260" id="srcline260">260</a></span><span class="line">                <span class="mxinfo " id="T1:U1134"><span class="var type1" id="S13T1U1602">PathTrjFinishFlg</span> = <span class="mxinfo " id="T1:U1136">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,261" id="srcline261">261</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,262" id="srcline262">262</a></span><span class="line">            <span class="mxinfo " id="T1:U1137"><span class="var type1" id="S81T1U1606">theta_rot</span> = <span class="mxinfo " id="T1:U1139">- <span class="var type1" id="S50T1U1608">Pangle_in</span></span></span>;   </span></span>
<span class="srcline"><span class="lineno"><a href="75,263" id="srcline263">263</a></span><span class="line">            <span class="mxinfo " id="T1:U1141"><span class="var type1" id="S70T1U1611">xpositionNex</span> = <span class="mxinfo " id="T1:U1143"><span class="mxinfo " id="T1:U1144"><span class="var type1" id="S90T1U1614">xpositionTemp</span>*<span class="mxinfo " id="T1:U1146">cos(<span class="var type1" id="S81T1U1617">theta_rot</span>)</span></span> + <span class="mxinfo " id="T1:U1148"><span class="var type1" id="S92T1U1619">ypositionTemp</span>*<span class="mxinfo " id="T1:U1150">sin(<span class="var type1" id="S81T1U1622">theta_rot</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,264" id="srcline264">264</a></span><span class="line">            <span class="mxinfo " id="T1:U1152"><span class="var type1" id="S71T1U1625">ypositionNex</span> = <span class="mxinfo " id="T1:U1154"><span class="mxinfo " id="T1:U1155"><span class="var type1" id="S92T1U1628">ypositionTemp</span>*<span class="mxinfo " id="T1:U1157">cos(<span class="var type1" id="S81T1U1631">theta_rot</span>)</span></span> - <span class="mxinfo " id="T1:U1159"><span class="var type1" id="S90T1U1633">xpositionTemp</span>*<span class="mxinfo " id="T1:U1161">sin(<span class="var type1" id="S81T1U1636">theta_rot</span>)</span></span></span></span> ;  </span></span>
<span class="srcline"><span class="lineno"><a href="75,265" id="srcline265">265</a></span><span class="line">            <span class="mxinfo " id="T1:U1163"><span class="var type1" id="S70T1U1639">xpositionNex</span> = <span class="mxinfo " id="T1:U1165"><span class="var type1" id="S70T1U1641">xpositionNex</span> + <span class="var type1" id="S48T1U1642">Px_in</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="75,266" id="srcline266">266</a></span><span class="line">            <span class="mxinfo " id="T1:U1168"><span class="var type1" id="S71T1U1645">ypositionNex</span> = <span class="mxinfo " id="T1:U1170"><span class="var type1" id="S71T1U1647">ypositionNex</span> + <span class="var type1" id="S49T1U1648">Py_in</span></span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="75,267" id="srcline267">267</a></span><span class="line">        <span class="keyword">end</span>        </span></span>
<span class="srcline"><span class="lineno"><a href="75,268" id="srcline268">268</a></span><span class="line">        <span class="comment">%To Cal next point</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,269" id="srcline269">269</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,270" id="srcline270">270</a></span><span class="line"><span class="comment">%         PathTrjFinishFlg = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,271" id="srcline271">271</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,272" id="srcline272">272</a></span><span class="line">    [<span class="var type1" id="S2T10U1653">GCdInfo_Me</span>,<span class="var type1" id="S3T1U1654">GCdxposition</span>,<span class="var type1" id="S4T1U1655">GCdyposition</span>,<span class="var type1" id="S5T1U1656">GCdAx</span>,<span class="var type1" id="S6T1U1657">GCdAy</span>,<span class="var type1" id="S7T1U1658">GCdVx</span>,<span class="var type1" id="S8T1U1659">GCdVy</span>,<span class="var type1" id="S9T1U1660">GCdTheta</span>,<span class="var type1" id="S10T1U1661">GCdxpositionNex</span>,<span class="var type1" id="S11T1U1662">GCdypositionNex</span>] = <span class="fcn" id="F217N11:B1664">CordTransferBackInterSection</span>(<span class="var type1" id="S20T10U1665">Info_Me</span>,<span class="var type1" id="S63T1U1666">xpositionPre</span>,<span class="var type1" id="S64T1U1667">ypositionPre</span>,<span class="var type1" id="S65T1U1668">Ax</span>,<span class="var type1" id="S66T1U1669">Ay</span>,<span class="var type1" id="S67T1U1670">Vx</span>,<span class="var type1" id="S68T1U1671">Vy</span>,<span class="var type1" id="S69T1U1672">Theta</span>,<span class="var type1" id="S70T1U1673">xpositionNex</span>,<span class="var type1" id="S71T1U1674">ypositionNex</span>,<span class="var type1" id="S34T3U1675">PGCdInfo</span>,<span class="var type1" id="S33T1U1676">CurOp</span>,<span class="var type1" id="S62T1U1677">FlagInit</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="75,273" id="srcline273">273</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="75,274" id="srcline274">274</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,275" id="srcline275">275</a></span><span class="line"></span></span>
</pre>
<div class="dead">
<pre class="code">
<span class="srcline"><span class="lineno"><a href="75,276" id="srcline276">276</a></span><span class="line">function quadcosu2val = quadcosu2( ulimit )</span></span>
<span class="srcline"><span class="lineno"><a href="75,277" id="srcline277">277</a></span><span class="line">    <span class="comment">%UNTITLED4 Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,278" id="srcline278">278</a></span><span class="line">    <span class="comment">%   Detailed explanation goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,279" id="srcline279">279</a></span><span class="line">    <span class="comment">% this function is used to calculate the integral of cos(x^2),which is used</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,280" id="srcline280">280</a></span><span class="line">    <span class="comment">% to calculate x position</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,281" id="srcline281">281</a></span><span class="line">    global quadcosu2tbl</span></span>
<span class="srcline"><span class="lineno"><a href="75,282" id="srcline282">282</a></span><span class="line">    index = fix(ulimit/0.005) + 1;</span></span>
<span class="srcline"><span class="lineno"><a href="75,283" id="srcline283">283</a></span><span class="line">    quadcosu2val = quadcosu2tbl(index);</span></span>
<span class="srcline"><span class="lineno"><a href="75,284" id="srcline284">284</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="75,285" id="srcline285">285</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="75,286" id="srcline286">286</a></span><span class="line">function quadsinu2val = quadsinu2( ulimit )</span></span>
<span class="srcline"><span class="lineno"><a href="75,287" id="srcline287">287</a></span><span class="line"><span class="comment">%UNTITLED4 Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,288" id="srcline288">288</a></span><span class="line"><span class="comment">%   Detailed explanation goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,289" id="srcline289">289</a></span><span class="line"><span class="comment">% this function is used to calculate the integral of sin(x^2),which is used</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,290" id="srcline290">290</a></span><span class="line"><span class="comment">% to calculate y position</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,291" id="srcline291">291</a></span><span class="line">    global quadsinu2tbl </span></span>
<span class="srcline"><span class="lineno"><a href="75,292" id="srcline292">292</a></span><span class="line">    index = fix(ulimit/0.005) + 1;</span></span>
<span class="srcline"><span class="lineno"><a href="75,293" id="srcline293">293</a></span><span class="line">    quadsinu2val = quadsinu2tbl(index);</span></span>
<span class="srcline"><span class="lineno"><a href="75,294" id="srcline294">294</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="75,295" id="srcline295">295</a></span><span class="line">function [GCdInfo_Me,GCdxposition,GCdyposition,GCdAx,GCdAy,GCdVx,GCdVy,GCdTheta,GCdxpositionNex,GCdypositionNex] = CordTransferBackInterSection(Info_Me,PGCdxposition,PGCdyposition,PGCdAx,PGCdAy,PGCdVx,PGCdVy,PGCdTheta,PGCdxpositionNex,PGCdypositionNex,PGCdInfo,CurOpGCd,FlagInit)         </span></span>
<span class="srcline"><span class="lineno"><a href="75,296" id="srcline296">296</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,297" id="srcline297">297</a></span><span class="line"><span class="comment">%RoadInfo(1,1) = Info_Me(1);RoadInfo(1,2) = Info_Me(2);RoadInfo(1,3) = Info_Me(6);RoadInfo(1,4) = EgoLaneInfo(2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,298" id="srcline298">298</a></span><span class="line">    persistent CurOpTemp PGCXorig PGCYorig PGCThetaorig</span></span>
<span class="srcline"><span class="lineno"><a href="75,299" id="srcline299">299</a></span><span class="line">    if isempty(CurOpTemp)</span></span>
<span class="srcline"><span class="lineno"><a href="75,300" id="srcline300">300</a></span><span class="line">        CurOpTemp = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="75,301" id="srcline301">301</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="75,302" id="srcline302">302</a></span><span class="line">    if isempty(PGCXorig)</span></span>
<span class="srcline"><span class="lineno"><a href="75,303" id="srcline303">303</a></span><span class="line">        PGCXorig = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="75,304" id="srcline304">304</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="75,305" id="srcline305">305</a></span><span class="line">    if isempty(PGCYorig)</span></span>
<span class="srcline"><span class="lineno"><a href="75,306" id="srcline306">306</a></span><span class="line">        PGCYorig = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="75,307" id="srcline307">307</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="75,308" id="srcline308">308</a></span><span class="line">    if isempty(PGCThetaorig)</span></span>
<span class="srcline"><span class="lineno"><a href="75,309" id="srcline309">309</a></span><span class="line">        PGCThetaorig = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="75,310" id="srcline310">310</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="75,311" id="srcline311">311</a></span><span class="line">    GCdxposition=0;GCdyposition=0;GCdAx=0;GCdAy=0;GCdVx=0;GCdVy=0;GCdTheta=0;GCdxpositionNex=0;GCdypositionNex=0;</span></span>
<span class="srcline"><span class="lineno"><a href="75,312" id="srcline312">312</a></span><span class="line">    GCdInfo_Me = Info_Me;</span></span>
<span class="srcline"><span class="lineno"><a href="75,313" id="srcline313">313</a></span><span class="line"><span class="comment">%     if abs(CurOpTemp - CurOpGCd) &gt;1e-1</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,314" id="srcline314">314</a></span><span class="line"><span class="comment">%         CurOpTemp = CurOpGCd;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,315" id="srcline315">315</a></span><span class="line"><span class="comment">%         if abs(CurOpGCd - 2) &lt; 1e-1</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,316" id="srcline316">316</a></span><span class="line"><span class="comment">%             PGCXorig = -PGCdInfo(1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,317" id="srcline317">317</a></span><span class="line"><span class="comment">%             PGCYorig = -PGCdInfo(2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,318" id="srcline318">318</a></span><span class="line"><span class="comment">%             PGCThetaorig = -PGCdInfo(3);</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,319" id="srcline319">319</a></span><span class="line"><span class="comment">%         else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,320" id="srcline320">320</a></span><span class="line"><span class="comment">%             PGCXorig = 0;PGCThetaorig = 0;PGCYorig = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,321" id="srcline321">321</a></span><span class="line"><span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,322" id="srcline322">322</a></span><span class="line"><span class="comment">%     else</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,323" id="srcline323">323</a></span><span class="line"><span class="comment">%     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="75,324" id="srcline324">324</a></span><span class="line">    if FlagInit &gt; 0.5</span></span>
<span class="srcline"><span class="lineno"><a href="75,325" id="srcline325">325</a></span><span class="line">        PGCXorig = -PGCdInfo(1);</span></span>
<span class="srcline"><span class="lineno"><a href="75,326" id="srcline326">326</a></span><span class="line">        PGCYorig = -PGCdInfo(2);</span></span>
<span class="srcline"><span class="lineno"><a href="75,327" id="srcline327">327</a></span><span class="line">        PGCThetaorig = -PGCdInfo(3);</span></span>
<span class="srcline"><span class="lineno"><a href="75,328" id="srcline328">328</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="75,329" id="srcline329">329</a></span><span class="line">    GCdxpositionTemp = PGCdxposition * cos(PGCThetaorig) + PGCdyposition * sin(PGCThetaorig);</span></span>
<span class="srcline"><span class="lineno"><a href="75,330" id="srcline330">330</a></span><span class="line">    GCdypositionTemp = PGCdyposition * cos(PGCThetaorig) - PGCdxposition * sin(PGCThetaorig);    </span></span>
<span class="srcline"><span class="lineno"><a href="75,331" id="srcline331">331</a></span><span class="line">    GCdAx = PGCdAx * cos(PGCThetaorig) + PGCdAy * sin(PGCThetaorig);</span></span>
<span class="srcline"><span class="lineno"><a href="75,332" id="srcline332">332</a></span><span class="line">    GCdAy = PGCdAy * cos(PGCThetaorig) - PGCdAx * sin(PGCThetaorig);</span></span>
<span class="srcline"><span class="lineno"><a href="75,333" id="srcline333">333</a></span><span class="line">    GCdVx = PGCdVx * cos(PGCThetaorig) + PGCdVy * sin(PGCThetaorig);</span></span>
<span class="srcline"><span class="lineno"><a href="75,334" id="srcline334">334</a></span><span class="line">    GCdVy = PGCdVy * cos(PGCThetaorig) - PGCdVx * sin(PGCThetaorig);</span></span>
<span class="srcline"><span class="lineno"><a href="75,335" id="srcline335">335</a></span><span class="line">    GCdxposition = GCdxpositionTemp - PGCXorig;</span></span>
<span class="srcline"><span class="lineno"><a href="75,336" id="srcline336">336</a></span><span class="line">    GCdyposition = GCdypositionTemp - PGCYorig;    </span></span>
<span class="srcline"><span class="lineno"><a href="75,337" id="srcline337">337</a></span><span class="line">    GCdTheta = PGCdTheta - PGCThetaorig;</span></span>
<span class="srcline"><span class="lineno"><a href="75,338" id="srcline338">338</a></span><span class="line">    GCdxpositionNexTemp = PGCdxpositionNex * cos(PGCThetaorig) + PGCdypositionNex * sin(PGCThetaorig);</span></span>
<span class="srcline"><span class="lineno"><a href="75,339" id="srcline339">339</a></span><span class="line">    GCdypositionNexTemp = PGCdypositionNex * cos(PGCThetaorig) - PGCdxpositionNex * sin(PGCThetaorig);    </span></span>
<span class="srcline"><span class="lineno"><a href="75,340" id="srcline340">340</a></span><span class="line">    GCdxpositionNex = GCdxpositionNexTemp - PGCXorig;</span></span>
<span class="srcline"><span class="lineno"><a href="75,341" id="srcline341">341</a></span><span class="line">    GCdypositionNex = GCdypositionNexTemp - PGCYorig;  </span></span>
<span class="srcline"><span class="lineno"><a href="75,342" id="srcline342">342</a></span><span class="line">    GCdInfo_MexTemp = Info_Me(1) * cos(PGCThetaorig) + Info_Me(2) * sin(PGCThetaorig);</span></span>
<span class="srcline"><span class="lineno"><a href="75,343" id="srcline343">343</a></span><span class="line">    GCdInfo_MeyTemp = Info_Me(2) * cos(PGCThetaorig) - Info_Me(1) * sin(PGCThetaorig);</span></span>
<span class="srcline"><span class="lineno"><a href="75,344" id="srcline344">344</a></span><span class="line">    GCdInfo_Me(1) = GCdInfo_MexTemp - PGCXorig;</span></span>
<span class="srcline"><span class="lineno"><a href="75,345" id="srcline345">345</a></span><span class="line">    GCdInfo_Me(2) = GCdInfo_MeyTemp - PGCYorig;        </span></span>
<span class="srcline"><span class="lineno"><a href="75,346" id="srcline346">346</a></span><span class="line">    GCdInfo_Me(6) = GCdInfo_Me(6) - PGCThetaorig;</span></span>
<span class="srcline"><span class="lineno"><a href="75,347" id="srcline347">347</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="75,348" id="srcline348">348</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="75,349" id="srcline349">349</a></span><span class="line"> </span></span>
</pre>
</div>
