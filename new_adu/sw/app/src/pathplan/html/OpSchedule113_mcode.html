<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="52,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">Curoperation</span>,<span class="var type1" id="S3T1U4">OperationLongDislimit</span>,<span class="var type1" id="S4T11U5">RoadInfo</span>,<span class="var type1" id="S5T1U6">SpeedLimit</span>,<span class="var type1" id="S6T1U7">LCOPCnt</span>,<span class="var type1" id="S7T10U8">Info_MeRel</span>,<span class="var type1" id="S8T1U9">InLaneLCFlgOut</span>,<span class="var type1" id="S9T10U10">PreInfo_MeRel</span>,<span class="var type1" id="S10T1U11">OpSts</span>,<span class="var type1" id="S11T11U12">RoadInfo2</span>,<span class="var type1" id="S12T1U13">LCShutDwn2</span>] = OpSchedule(<span class="var type1" id="S13T6U16">Navi_InfoTurn</span>,<span class="var type1" id="S14T4U17">Line_ShapeInfo</span>,<span class="var type1" id="S15T3U18">Lane_NumInfo</span>,<span class="var type1" id="S16T35U19">Info_Me</span>,<span class="var type1" id="S17T1U20">TargetPosition</span>,<span class="var type1" id="S18T1U21">InLaneLCFlg</span>,<span class="var type1" id="S19T1U22">ObjTrig</span>,<span class="var type1" id="S20T1U23">LCTrigSuccess</span>,<span class="var type1" id="S21T10U24">Info_Lo</span>,<span class="var type1" id="S22T1U25">TrigStart</span>,<span class="var type1" id="S23T1U26">SpeedLimitOp</span>,<span class="var type1" id="S24T1U27">SpeedLimitIdle</span>,<span class="var type1" id="S25T1U28">LCDelayTime</span>,<span class="var type1" id="S26T1U29">TurnTrigStartDis</span>,<span class="var type1" id="S27T1U30">TurnFrontLCFobDis</span>,<span class="var type1" id="S28T1U31">OperationFinishFlgIn</span>,<span class="var type2" id="S29T1V1U32">AngTol</span>,<span class="var type1" id="S30T1U33">LCStartFlg</span>,<span class="var type1" id="S31T1U34">LCEnbSts</span>,<span class="var type1" id="S32T1U35">TunEnbSts</span>,<span class="var type1" id="S33T1U36">LCForceShudown</span>,<span class="var type1" id="S34T1U37">TunForceShudown</span>,<span class="var type2" id="S35T1V2U38">ByPassTurnFinsJudge</span>,<span class="var type1" id="S36T7U39">End</span>,<span class="var type1" id="S37T1U40">LCReleaseDis</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,2" id="srcline2">  2</a></span><span class="line">    <span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,3" id="srcline3">  3</a></span><span class="line">    <span class="comment">%OperationFinishFlg 0 NA 1 Success 2 FailtoStart</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,4" id="srcline4">  4</a></span><span class="line">    <span class="comment">% First Judge whether a LC needs to be done.</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,5" id="srcline5">  5</a></span><span class="line">    <span class="keyword">persistent</span> <span class="var type1" id="S38T1U42">CurOp</span> <span class="var type1" id="S39T1U43">NexLCDelayCnt</span> <span class="var type1" id="S40T1U44">PTargetLaneNum</span> <span class="var type1" id="S41T3U45">EgoCordOrig</span> <span class="var type1" id="S42T1U46">PInLaneLCFlg</span> <span class="var type1" id="S43T1U47">PLCOPCnt</span> <span class="var type1" id="S44T1U48">PInLaneLCFlgInt</span> <span class="var type1" id="S45T1U49">PFailRestoreCn</span> <span class="var type1" id="S46T11U50">PRoadInfo</span> <span class="var type1" id="S47T6U51">PNavi_InfoTurn</span> <span class="var type1" id="S48T3U52">PreEgoCordOrig</span> <span class="var type1" id="S49T6U53">PNavi_InfoTurn2</span> <span class="var type1" id="S50T1U54">PTargetLaneNum2</span> <span class="var type1" id="S51T1U55">PreOp</span>  <span class="var type1" id="S52T1U56">PCentTargetOffset</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,6" id="srcline6">  6</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U52">isempty(<span class="var type0" id="S38T0U61">CurOp</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,7" id="srcline7">  7</a></span><span class="line">        <span class="mxinfo " id="T1:U53"><span class="var type1" id="S38T1U64">CurOp</span> = <span class="mxinfo " id="T1:U55">0</span></span>;<span class="mxinfo " id="T1:U56"><span class="var type1" id="S39T1U68">NexLCDelayCnt</span> = <span class="mxinfo " id="T1:U58">0</span></span>;<span class="mxinfo " id="T3:U59"><span class="var type1" id="S41T3U72">EgoCordOrig</span> = <span class="mxinfo " id="T3:U61">zeros(<span class="mxinfo " id="T1:U62">1</span>,<span class="mxinfo " id="T1:U63">3</span>)</span></span>;<span class="mxinfo " id="T3:U64"><span class="var type1" id="S48T3U79">PreEgoCordOrig</span> = <span class="var type1" id="S41T3U80">EgoCordOrig</span></span>;<span class="mxinfo " id="T1:U67"><span class="var type1" id="S42T1U83">PInLaneLCFlg</span> = <span class="mxinfo " id="T1:U69">0</span></span>;<span class="mxinfo " id="T1:U70"><span class="var type1" id="S43T1U87">PLCOPCnt</span> = <span class="mxinfo " id="T1:U72">0</span></span>;<span class="mxinfo " id="T1:U73"><span class="var type1" id="S40T1U91">PTargetLaneNum</span> = <span class="mxinfo " id="T1:U75">1</span></span>;<span class="mxinfo " id="T1:U76"><span class="var type1" id="S44T1U95">PInLaneLCFlgInt</span> = <span class="mxinfo " id="T1:U78">0</span></span>; <span class="mxinfo " id="T1:U79"><span class="var type1" id="S45T1U99">PFailRestoreCn</span> = <span class="mxinfo " id="T1:U81">0</span></span>; <span class="mxinfo " id="T11:U82"><span class="var type1" id="S46T11U103">PRoadInfo</span> = <span class="mxinfo " id="T11:U84">zeros(<span class="mxinfo " id="T1:U85">2</span>,<span class="mxinfo " id="T1:U86">4</span>)</span></span>;<span class="mxinfo " id="T6:U87"><span class="var type1" id="S47T6U110">PNavi_InfoTurn</span> = <span class="mxinfo " id="T6:U89">zeros(<span class="mxinfo " id="T1:U90">4</span>,<span class="mxinfo " id="T1:U91">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,8" id="srcline8">  8</a></span><span class="line">        <span class="mxinfo " id="T6:U92"><span class="var type1" id="S49T6U117">PNavi_InfoTurn2</span> = <span class="mxinfo " id="T6:U94">zeros(<span class="mxinfo " id="T1:U95">4</span>,<span class="mxinfo " id="T1:U96">7</span>)</span></span>;<span class="mxinfo " id="T1:U97"><span class="var type1" id="S50T1U124">PTargetLaneNum2</span> = <span class="mxinfo " id="T1:U99">1</span></span>;<span class="mxinfo " id="T1:U100"><span class="var type1" id="S51T1U128">PreOp</span> = <span class="mxinfo " id="T1:U102">0</span></span>;<span class="mxinfo " id="T1:U103"><span class="var type1" id="S52T1U132">PCentTargetOffset</span>= <span class="mxinfo " id="T1:U105">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,9" id="srcline9">  9</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,10" id="srcline10"> 10</a></span><span class="line">    <span class="mxinfo " id="T1:U106"><span class="var type1" id="S55T1U136">LCOverDelay</span> = <span class="mxinfo " id="T1:U108">1</span></span>;<span class="mxinfo " id="T1:U109"><span class="var type1" id="S10T1U140">OpSts</span> = <span class="mxinfo " id="T1:U111">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,11" id="srcline11"> 11</a></span><span class="line">    <span class="comment">% Use the lane info to judge whether previous operation is OK</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,12" id="srcline12"> 12</a></span><span class="line">    <span class="mxinfo " id="T1:U112"><span class="var type1" id="S5T1U144">SpeedLimit</span> = <span class="var type1" id="S24T1U145">SpeedLimitIdle</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,13" id="srcline13"> 13</a></span><span class="line">    <span class="mxinfo " id="T1:U115"><span class="var type1" id="S56T1U148">EgoLaneNum</span> = <span class="mxinfo " id="T1:U117"><span class="var type1" id="S15T3U150">Lane_NumInfo</span>(<span class="mxinfo " id="T9:U119">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,14" id="srcline14"> 14</a></span><span class="line">    <span class="mxinfo " id="T1:U120"><span class="var type1" id="S57T1U154">TargetLaneNum</span> = <span class="mxinfo " id="T1:U122"><span class="var type1" id="S15T3U156">Lane_NumInfo</span>(<span class="mxinfo " id="T9:U124">3</span>)</span></span>;       </span></span>
<span class="srcline"><span class="lineno"><a href="52,15" id="srcline15"> 15</a></span><span class="line">    <span class="mxinfo " id="T1:U125"><span class="var type1" id="S58T1U160">EgoHeadAng</span> = <span class="mxinfo " id="T1:U127"><span class="var type1" id="S16T35U162">Info_Me</span>(<span class="mxinfo " id="T9:U129">6</span>)</span></span>; <span class="mxinfo " id="T1:U130"><span class="var type1" id="S8T1U166">InLaneLCFlgOut</span> = <span class="var type1" id="S42T1U167">PInLaneLCFlg</span></span>;<span class="mxinfo " id="T10:U133"><span class="var type1" id="S7T10U170">Info_MeRel</span> = <span class="mxinfo " id="T10:U135">zeros(<span class="mxinfo " id="T1:U136">1</span>,<span class="mxinfo " id="T1:U137">6</span>)</span></span>; <span class="mxinfo " id="T1:U138"><span class="var type1" id="S59T1U177">FailSilentCnt</span> = <span class="mxinfo " id="T1:U140">100</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,16" id="srcline16"> 16</a></span><span class="line">    <span class="mxinfo " id="T1:U141"><span class="var type1" id="S2T1U181">Curoperation</span> = <span class="mxinfo " id="T1:U143">0</span></span>;<span class="mxinfo " id="T1:U144"><span class="var type1" id="S3T1U185">OperationLongDislimit</span> = <span class="mxinfo " id="T1:U146">255</span></span>;<span class="mxinfo " id="T11:U147"><span class="var type1" id="S4T11U189">RoadInfo</span> = <span class="mxinfo " id="T11:U149">zeros(<span class="mxinfo " id="T1:U150">2</span>,<span class="mxinfo " id="T1:U151">4</span>)</span></span>;<span class="mxinfo " id="T1:U152"><span class="var type1" id="S6T1U196">LCOPCnt</span> = <span class="mxinfo " id="T1:U154">1</span></span>;<span class="mxinfo " id="T10:U155"><span class="mxinfo " id="T10:U156"><span class="var type1" id="S7T10U201">Info_MeRel</span>(<span class="mxinfo " id="T10:U158"><span class="mxinfo " id="T1:U159">1</span>:<span class="mxinfo " id="T1:U160">6</span></span>)</span> = <span class="mxinfo " id="T10:U161"><span class="var type1" id="S16T35U206">Info_Me</span>(<span class="mxinfo " id="T10:U163"><span class="mxinfo " id="T1:U164">1</span>:<span class="mxinfo " id="T1:U165">6</span></span>)</span></span>;<span class="mxinfo " id="T10:U166"><span class="var type1" id="S9T10U212">PreInfo_MeRel</span> = <span class="var type1" id="S7T10U213">Info_MeRel</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,17" id="srcline17"> 17</a></span><span class="line">    <span class="mxinfo " id="T11:U169"><span class="var type1" id="S11T11U216">RoadInfo2</span> = <span class="mxinfo " id="T11:U171">zeros(<span class="mxinfo " id="T1:U172">2</span>,<span class="mxinfo " id="T1:U173">4</span>)</span></span>;<span class="mxinfo " id="T1:U174"><span class="mxinfo " id="T1:U175"><span class="var type1" id="S11T11U224">RoadInfo2</span>(<span class="mxinfo " id="T9:U177">2</span>,<span class="mxinfo " id="T9:U178">2</span>)</span> = <span class="mxinfo " id="T1:U179">255</span></span>;<span class="mxinfo " id="T1:U180"><span class="var type1" id="S12T1U230">LCShutDwn2</span> = <span class="mxinfo " id="T1:U182">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,18" id="srcline18"> 18</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U183"><span class="var type1" id="S22T1U235">TrigStart</span>&gt;<span class="mxinfo " id="T1:U185">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,19" id="srcline19"> 19</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U186"><span class="var type1" id="S39T1U240">NexLCDelayCnt</span> &gt;= <span class="mxinfo " id="T1:U188">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,20" id="srcline20"> 20</a></span><span class="line">            <span class="mxinfo " id="T1:U189"><span class="var type1" id="S39T1U244">NexLCDelayCnt</span> = <span class="mxinfo " id="T1:U191"><span class="var type1" id="S39T1U246">NexLCDelayCnt</span> - <span class="mxinfo " id="T1:U193">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,21" id="srcline21"> 21</a></span><span class="line">            <span class="mxinfo " id="T1:U194"><span class="var type1" id="S55T1U250">LCOverDelay</span> = <span class="mxinfo " id="T1:U196">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,22" id="srcline22"> 22</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,23" id="srcline23"> 23</a></span><span class="line">            <span class="mxinfo " id="T1:U197"><span class="var type1" id="S55T1U255">LCOverDelay</span> = <span class="mxinfo " id="T1:U199">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,24" id="srcline24"> 24</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,25" id="srcline25"> 25</a></span><span class="line">        <span class="mxinfo " id="T1:U200"><span class="var type1" id="S60T1U259">EgoPosTagFlg</span> = <span class="mxinfo " id="T1:U202">0</span></span>;        </span></span>
<span class="srcline"><span class="lineno"><a href="52,26" id="srcline26"> 26</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U203"><span class="var type1" id="S45T1U264">PFailRestoreCn</span>&gt;<span class="mxinfo " id="T1:U205">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,27" id="srcline27"> 27</a></span><span class="line">            <span class="mxinfo " id="T1:U206"><span class="var type1" id="S45T1U268">PFailRestoreCn</span> = <span class="mxinfo " id="T1:U208"><span class="var type1" id="S45T1U270">PFailRestoreCn</span> -<span class="mxinfo " id="T1:U210">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,28" id="srcline28"> 28</a></span><span class="line">        <span class="keyword">else</span>            </span></span>
<span class="srcline"><span class="lineno"><a href="52,29" id="srcline29"> 29</a></span><span class="line">        <span class="keyword">end</span>        </span></span>
<span class="srcline"><span class="lineno"><a href="52,30" id="srcline30"> 30</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U211"><span class="var type1" id="S38T1U276">CurOp</span>&lt;<span class="mxinfo " id="T1:U213">0.5</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="52,31" id="srcline31"> 31</a></span><span class="line">            <span class="comment">%Find an operation to do </span></span></span>
<span class="srcline"><span class="lineno"><a href="52,32" id="srcline32"> 32</a></span><span class="line">            <span class="keyword">if</span> (<span class="mxinfo " id="T8:U214"><span class="mxinfo " id="T1:U215"><span class="var type1" id="S13T6U285">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U217">1</span>,<span class="mxinfo " id="T9:U218">2</span>)</span>&gt;<span class="mxinfo " id="T1:U219">0.5</span></span>) &amp;&amp; (<span class="mxinfo " id="T8:U220"><span class="mxinfo " id="T1:U221"><span class="var type1" id="S13T6U292">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U223">2</span>,<span class="mxinfo " id="T9:U224">2</span>)</span>&gt;<span class="mxinfo " id="T1:U225">0.5</span></span>) &amp;&amp; <span class="mxinfo " id="T8:U226"><span class="var type1" id="S32T1U297">TunEnbSts</span> &gt; <span class="mxinfo " id="T1:U228">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,33" id="srcline33"> 33</a></span><span class="line">                <span class="mxinfo " id="T3:U229"><span class="var type1" id="S61T3U301">AbsCord_Ego</span> = <span class="mxinfo " id="T3:U231">[<span class="mxinfo " id="T1:U232"><span class="var type1" id="S16T35U305">Info_Me</span>(<span class="mxinfo " id="T9:U234">1</span>)</span>,<span class="mxinfo " id="T1:U235"><span class="var type1" id="S16T35U308">Info_Me</span>(<span class="mxinfo " id="T9:U237">2</span>)</span>,<span class="mxinfo " id="T1:U238"><span class="var type1" id="S16T35U311">Info_Me</span>(<span class="mxinfo " id="T9:U240">6</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,34" id="srcline34"> 34</a></span><span class="line">                <span class="mxinfo " id="T3:U241"><span class="var type1" id="S62T3U315">AbsCord_Trn</span> = <span class="mxinfo " id="T3:U243">[<span class="mxinfo " id="T1:U244"><span class="var type1" id="S13T6U319">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U246">1</span>,<span class="mxinfo " id="T9:U247">3</span>)</span>,<span class="mxinfo " id="T1:U248"><span class="var type1" id="S13T6U323">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U250">1</span>,<span class="mxinfo " id="T9:U251">4</span>)</span>,<span class="mxinfo " id="T1:U252"><span class="var type1" id="S13T6U327">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U254">1</span>,<span class="mxinfo " id="T9:U255">7</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,35" id="srcline35"> 35</a></span><span class="line">                <span class="mxinfo " id="T1:U256"><span class="var type1" id="S63T1U332">PassFlgIn</span> = <span class="mxinfo " id="T1:U258"><span class="fcn" id="F105N42:B334">PassJudgement</span>(<span class="var type1" id="S61T3U335">AbsCord_Ego</span>,<span class="var type1" id="S62T3U336">AbsCord_Trn</span>)</span></span>;          </span></span>
<span class="srcline"><span class="lineno"><a href="52,36" id="srcline36"> 36</a></span><span class="line">                <span class="mxinfo " id="T1:U261"><span class="var type1" id="S65T1U339">Dis2TrnIn</span> = <span class="mxinfo " id="T1:U263">sqrt(<span class="mxinfo " id="T1:U264"><span class="mxinfo " id="T1:U265">(<span class="mxinfo " id="T1:U266"><span class="mxinfo " id="T1:U267"><span class="var type1" id="S61T3U347">AbsCord_Ego</span>(<span class="mxinfo " id="T9:U269">1</span>)</span> - <span class="mxinfo " id="T1:U270"><span class="var type1" id="S62T3U350">AbsCord_Trn</span>(<span class="mxinfo " id="T1:U272">1</span>)</span></span>)^2</span>+<span class="mxinfo " id="T1:U273">(<span class="mxinfo " id="T1:U274"><span class="mxinfo " id="T1:U275"><span class="var type1" id="S61T3U357">AbsCord_Ego</span>(<span class="mxinfo " id="T9:U277">2</span>)</span> - <span class="mxinfo " id="T1:U278"><span class="var type1" id="S62T3U360">AbsCord_Trn</span>(<span class="mxinfo " id="T1:U280">2</span>)</span></span>)^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,37" id="srcline37"> 37</a></span><span class="line"><span class="comment">%                 AbsCord_Ego = [Info_Me(1),Info_Me(2),Info_Me(6)];</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,38" id="srcline38"> 38</a></span><span class="line">                <span class="mxinfo " id="T3:U281"><span class="var type1" id="S62T3U365">AbsCord_Trn</span> = <span class="mxinfo " id="T3:U283">[<span class="mxinfo " id="T1:U284"><span class="var type1" id="S13T6U369">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U286">2</span>,<span class="mxinfo " id="T9:U287">3</span>)</span>,<span class="mxinfo " id="T1:U288"><span class="var type1" id="S13T6U373">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U290">2</span>,<span class="mxinfo " id="T9:U291">4</span>)</span>,<span class="mxinfo " id="T1:U292"><span class="var type1" id="S13T6U377">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U294">2</span>,<span class="mxinfo " id="T9:U295">7</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,39" id="srcline39"> 39</a></span><span class="line">                <span class="mxinfo " id="T1:U296"><span class="var type1" id="S67T1U382">PassFlgOut</span> = <span class="mxinfo " id="T1:U298"><span class="fcn" id="F105N42:B384">PassJudgement</span>(<span class="var type1" id="S61T3U385">AbsCord_Ego</span>,<span class="var type1" id="S62T3U386">AbsCord_Trn</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,40" id="srcline40"> 40</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T8:U301"><span class="mxinfo " id="T1:U302"><span class="var type1" id="S36T7U391">End</span>(<span class="mxinfo " id="T9:U304">4</span>)</span>&gt;<span class="mxinfo " id="T1:U305">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,41" id="srcline41"> 41</a></span><span class="line">                    <span class="mxinfo " id="T1:U306"><span class="var type1" id="S68T1U396">EndOffset</span> = <span class="mxinfo " id="T1:U308"><span class="var type1" id="S36T7U398">End</span>(<span class="mxinfo " id="T1:U310">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,42" id="srcline42"> 42</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,43" id="srcline43"> 43</a></span><span class="line">                    <span class="mxinfo " id="T1:U311"><span class="var type1" id="S68T1U403">EndOffset</span> = <span class="mxinfo " id="T1:U313"><span class="mxinfo " id="T1:U314"><span class="var type1" id="S16T35U406">Info_Me</span>(<span class="mxinfo " id="T1:U316">7</span>)</span> + <span class="mxinfo " id="T1:U317">255</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,44" id="srcline44"> 44</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,45" id="srcline45"> 45</a></span><span class="line">                <span class="keyword">if</span> ((<span class="mxinfo " id="T8:U318"><span class="mxinfo " id="T1:U319"><span class="var type1" id="S16T35U419">Info_Me</span>(<span class="mxinfo " id="T9:U321">7</span>)</span> &gt; (<span class="mxinfo " id="T1:U322"><span class="mxinfo " id="T1:U323"><span class="var type1" id="S13T6U424">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U325">1</span>,<span class="mxinfo " id="T1:U326">1</span>)</span>-<span class="var type1" id="S26T1U427">TurnTrigStartDis</span></span>)</span>)||(<span class="mxinfo " id="T8:U328"><span class="var type1" id="S63T1U431">PassFlgIn</span>&gt;<span class="mxinfo " id="T1:U330">0.5</span></span> &amp;&amp; <span class="mxinfo " id="T8:U331"><span class="var type1" id="S65T1U434">Dis2TrnIn</span> &lt; <span class="mxinfo " id="T1:U333">10</span></span>))&amp;&amp;(<span class="mxinfo " id="T8:U334"><span class="var type1" id="S67T1U438">PassFlgOut</span>&lt;<span class="mxinfo " id="T1:U336">0.5</span></span>)&amp;&amp;(<span class="mxinfo " id="T8:U337"><span class="mxinfo " id="T1:U338"><span class="var type1" id="S16T35U443">Info_Me</span>(<span class="mxinfo " id="T9:U340">7</span>)</span> &lt; <span class="mxinfo " id="T1:U341">min(<span class="mxinfo " id="T33:U342">[<span class="mxinfo " id="T1:U343"><span class="mxinfo " id="T1:U344"><span class="var type1" id="S13T6U451">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U346">2</span>,<span class="mxinfo " id="T9:U347">1</span>)</span>-<span class="mxinfo " id="T1:U348">10</span></span>,<span class="mxinfo " id="T1:U349"><span class="mxinfo " id="T1:U350"><span class="var type1" id="S13T6U457">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U352">1</span>,<span class="mxinfo " id="T9:U353">1</span>)</span>+<span class="mxinfo " id="T1:U354">10</span></span>]</span>)</span></span>)&amp;&amp;(<span class="mxinfo " id="T8:U355"><span class="var type1" id="S68T1U463">EndOffset</span>&gt;<span class="mxinfo " id="T1:U357"><span class="mxinfo " id="T1:U358"><span class="var type1" id="S13T6U466">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U360">2</span>,<span class="mxinfo " id="T1:U361">1</span>)</span>+<span class="var type1" id="S27T1U469">TurnFrontLCFobDis</span></span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,46" id="srcline46"> 46</a></span><span class="line">                    <span class="mxinfo " id="T1:U363"><span class="var type1" id="S38T1U472">CurOp</span> = <span class="mxinfo " id="T1:U365">1</span></span>;                    </span></span>
<span class="srcline"><span class="lineno"><a href="52,47" id="srcline47"> 47</a></span><span class="line">        <span class="comment">%             RoadInfo = [EndCentX,EndCentY,LaneAngle,LaneWidth];</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,48" id="srcline48"> 48</a></span><span class="line">                    <span class="mxinfo " id="T11:U366"><span class="var type1" id="S4T11U476">RoadInfo</span> = <span class="mxinfo " id="T11:U368"><span class="fcn" id="F106N44:B478">RoadInfoExtractTr</span>(<span class="var type1" id="S13T6U479">Navi_InfoTurn</span>,<span class="var type1" id="S16T35U480">Info_Me</span>)</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="52,49" id="srcline49"> 49</a></span><span class="line">                    <span class="comment">%Trans into ego cordition</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,50" id="srcline50"> 50</a></span><span class="line">                    <span class="mxinfo " id="T1:U371"><span class="var type1" id="S60T1U483">EgoPosTagFlg</span> = <span class="mxinfo " id="T1:U373">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,51" id="srcline51"> 51</a></span><span class="line">                    <span class="mxinfo " id="T11:U374"><span class="var type1" id="S46T11U487">PRoadInfo</span> = <span class="var type1" id="S4T11U488">RoadInfo</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,52" id="srcline52"> 52</a></span><span class="line">                    <span class="mxinfo " id="T6:U377"><span class="var type1" id="S47T6U491">PNavi_InfoTurn</span> = <span class="var type1" id="S13T6U492">Navi_InfoTurn</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,53" id="srcline53"> 53</a></span><span class="line">                    <span class="mxinfo " id="T6:U380"><span class="var type1" id="S49T6U495">PNavi_InfoTurn2</span> = <span class="var type1" id="S47T6U496">PNavi_InfoTurn</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,54" id="srcline54"> 54</a></span><span class="line">                    <span class="mxinfo " id="T1:U383"><span class="var type1" id="S51T1U499">PreOp</span> = <span class="mxinfo " id="T1:U385">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,55" id="srcline55"> 55</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,56" id="srcline56"> 56</a></span><span class="line">                <span class="mxinfo " id="T1:U386"><span class="var type1" id="S71T1U503">LCFobOffset</span> = (<span class="mxinfo " id="T1:U388"><span class="mxinfo " id="T1:U389"><span class="var type1" id="S13T6U507">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U391">1</span>,<span class="mxinfo " id="T1:U392">1</span>)</span>-<span class="var type1" id="S27T1U510">TurnFrontLCFobDis</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,57" id="srcline57"> 57</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,58" id="srcline58"> 58</a></span><span class="line">                <span class="keyword">if</span> (<span class="mxinfo " id="T8:U394"><span class="mxinfo " id="T1:U395"><span class="var type1" id="S13T6U517">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U397">1</span>,<span class="mxinfo " id="T9:U398">2</span>)</span>&gt;<span class="mxinfo " id="T1:U399">0.5</span></span>) </span></span>
<span class="srcline"><span class="lineno"><a href="52,59" id="srcline59"> 59</a></span><span class="line">                    <span class="mxinfo " id="T1:U400"><span class="var type1" id="S71T1U523">LCFobOffset</span> = (<span class="mxinfo " id="T1:U402"><span class="mxinfo " id="T1:U403"><span class="var type1" id="S13T6U527">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U405">1</span>,<span class="mxinfo " id="T1:U406">1</span>)</span>-<span class="var type1" id="S27T1U530">TurnFrontLCFobDis</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,60" id="srcline60"> 60</a></span><span class="line">                <span class="keyword">elseif</span> (<span class="mxinfo " id="T8:U408"><span class="mxinfo " id="T1:U409"><span class="var type1" id="S13T6U535">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U411">2</span>,<span class="mxinfo " id="T9:U412">2</span>)</span>&gt;<span class="mxinfo " id="T1:U413">0.5</span></span>) </span></span>
<span class="srcline"><span class="lineno"><a href="52,61" id="srcline61"> 61</a></span><span class="line">                    <span class="mxinfo " id="T1:U414"><span class="var type1" id="S71T1U541">LCFobOffset</span> = (<span class="mxinfo " id="T1:U416"><span class="mxinfo " id="T1:U417"><span class="mxinfo " id="T1:U418"><span class="var type1" id="S13T6U546">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U420">2</span>,<span class="mxinfo " id="T1:U421">1</span>)</span>-<span class="var type1" id="S27T1U549">TurnFrontLCFobDis</span></span>-<span class="mxinfo " id="T1:U423">30</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,62" id="srcline62"> 62</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,63" id="srcline63"> 63</a></span><span class="line">                    <span class="mxinfo " id="T1:U424"><span class="var type1" id="S71T1U554">LCFobOffset</span> = <span class="mxinfo " id="T1:U426"><span class="mxinfo " id="T1:U427"><span class="var type1" id="S16T35U557">Info_Me</span>(<span class="mxinfo " id="T1:U429">7</span>)</span>+<span class="mxinfo " id="T1:U430">255</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,64" id="srcline64"> 64</a></span><span class="line">                <span class="keyword">end</span>                </span></span>
<span class="srcline"><span class="lineno"><a href="52,65" id="srcline65"> 65</a></span><span class="line">                <span class="keyword">if</span> (<span class="mxinfo " id="T8:U431"><span class="mxinfo " id="T1:U432"><span class="var type1" id="S13T6U566">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U434">1</span>,<span class="mxinfo " id="T9:U435">2</span>)</span>&gt;<span class="mxinfo " id="T1:U436">0.5</span></span>) &amp;&amp; (<span class="mxinfo " id="T8:U437"><span class="mxinfo " id="T1:U438"><span class="var type1" id="S13T6U573">Navi_InfoTurn</span>(<span class="mxinfo " id="T9:U440">2</span>,<span class="mxinfo " id="T9:U441">2</span>)</span>&gt;<span class="mxinfo " id="T1:U442">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,66" id="srcline66"> 66</a></span><span class="line">                   <span class="keyword">if</span> <span class="mxinfo " id="T8:U443"><span class="mxinfo " id="T1:U444"><span class="var type1" id="S16T35U581">Info_Me</span>(<span class="mxinfo " id="T9:U446">7</span>)</span> &gt; (<span class="mxinfo " id="T1:U447"><span class="mxinfo " id="T1:U448"><span class="var type1" id="S13T6U586">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U450">1</span>,<span class="mxinfo " id="T1:U451">1</span>)</span> - <span class="var type1" id="S37T1U589">LCReleaseDis</span></span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,67" id="srcline67"> 67</a></span><span class="line">                        <span class="mxinfo " id="T1:U453"><span class="var type1" id="S12T1U592">LCShutDwn2</span> = <span class="mxinfo " id="T1:U455">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,68" id="srcline68"> 68</a></span><span class="line">                   <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,69" id="srcline69"> 69</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,70" id="srcline70"> 70</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,71" id="srcline71"> 71</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U456"><span class="mxinfo " id="T1:U457"><span class="var type1" id="S36T7U598">End</span>(<span class="mxinfo " id="T9:U459">4</span>)</span>&gt;<span class="mxinfo " id="T1:U460">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,72" id="srcline72"> 72</a></span><span class="line">                <span class="comment">% Consider NaviEnd Just as Turn</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,73" id="srcline73"> 73</a></span><span class="line">                <span class="mxinfo " id="T1:U461"><span class="var type1" id="S72T1U603">NaviEndOffset</span> = <span class="mxinfo " id="T1:U463"><span class="mxinfo " id="T1:U464"><span class="var type1" id="S36T7U606">End</span>(<span class="mxinfo " id="T1:U466">1</span>)</span> - <span class="var type1" id="S27T1U608">TurnFrontLCFobDis</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,74" id="srcline74"> 74</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,75" id="srcline75"> 75</a></span><span class="line">                <span class="mxinfo " id="T1:U468"><span class="var type1" id="S72T1U612">NaviEndOffset</span> = <span class="mxinfo " id="T1:U470"><span class="mxinfo " id="T1:U471"><span class="var type1" id="S16T35U615">Info_Me</span>(<span class="mxinfo " id="T1:U473">7</span>)</span> + <span class="mxinfo " id="T1:U474">255</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,76" id="srcline76"> 76</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,77" id="srcline77"> 77</a></span><span class="line">            <span class="keyword">if</span> (<span class="mxinfo " id="T8:U475"><span class="mxinfo " id="T1:U476"><span class="var type1" id="S16T35U627">Info_Me</span>(<span class="mxinfo " id="T9:U478">7</span>)</span> &lt; <span class="var type1" id="S71T1U629">LCFobOffset</span></span>)&amp;&amp;(<span class="mxinfo " id="T8:U480"><span class="var type1" id="S55T1U632">LCOverDelay</span>&gt;<span class="mxinfo " id="T1:U482">0.5</span></span>)&amp;&amp;(<span class="mxinfo " id="T8:U483"><span class="var type1" id="S38T1U636">CurOp</span>&lt;<span class="mxinfo " id="T1:U485">0.5</span></span>)&amp;&amp;(<span class="mxinfo " id="T8:U486"><span class="var type1" id="S31T1U640">LCEnbSts</span>&gt; <span class="mxinfo " id="T1:U488">0.5</span></span>)&amp;&amp; <span class="mxinfo " id="T8:U489"><span class="var type1" id="S45T1U643">PFailRestoreCn</span> &lt; <span class="mxinfo " id="T1:U491">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,78" id="srcline78"> 78</a></span><span class="line">                <span class="comment">% LC is OK by object judgement</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,79" id="srcline79"> 79</a></span><span class="line">                <span class="comment">% Info_Lo trigger or abs(EgoLaneNum - TargetLaneNum)&gt;0.5 trigger</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,80" id="srcline80"> 80</a></span><span class="line"><span class="comment">%                 if ObjTrig &gt; 1.5</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,81" id="srcline81"> 81</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="52,82" id="srcline82"> 82</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T8:U492"><span class="var type1" id="S20T1U648">LCTrigSuccess</span> &gt; <span class="mxinfo " id="T1:U494">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,83" id="srcline83"> 83</a></span><span class="line">                    <span class="comment">% LC is Trigged</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,84" id="srcline84"> 84</a></span><span class="line">                    <span class="mxinfo " id="T1:U495"><span class="var type1" id="S73T1U652">Zmax</span> = <span class="mxinfo " id="T1:U497"><span class="var type1" id="S71T1U654">LCFobOffset</span> - <span class="mxinfo " id="T1:U499"><span class="var type1" id="S16T35U656">Info_Me</span>(<span class="mxinfo " id="T1:U501">7</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,85" id="srcline85"> 85</a></span><span class="line">                    <span class="mxinfo " id="T1:U502"><span class="var type1" id="S68T1U660">EndOffset</span> = <span class="mxinfo " id="T1:U504"><span class="var type1" id="S72T1U662">NaviEndOffset</span> - <span class="mxinfo " id="T1:U506"><span class="var type1" id="S16T35U664">Info_Me</span>(<span class="mxinfo " id="T1:U508">7</span>)</span></span></span>;              </span></span>
<span class="srcline"><span class="lineno"><a href="52,86" id="srcline86"> 86</a></span><span class="line">                    <span class="comment">% Turn Fob LC dis        End Fob LC dis</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,87" id="srcline87"> 87</a></span><span class="line">                    <span class="keyword">if</span> (<span class="mxinfo " id="T8:U509"><span class="var type1" id="S73T1U672">Zmax</span> &gt; <span class="mxinfo " id="T1:U511">20</span></span> || (<span class="mxinfo " id="T8:U512"><span class="var type1" id="S73T1U677">Zmax</span> &gt; <span class="mxinfo " id="T1:U514">5</span></span> &amp;&amp; <span class="mxinfo " id="T8:U515"><span class="var type1" id="S18T1U680">InLaneLCFlg</span> &lt; <span class="mxinfo " id="T1:U517">0.5</span></span>)) &amp;&amp; ((<span class="mxinfo " id="T8:U518"><span class="var type1" id="S68T1U686">EndOffset</span> &gt; <span class="var type1" id="S27T1U687">TurnFrontLCFobDis</span></span>)||(<span class="mxinfo " id="T8:U521"><span class="var type1" id="S18T1U690">InLaneLCFlg</span> &lt; <span class="mxinfo " id="T1:U523">0.5</span></span>))</span></span>
<span class="srcline"><span class="lineno"><a href="52,88" id="srcline88"> 88</a></span><span class="line">                        <span class="mxinfo " id="T1:U524"><span class="var type1" id="S38T1U694">CurOp</span> = <span class="mxinfo " id="T1:U526">5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,89" id="srcline89"> 89</a></span><span class="line">                        <span class="comment">%RoadInfo = [EndCentX,EndCentY,LaneAngle,LaneWith];</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,90" id="srcline90"> 90</a></span><span class="line">                        <span class="mxinfo " id="T1:U527"><span class="var type1" id="S40T1U698">PTargetLaneNum</span> = <span class="var type1" id="S57T1U699">TargetLaneNum</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,91" id="srcline91"> 91</a></span><span class="line">                        <span class="mxinfo " id="T40:U530"><span class="var type1" id="S74T40U702">Line_ShapeTemp</span> = <span class="mxinfo " id="T40:U532"><span class="fcn" id="F111N41:B704">Line_ShapeInfoExtract</span>(<span class="var type1" id="S56T1U705">EgoLaneNum</span>,<span class="var type1" id="S14T4U706">Line_ShapeInfo</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,92" id="srcline92"> 92</a></span><span class="line">                        <span class="comment">%Relative Cord</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,93" id="srcline93"> 93</a></span><span class="line">                        <span class="mxinfo " id="T1:U535"><span class="var type1" id="S76T1U709">LCEndOffset</span> = <span class="mxinfo " id="T1:U537"><span class="var type1" id="S73T1U711">Zmax</span> + <span class="var type1" id="S27T1U712">TurnFrontLCFobDis</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,94" id="srcline94"> 94</a></span><span class="line">                        <span class="mxinfo " id="T7:U540"><span class="mxinfo " id="T7:U541"><span class="var type1" id="S4T11U716">RoadInfo</span>(<span class="mxinfo " id="T1:U543">1</span>,<span class="mxinfo " id="T38:U544">:</span>)</span> = <span class="mxinfo " id="T7:U545"><span class="fcn" id="F112N43:B720">RoadInfoExtractLC</span>(<span class="var type1" id="S74T40U721">Line_ShapeTemp</span>,<span class="var type1" id="S76T1U722">LCEndOffset</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,95" id="srcline95"> 95</a></span><span class="line">                        <span class="keyword">if</span> <span class="mxinfo " id="T8:U548"><span class="var type1" id="S18T1U726">InLaneLCFlg</span> &gt; <span class="mxinfo " id="T1:U550">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,96" id="srcline96"> 96</a></span><span class="line">                            <span class="mxinfo " id="T7:U551"><span class="mxinfo " id="T7:U552"><span class="var type1" id="S4T11U731">RoadInfo</span>(<span class="mxinfo " id="T1:U554">2</span>,<span class="mxinfo " id="T38:U555">:</span>)</span> = <span class="mxinfo " id="T7:U556"><span class="var type1" id="S4T11U735">RoadInfo</span>(<span class="mxinfo " id="T1:U558">1</span>,<span class="mxinfo " id="T38:U559">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,97" id="srcline97"> 97</a></span><span class="line">                            <span class="mxinfo " id="T1:U560"><span class="mxinfo " id="T1:U561"><span class="var type1" id="S4T11U741">RoadInfo</span>(<span class="mxinfo " id="T1:U563">2</span>,<span class="mxinfo " id="T1:U564">1</span>)</span> = <span class="mxinfo " id="T1:U565"><span class="var type1" id="S21T10U745">Info_Lo</span>(<span class="mxinfo " id="T1:U567">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,98" id="srcline98"> 98</a></span><span class="line">                            <span class="keyword">if</span> <span class="mxinfo " id="T8:U568"><span class="mxinfo " id="T1:U569">abs(<span class="mxinfo " id="T1:U570"><span class="var type1" id="S21T10U753">Info_Lo</span>(<span class="mxinfo " id="T9:U572">1</span>)</span>)</span> &gt; <span class="mxinfo " id="T1:U573">min(<span class="mxinfo " id="T33:U574">[<span class="mxinfo " id="T1:U575"><span class="var type1" id="S74T40U760">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U577">5</span>)</span>,<span class="mxinfo " id="T1:U578">50</span>]</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,99" id="srcline99"> 99</a></span><span class="line">                                <span class="mxinfo " id="T1:U579"><span class="mxinfo " id="T1:U580"><span class="var type1" id="S4T11U766">RoadInfo</span>(<span class="mxinfo " id="T1:U582">2</span>,<span class="mxinfo " id="T1:U583">1</span>)</span> = <span class="mxinfo " id="T1:U584">min(<span class="mxinfo " id="T33:U585">[<span class="mxinfo " id="T1:U586"><span class="var type1" id="S74T40U774">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U588">5</span>)</span>,<span class="mxinfo " id="T1:U589">50</span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,100" id="srcline100">100</a></span><span class="line">                            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,101" id="srcline101">101</a></span><span class="line">                            <span class="mxinfo " id="T1:U590"><span class="mxinfo " id="T1:U591"><span class="var type1" id="S4T11U780">RoadInfo</span>(<span class="mxinfo " id="T1:U593">2</span>,<span class="mxinfo " id="T1:U594">2</span>)</span> = <span class="var type1" id="S17T1U783">TargetPosition</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,102" id="srcline102">102</a></span><span class="line">                            <span class="mxinfo " id="T1:U596"><span class="var type1" id="S44T1U786">PInLaneLCFlgInt</span> = <span class="mxinfo " id="T1:U598">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,103" id="srcline103">103</a></span><span class="line">                        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,104" id="srcline104">104</a></span><span class="line">                            <span class="mxinfo " id="T40:U599"><span class="var type1" id="S74T40U791">Line_ShapeTemp</span> = <span class="mxinfo " id="T40:U601"><span class="fcn" id="F111N41:B793">Line_ShapeInfoExtract</span>(<span class="var type1" id="S57T1U794">TargetLaneNum</span>,<span class="var type1" id="S14T4U795">Line_ShapeInfo</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,105" id="srcline105">105</a></span><span class="line">                            <span class="mxinfo " id="T7:U604"><span class="mxinfo " id="T7:U605"><span class="var type1" id="S4T11U799">RoadInfo</span>(<span class="mxinfo " id="T1:U607">2</span>,<span class="mxinfo " id="T38:U608">:</span>)</span> = <span class="mxinfo " id="T7:U609"><span class="fcn" id="F112N43:B803">RoadInfoExtractLC</span>(<span class="var type1" id="S74T40U804">Line_ShapeTemp</span>,<span class="var type1" id="S76T1U805">LCEndOffset</span>)</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="52,106" id="srcline106">106</a></span><span class="line">                            <span class="mxinfo " id="T1:U612"><span class="mxinfo " id="T1:U613"><span class="var type1" id="S4T11U809">RoadInfo</span>(<span class="mxinfo " id="T1:U615">2</span>,<span class="mxinfo " id="T1:U616">1</span>)</span> = <span class="mxinfo " id="T1:U617"><span class="var type1" id="S21T10U813">Info_Lo</span>(<span class="mxinfo " id="T1:U619">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,107" id="srcline107">107</a></span><span class="line">                            <span class="keyword">if</span> <span class="mxinfo " id="T8:U620"><span class="mxinfo " id="T1:U621">abs(<span class="mxinfo " id="T1:U622"><span class="var type1" id="S21T10U821">Info_Lo</span>(<span class="mxinfo " id="T9:U624">1</span>)</span>)</span> &gt; <span class="mxinfo " id="T1:U625">min(<span class="mxinfo " id="T33:U626">[<span class="mxinfo " id="T1:U627"><span class="var type1" id="S74T40U828">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U629">5</span>)</span>,<span class="mxinfo " id="T1:U630">50</span>]</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,108" id="srcline108">108</a></span><span class="line">                                <span class="mxinfo " id="T1:U631"><span class="mxinfo " id="T1:U632"><span class="var type1" id="S4T11U834">RoadInfo</span>(<span class="mxinfo " id="T1:U634">2</span>,<span class="mxinfo " id="T1:U635">1</span>)</span> = <span class="mxinfo " id="T1:U636">min(<span class="mxinfo " id="T33:U637">[<span class="mxinfo " id="T1:U638"><span class="var type1" id="S74T40U842">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U640">5</span>)</span>,<span class="mxinfo " id="T1:U641">50</span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,109" id="srcline109">109</a></span><span class="line">                            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,110" id="srcline110">110</a></span><span class="line">                            <span class="mxinfo " id="T1:U642"><span class="mxinfo " id="T1:U643"><span class="var type1" id="S4T11U848">RoadInfo</span>(<span class="mxinfo " id="T1:U645">2</span>,<span class="mxinfo " id="T1:U646">2</span>)</span> = <span class="var type1" id="S17T1U851">TargetPosition</span></span>;                       </span></span>
<span class="srcline"><span class="lineno"><a href="52,111" id="srcline111">111</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,112" id="srcline112">112</a></span><span class="line">                        <span class="mxinfo " id="T11:U648"><span class="var type1" id="S46T11U854">PRoadInfo</span> = <span class="var type1" id="S4T11U855">RoadInfo</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,113" id="srcline113">113</a></span><span class="line">                        <span class="keyword">if</span> (<span class="mxinfo " id="T8:U651"><span class="var type1" id="S68T1U860">EndOffset</span> &gt; <span class="var type1" id="S27T1U861">TurnFrontLCFobDis</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,114" id="srcline114">114</a></span><span class="line">                            <span class="mxinfo " id="T1:U654"><span class="var type1" id="S3T1U864">OperationLongDislimit</span> = <span class="mxinfo " id="T1:U656">min(<span class="mxinfo " id="T33:U657">[<span class="var type1" id="S76T1U869">LCEndOffset</span>,<span class="var type1" id="S68T1U870">EndOffset</span>]</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="52,115" id="srcline115">115</a></span><span class="line">                        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,116" id="srcline116">116</a></span><span class="line">                            <span class="mxinfo " id="T1:U660"><span class="var type1" id="S3T1U874">OperationLongDislimit</span> = <span class="mxinfo " id="T1:U662">min(<span class="mxinfo " id="T33:U663">[<span class="var type1" id="S76T1U879">LCEndOffset</span>,(<span class="mxinfo " id="T1:U665"><span class="mxinfo " id="T1:U666"><span class="var type1" id="S68T1U883">EndOffset</span> + <span class="var type1" id="S27T1U884">TurnFrontLCFobDis</span></span> - <span class="mxinfo " id="T1:U669">5</span></span>)]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,117" id="srcline117">117</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,118" id="srcline118">118</a></span><span class="line">                        <span class="mxinfo " id="T1:U670"><span class="var type1" id="S60T1U888">EgoPosTagFlg</span> = <span class="mxinfo " id="T1:U672">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,119" id="srcline119">119</a></span><span class="line">                        <span class="mxinfo " id="T1:U673"><span class="var type1" id="S43T1U892">PLCOPCnt</span> = <span class="mxinfo " id="T1:U675"><span class="var type1" id="S43T1U894">PLCOPCnt</span> + <span class="mxinfo " id="T1:U677">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,120" id="srcline120">120</a></span><span class="line">                        <span class="keyword">if</span> <span class="mxinfo " id="T8:U678"><span class="var type1" id="S43T1U899">PLCOPCnt</span> &gt; <span class="mxinfo " id="T1:U680">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,121" id="srcline121">121</a></span><span class="line">                            <span class="mxinfo " id="T1:U681"><span class="var type1" id="S43T1U903">PLCOPCnt</span> = <span class="mxinfo " id="T1:U683">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,122" id="srcline122">122</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,123" id="srcline123">123</a></span><span class="line">                        <span class="mxinfo " id="T1:U684"><span class="var type1" id="S51T1U907">PreOp</span> = <span class="mxinfo " id="T1:U686">5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,124" id="srcline124">124</a></span><span class="line">                        <span class="mxinfo " id="T1:U687"><span class="var type1" id="S50T1U911">PTargetLaneNum2</span> = <span class="var type1" id="S40T1U912">PTargetLaneNum</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,125" id="srcline125">125</a></span><span class="line">                        <span class="mxinfo " id="T40:U690"><span class="var type1" id="S79T40U915">Line_ShapeTemp2</span> = <span class="mxinfo " id="T40:U692"><span class="fcn" id="F111N41:B917">Line_ShapeInfoExtract</span>(<span class="var type1" id="S40T1U918">PTargetLaneNum</span>,<span class="var type1" id="S14T4U919">Line_ShapeInfo</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,126" id="srcline126">126</a></span><span class="line">                        <span class="mxinfo " id="T42:U695"><span class="var type1" id="S80T42U922">RoadInfoTemp2</span> = <span class="mxinfo " id="T42:U697">zeros(<span class="mxinfo " id="T1:U698">4</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,127" id="srcline127">127</a></span><span class="line">                        <span class="mxinfo " id="T1:U699"><span class="var type1" id="S81T1U929">LenTemp</span> = <span class="mxinfo " id="T1:U701"><span class="var type1" id="S21T10U931">Info_Lo</span>(<span class="mxinfo " id="T1:U703">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,128" id="srcline128">128</a></span><span class="line">                        <span class="keyword">if</span> <span class="mxinfo " id="T8:U704"><span class="mxinfo " id="T1:U705">abs(<span class="mxinfo " id="T1:U706"><span class="var type1" id="S21T10U939">Info_Lo</span>(<span class="mxinfo " id="T9:U708">1</span>)</span>)</span> &gt; <span class="mxinfo " id="T1:U709">min(<span class="mxinfo " id="T33:U710">[<span class="mxinfo " id="T1:U711"><span class="var type1" id="S74T40U946">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U713">5</span>)</span>,<span class="mxinfo " id="T1:U714">50</span>]</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,129" id="srcline129">129</a></span><span class="line">                            <span class="mxinfo " id="T1:U715"><span class="var type1" id="S81T1U951">LenTemp</span> = <span class="mxinfo " id="T1:U717">min(<span class="mxinfo " id="T33:U718">[<span class="mxinfo " id="T1:U719"><span class="var type1" id="S74T40U957">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U721">5</span>)</span>,<span class="mxinfo " id="T1:U722">50</span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,130" id="srcline130">130</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,131" id="srcline131">131</a></span><span class="line">                        <span class="mxinfo " id="T43:U723"><span class="var type1" id="S80T43U962">RoadInfoTemp2</span> = <span class="mxinfo " id="T7:U725"><span class="fcn" id="F112N43:B964">RoadInfoExtractLC</span>(<span class="var type1" id="S79T40U965">Line_ShapeTemp2</span>,<span class="var type1" id="S81T1U966">LenTemp</span>)</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="52,132" id="srcline132">132</a></span><span class="line">                        <span class="mxinfo " id="T1:U728"><span class="var type1" id="S52T1U969">PCentTargetOffset</span> = <span class="mxinfo " id="T1:U730">(<span class="mxinfo " id="T1:U731"><span class="mxinfo " id="T1:U732"><span class="var type1" id="S80T43U974">RoadInfoTemp2</span>(<span class="mxinfo " id="T1:U734">2</span>)</span> - <span class="var type1" id="S17T1U976">TargetPosition</span></span>)*<span class="mxinfo " id="T1:U736">cos(<span class="mxinfo " id="T1:U737"><span class="var type1" id="S80T43U980">RoadInfoTemp2</span>(<span class="mxinfo " id="T1:U739">3</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,133" id="srcline133">133</a></span><span class="line">                    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,134" id="srcline134">134</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,135" id="srcline135">135</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,136" id="srcline136">136</a></span><span class="line">                <span class="keyword">end</span>    </span></span>
<span class="srcline"><span class="lineno"><a href="52,137" id="srcline137">137</a></span><span class="line">            <span class="keyword">end</span>        </span></span>
<span class="srcline"><span class="lineno"><a href="52,138" id="srcline138">138</a></span><span class="line">        <span class="keyword">elseif</span> <span class="mxinfo " id="T8:U740"><span class="var type1" id="S38T1U986">CurOp</span> &gt; <span class="mxinfo " id="T1:U742">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,139" id="srcline139">139</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U743"><span class="var type1" id="S38T1U991">CurOp</span> == <span class="mxinfo " id="T1:U745">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,140" id="srcline140">140</a></span><span class="line">                <span class="mxinfo " id="T11:U746"><span class="var type1" id="S4T11U995">RoadInfo</span> = <span class="mxinfo " id="T11:U748"><span class="fcn" id="F106N44:B997">RoadInfoExtractTr</span>(<span class="var type1" id="S47T6U998">PNavi_InfoTurn</span>,<span class="var type1" id="S16T35U999">Info_Me</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="52,141" id="srcline141">141</a></span><span class="line"><span class="comment">%                 RoadInfo = PRoadInfo;</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,142" id="srcline142">142</a></span><span class="line">            <span class="keyword">elseif</span> <span class="mxinfo " id="T8:U751"><span class="var type1" id="S38T1U1002">CurOp</span> == <span class="mxinfo " id="T1:U753">5</span></span>                </span></span>
<span class="srcline"><span class="lineno"><a href="52,143" id="srcline143">143</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T8:U754"><span class="var type1" id="S32T1U1007">TunEnbSts</span> &gt; <span class="mxinfo " id="T1:U756">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,144" id="srcline144">144</a></span><span class="line">                    <span class="mxinfo " id="T1:U757"><span class="var type1" id="S73T1U1011">Zmax</span> = <span class="mxinfo " id="T1:U759">(<span class="mxinfo " id="T1:U760"><span class="mxinfo " id="T1:U761"><span class="var type1" id="S13T6U1016">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U763">1</span>,<span class="mxinfo " id="T1:U764">1</span>)</span>-<span class="var type1" id="S27T1U1019">TurnFrontLCFobDis</span></span>) - <span class="mxinfo " id="T1:U766"><span class="var type1" id="S16T35U1021">Info_Me</span>(<span class="mxinfo " id="T1:U768">7</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,145" id="srcline145">145</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,146" id="srcline146">146</a></span><span class="line">                    <span class="mxinfo " id="T1:U769"><span class="var type1" id="S73T1U1026">Zmax</span> = <span class="mxinfo " id="T1:U771">255</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,147" id="srcline147">147</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,148" id="srcline148">148</a></span><span class="line">                <span class="comment">%RoadInfo = [EndCentX,EndCentY,LaneAngle,LaneWith];</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,149" id="srcline149">149</a></span><span class="line">                <span class="mxinfo " id="T1:U772"><span class="var type1" id="S57T1U1030">TargetLaneNum</span> = <span class="var type1" id="S40T1U1031">PTargetLaneNum</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,150" id="srcline150">150</a></span><span class="line">                <span class="mxinfo " id="T40:U775"><span class="var type1" id="S74T40U1034">Line_ShapeTemp</span> = <span class="mxinfo " id="T40:U777"><span class="fcn" id="F111N41:B1036">Line_ShapeInfoExtract</span>(<span class="var type1" id="S56T1U1037">EgoLaneNum</span>,<span class="var type1" id="S14T4U1038">Line_ShapeInfo</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,151" id="srcline151">151</a></span><span class="line">                <span class="comment">%Relative Cord</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,152" id="srcline152">152</a></span><span class="line">                <span class="mxinfo " id="T1:U780"><span class="var type1" id="S76T1U1041">LCEndOffset</span> = <span class="mxinfo " id="T1:U782"><span class="var type1" id="S73T1U1043">Zmax</span> + <span class="var type1" id="S27T1U1044">TurnFrontLCFobDis</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,153" id="srcline153">153</a></span><span class="line">                <span class="mxinfo " id="T7:U785"><span class="mxinfo " id="T7:U786"><span class="var type1" id="S4T11U1048">RoadInfo</span>(<span class="mxinfo " id="T1:U788">1</span>,<span class="mxinfo " id="T38:U789">:</span>)</span> = <span class="mxinfo " id="T7:U790"><span class="fcn" id="F112N43:B1052">RoadInfoExtractLC</span>(<span class="var type1" id="S74T40U1053">Line_ShapeTemp</span>,<span class="var type1" id="S76T1U1054">LCEndOffset</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,154" id="srcline154">154</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T8:U793"><span class="var type1" id="S44T1U1058">PInLaneLCFlgInt</span> &gt; <span class="mxinfo " id="T1:U795">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,155" id="srcline155">155</a></span><span class="line">                    <span class="mxinfo " id="T7:U796"><span class="mxinfo " id="T7:U797"><span class="var type1" id="S4T11U1063">RoadInfo</span>(<span class="mxinfo " id="T1:U799">2</span>,<span class="mxinfo " id="T38:U800">:</span>)</span> = <span class="mxinfo " id="T7:U801"><span class="var type1" id="S4T11U1067">RoadInfo</span>(<span class="mxinfo " id="T1:U803">1</span>,<span class="mxinfo " id="T38:U804">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,156" id="srcline156">156</a></span><span class="line">                    <span class="mxinfo " id="T1:U805"><span class="mxinfo " id="T1:U806"><span class="var type1" id="S4T11U1073">RoadInfo</span>(<span class="mxinfo " id="T1:U808">2</span>,<span class="mxinfo " id="T1:U809">1</span>)</span> = <span class="mxinfo " id="T1:U810"><span class="var type1" id="S21T10U1077">Info_Lo</span>(<span class="mxinfo " id="T1:U812">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,157" id="srcline157">157</a></span><span class="line">                    <span class="keyword">if</span> <span class="mxinfo " id="T8:U813"><span class="mxinfo " id="T1:U814">abs(<span class="mxinfo " id="T1:U815"><span class="var type1" id="S21T10U1085">Info_Lo</span>(<span class="mxinfo " id="T9:U817">1</span>)</span>)</span> &gt; <span class="mxinfo " id="T1:U818">min(<span class="mxinfo " id="T33:U819">[<span class="mxinfo " id="T1:U820"><span class="var type1" id="S74T40U1092">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U822">5</span>)</span>,<span class="mxinfo " id="T1:U823">50</span>]</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,158" id="srcline158">158</a></span><span class="line">                        <span class="mxinfo " id="T1:U824"><span class="mxinfo " id="T1:U825"><span class="var type1" id="S4T11U1098">RoadInfo</span>(<span class="mxinfo " id="T1:U827">2</span>,<span class="mxinfo " id="T1:U828">1</span>)</span> = <span class="mxinfo " id="T1:U829">min(<span class="mxinfo " id="T33:U830">[<span class="mxinfo " id="T1:U831"><span class="var type1" id="S74T40U1106">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U833">5</span>)</span>,<span class="mxinfo " id="T1:U834">50</span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,159" id="srcline159">159</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,160" id="srcline160">160</a></span><span class="line">                    <span class="mxinfo " id="T1:U835"><span class="mxinfo " id="T1:U836"><span class="var type1" id="S4T11U1112">RoadInfo</span>(<span class="mxinfo " id="T1:U838">2</span>,<span class="mxinfo " id="T1:U839">2</span>)</span> = <span class="var type1" id="S17T1U1115">TargetPosition</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="52,161" id="srcline161">161</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,162" id="srcline162">162</a></span><span class="line">                    <span class="mxinfo " id="T40:U841"><span class="var type1" id="S74T40U1119">Line_ShapeTemp</span> = <span class="mxinfo " id="T40:U843"><span class="fcn" id="F111N41:B1121">Line_ShapeInfoExtract</span>(<span class="var type1" id="S57T1U1122">TargetLaneNum</span>,<span class="var type1" id="S14T4U1123">Line_ShapeInfo</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,163" id="srcline163">163</a></span><span class="line">                    <span class="mxinfo " id="T7:U846"><span class="mxinfo " id="T7:U847"><span class="var type1" id="S4T11U1127">RoadInfo</span>(<span class="mxinfo " id="T1:U849">2</span>,<span class="mxinfo " id="T38:U850">:</span>)</span> = <span class="mxinfo " id="T7:U851"><span class="fcn" id="F112N43:B1131">RoadInfoExtractLC</span>(<span class="var type1" id="S74T40U1132">Line_ShapeTemp</span>,<span class="var type1" id="S76T1U1133">LCEndOffset</span>)</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="52,164" id="srcline164">164</a></span><span class="line">                    <span class="mxinfo " id="T1:U854"><span class="mxinfo " id="T1:U855"><span class="var type1" id="S4T11U1137">RoadInfo</span>(<span class="mxinfo " id="T1:U857">2</span>,<span class="mxinfo " id="T1:U858">1</span>)</span> = <span class="mxinfo " id="T1:U859"><span class="var type1" id="S21T10U1141">Info_Lo</span>(<span class="mxinfo " id="T1:U861">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,165" id="srcline165">165</a></span><span class="line">                    <span class="keyword">if</span> <span class="mxinfo " id="T8:U862"><span class="mxinfo " id="T1:U863">abs(<span class="mxinfo " id="T1:U864"><span class="var type1" id="S21T10U1149">Info_Lo</span>(<span class="mxinfo " id="T9:U866">1</span>)</span>)</span> &gt; <span class="mxinfo " id="T1:U867">min(<span class="mxinfo " id="T33:U868">[<span class="mxinfo " id="T1:U869"><span class="var type1" id="S74T40U1156">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U871">5</span>)</span>,<span class="mxinfo " id="T1:U872">50</span>]</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,166" id="srcline166">166</a></span><span class="line">                        <span class="mxinfo " id="T1:U873"><span class="mxinfo " id="T1:U874"><span class="var type1" id="S4T11U1162">RoadInfo</span>(<span class="mxinfo " id="T1:U876">2</span>,<span class="mxinfo " id="T1:U877">1</span>)</span> = <span class="mxinfo " id="T1:U878">min(<span class="mxinfo " id="T33:U879">[<span class="mxinfo " id="T1:U880"><span class="var type1" id="S74T40U1170">Line_ShapeTemp</span>(<span class="mxinfo " id="T9:U882">5</span>)</span>,<span class="mxinfo " id="T1:U883">50</span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,167" id="srcline167">167</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,168" id="srcline168">168</a></span><span class="line">                    <span class="mxinfo " id="T1:U884"><span class="mxinfo " id="T1:U885"><span class="var type1" id="S4T11U1176">RoadInfo</span>(<span class="mxinfo " id="T1:U887">2</span>,<span class="mxinfo " id="T1:U888">2</span>)</span> = <span class="var type1" id="S17T1U1179">TargetPosition</span></span>;                      </span></span>
<span class="srcline"><span class="lineno"><a href="52,169" id="srcline169">169</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,170" id="srcline170">170</a></span><span class="line">                <span class="mxinfo " id="T1:U890"><span class="var type1" id="S3T1U1182">OperationLongDislimit</span> = <span class="var type1" id="S76T1U1183">LCEndOffset</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="52,171" id="srcline171">171</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,172" id="srcline172">172</a></span><span class="line">            <span class="keyword">end</span>            </span></span>
<span class="srcline"><span class="lineno"><a href="52,173" id="srcline173">173</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T8:U893"><span class="var type1" id="S28T1U1188">OperationFinishFlgIn</span> &lt; <span class="mxinfo " id="T1:U895">-<span class="mxinfo " id="T1:U896">0.5</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,174" id="srcline174">174</a></span><span class="line">                <span class="mxinfo " id="T1:U897"><span class="var type1" id="S38T1U1193">CurOp</span> = <span class="mxinfo " id="T1:U899">0</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="52,175" id="srcline175">175</a></span><span class="line">                <span class="mxinfo " id="T1:U900"><span class="var type1" id="S45T1U1197">PFailRestoreCn</span> = <span class="var type1" id="S59T1U1198">FailSilentCnt</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,176" id="srcline176">176</a></span><span class="line">            <span class="keyword">end</span>            </span></span>
<span class="srcline"><span class="lineno"><a href="52,177" id="srcline177">177</a></span><span class="line">            <span class="comment">%Update the operation status</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,178" id="srcline178">178</a></span><span class="line">            <span class="keyword">if</span> (<span class="mxinfo " id="T8:U903"><span class="mxinfo " id="T1:U904">abs(<span class="mxinfo " id="T1:U905"><span class="var type1" id="S38T1U1206">CurOp</span>-<span class="mxinfo " id="T1:U907">5</span></span>)</span>&lt;<span class="mxinfo " id="T1:U908">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,179" id="srcline179">179</a></span><span class="line">                <span class="keyword">if</span> (<span class="mxinfo " id="T8:U909"><span class="var type1" id="S28T1U1214">OperationFinishFlgIn</span> &gt; <span class="mxinfo " id="T1:U911">0.5</span></span>)||(<span class="mxinfo " id="T8:U912"><span class="var type1" id="S33T1U1218">LCForceShudown</span> &gt; <span class="mxinfo " id="T1:U914">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,180" id="srcline180">180</a></span><span class="line"><span class="comment">%                 if ((abs(PTargetLaneNum - EgoLaneNum)&lt;0.5)&amp;&amp;(OperationFinishFlgIn&gt;0.5))||(LCForceShudown &gt; 0.5)</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,181" id="srcline181">181</a></span><span class="line">    <span class="comment">%                 Line_ShapeTemp = Line_ShapeInfoExtract(PTargetLaneNum,Line_ShapeInfo);</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,182" id="srcline182">182</a></span><span class="line">                    <span class="comment">%AngleDifference &amp; DisDifference</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,183" id="srcline183">183</a></span><span class="line">    <span class="comment">%                 if (abs(Line_ShapeTemp(2))&lt;AngTol)||(PInLaneLCFlgInt &gt; 0.5)||(LCEnbSts &lt; 0.5)</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,184" id="srcline184">184</a></span><span class="line">                    <span class="comment">%Previous is success                           </span></span></span>
<span class="srcline"><span class="lineno"><a href="52,185" id="srcline185">185</a></span><span class="line">                        <span class="mxinfo " id="T1:U915"><span class="var type1" id="S38T1U1222">CurOp</span> = <span class="mxinfo " id="T1:U917">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,186" id="srcline186">186</a></span><span class="line">                        <span class="keyword">if</span> <span class="mxinfo " id="T8:U918"><span class="var type1" id="S44T1U1227">PInLaneLCFlgInt</span> &gt; <span class="mxinfo " id="T1:U920">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,187" id="srcline187">187</a></span><span class="line">                            <span class="keyword">if</span> <span class="mxinfo " id="T8:U921"><span class="var type1" id="S42T1U1232">PInLaneLCFlg</span> &gt; <span class="mxinfo " id="T1:U923">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,188" id="srcline188">188</a></span><span class="line">                                <span class="mxinfo " id="T1:U924"><span class="var type1" id="S42T1U1236">PInLaneLCFlg</span> = <span class="mxinfo " id="T1:U926">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,189" id="srcline189">189</a></span><span class="line">                            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,190" id="srcline190">190</a></span><span class="line">                                <span class="mxinfo " id="T1:U927"><span class="var type1" id="S42T1U1241">PInLaneLCFlg</span> = <span class="mxinfo " id="T1:U929">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,191" id="srcline191">191</a></span><span class="line">                            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,192" id="srcline192">192</a></span><span class="line">                            <span class="mxinfo " id="T1:U930"><span class="var type1" id="S44T1U1245">PInLaneLCFlgInt</span> = <span class="mxinfo " id="T1:U932">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,193" id="srcline193">193</a></span><span class="line">                        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,194" id="srcline194">194</a></span><span class="line">                            <span class="mxinfo " id="T1:U933"><span class="var type1" id="S39T1U1250">NexLCDelayCnt</span> = <span class="var type1" id="S25T1U1251">LCDelayTime</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="52,195" id="srcline195">195</a></span><span class="line">                        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,196" id="srcline196">196</a></span><span class="line">    <span class="comment">%                 end   </span></span></span>
<span class="srcline"><span class="lineno"><a href="52,197" id="srcline197">197</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,198" id="srcline198">198</a></span><span class="line">                    <span class="mxinfo " id="T1:U936"><span class="var type1" id="S10T1U1255">OpSts</span> = <span class="mxinfo " id="T1:U938">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,199" id="srcline199">199</a></span><span class="line">                    <span class="keyword">if</span> (<span class="mxinfo " id="T8:U939"><span class="mxinfo " id="T1:U940">abs(<span class="mxinfo " id="T1:U941"><span class="var type1" id="S40T1U1264">PTargetLaneNum</span> - <span class="var type1" id="S56T1U1265">EgoLaneNum</span></span>)</span>&gt;<span class="mxinfo " id="T1:U944">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,200" id="srcline200">200</a></span><span class="line">                        <span class="mxinfo " id="T1:U945"><span class="var type1" id="S10T1U1269">OpSts</span> = <span class="mxinfo " id="T1:U947"><span class="var type1" id="S10T1U1271">OpSts</span> + <span class="mxinfo " id="T1:U949">10</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,201" id="srcline201">201</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,202" id="srcline202">202</a></span><span class="line">                    <span class="keyword">if</span> (<span class="mxinfo " id="T8:U950"><span class="var type1" id="S28T1U1277">OperationFinishFlgIn</span>&lt;<span class="mxinfo " id="T1:U952">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,203" id="srcline203">203</a></span><span class="line">                        <span class="mxinfo " id="T1:U953"><span class="var type1" id="S10T1U1281">OpSts</span> = <span class="mxinfo " id="T1:U955"><span class="var type1" id="S10T1U1283">OpSts</span> + <span class="mxinfo " id="T1:U957">100</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,204" id="srcline204">204</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,205" id="srcline205">205</a></span><span class="line">                <span class="keyword">end</span>    </span></span>
<span class="srcline"><span class="lineno"><a href="52,206" id="srcline206">206</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,207" id="srcline207">207</a></span><span class="line">            <span class="keyword">if</span> (<span class="mxinfo " id="T8:U958"><span class="mxinfo " id="T1:U959">abs(<span class="mxinfo " id="T1:U960"><span class="var type1" id="S38T1U1293">CurOp</span> - <span class="mxinfo " id="T1:U962">1</span></span>)</span>&lt;<span class="mxinfo " id="T1:U963">0.5</span></span>)||(<span class="mxinfo " id="T8:U964"><span class="mxinfo " id="T1:U965">abs(<span class="mxinfo " id="T1:U966"><span class="var type1" id="S38T1U1301">CurOp</span> - <span class="mxinfo " id="T1:U968">2</span></span>)</span>&lt;<span class="mxinfo " id="T1:U969">0.5</span></span>) </span></span>
<span class="srcline"><span class="lineno"><a href="52,208" id="srcline208">208</a></span><span class="line">                <span class="mxinfo " id="T3:U970"><span class="var type1" id="S61T3U1306">AbsCord_Ego</span> = <span class="mxinfo " id="T3:U972">[<span class="mxinfo " id="T1:U973"><span class="var type1" id="S16T35U1310">Info_Me</span>(<span class="mxinfo " id="T9:U975">1</span>)</span>,<span class="mxinfo " id="T1:U976"><span class="var type1" id="S16T35U1313">Info_Me</span>(<span class="mxinfo " id="T9:U978">2</span>)</span>,<span class="mxinfo " id="T1:U979"><span class="var type1" id="S16T35U1316">Info_Me</span>(<span class="mxinfo " id="T9:U981">6</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,209" id="srcline209">209</a></span><span class="line">                <span class="mxinfo " id="T3:U982"><span class="var type1" id="S62T3U1320">AbsCord_Trn</span> = <span class="mxinfo " id="T3:U984">[<span class="mxinfo " id="T1:U985"><span class="var type1" id="S47T6U1324">PNavi_InfoTurn</span>(<span class="mxinfo " id="T9:U987">2</span>,<span class="mxinfo " id="T9:U988">3</span>)</span>,<span class="mxinfo " id="T1:U989"><span class="var type1" id="S47T6U1328">PNavi_InfoTurn</span>(<span class="mxinfo " id="T9:U991">2</span>,<span class="mxinfo " id="T9:U992">4</span>)</span>,<span class="mxinfo " id="T1:U993"><span class="var type1" id="S47T6U1332">PNavi_InfoTurn</span>(<span class="mxinfo " id="T9:U995">2</span>,<span class="mxinfo " id="T9:U996">7</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,210" id="srcline210">210</a></span><span class="line"><span class="comment">%                 AbsCord_Trn = [PRoadInfo(2,1),PRoadInfo(2,2),PRoadInfo(2,3)];</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,211" id="srcline211">211</a></span><span class="line">                <span class="mxinfo " id="T1:U997"><span class="var type1" id="S83T1U1337">PassFlg</span> = <span class="mxinfo " id="T1:U999"><span class="fcn" id="F105N42:B1339">PassJudgement</span>(<span class="var type1" id="S61T3U1340">AbsCord_Ego</span>,<span class="var type1" id="S62T3U1341">AbsCord_Trn</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,212" id="srcline212">212</a></span><span class="line">                <span class="keyword">if</span> ((((<span class="mxinfo " id="T8:U1002"><span class="mxinfo " id="T1:U1003">abs(<span class="mxinfo " id="T1:U1004"><span class="var type1" id="S58T1U1356">EgoHeadAng</span> - <span class="mxinfo " id="T1:U1006"><span class="var type1" id="S47T6U1358">PNavi_InfoTurn</span>(<span class="mxinfo " id="T1:U1008">2</span>,<span class="mxinfo " id="T1:U1009">7</span>)</span></span>)</span>&lt;<span class="mxinfo " id="T1:U1010"><span class="mxinfo " id="T1:U1011"><span class="var type1" id="S29T1U1363">AngTol</span>/<span class="mxinfo " id="T1:U1013">180</span></span>*<span class="mxinfo " id="T1:U1014">3.14</span></span></span>)&amp;&amp;(<span class="mxinfo " id="T8:U1015"><span class="var type1" id="S83T1U1368">PassFlg</span>&gt;<span class="mxinfo " id="T1:U1017">0.5</span></span>))||(<span class="var type1" id="S35T1U1372">ByPassTurnFinsJudge</span>&gt;0.5))&amp;&amp;(<span class="mxinfo " id="T8:U1019"><span class="var type1" id="S28T1U1376">OperationFinishFlgIn</span>&gt;<span class="mxinfo " id="T1:U1021">0.5</span></span>))||(<span class="mxinfo " id="T8:U1022"><span class="var type1" id="S34T1U1380">TunForceShudown</span> &gt; <span class="mxinfo " id="T1:U1024">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,213" id="srcline213">213</a></span><span class="line">                    <span class="mxinfo " id="T1:U1025"><span class="var type1" id="S38T1U1384">CurOp</span> = <span class="mxinfo " id="T1:U1027">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,214" id="srcline214">214</a></span><span class="line">                    <span class="mxinfo " id="T11:U1028"><span class="var type1" id="S46T11U1388">PRoadInfo</span> = <span class="mxinfo " id="T11:U1030">zeros(<span class="mxinfo " id="T1:U1031">2</span>,<span class="mxinfo " id="T1:U1032">4</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,215" id="srcline215">215</a></span><span class="line">                    <span class="mxinfo " id="T6:U1033"><span class="var type1" id="S47T6U1395">PNavi_InfoTurn</span> = <span class="mxinfo " id="T6:U1035">zeros(<span class="mxinfo " id="T1:U1036">4</span>,<span class="mxinfo " id="T1:U1037">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,216" id="srcline216">216</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,217" id="srcline217">217</a></span><span class="line">                    <span class="mxinfo " id="T1:U1038"><span class="var type1" id="S10T1U1403">OpSts</span> = <span class="mxinfo " id="T1:U1040">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,218" id="srcline218">218</a></span><span class="line">                    <span class="keyword">if</span> (<span class="mxinfo " id="T8:U1041"><span class="mxinfo " id="T1:U1042">abs(<span class="mxinfo " id="T1:U1043"><span class="var type1" id="S58T1U1412">EgoHeadAng</span> - <span class="mxinfo " id="T1:U1045"><span class="var type1" id="S47T6U1414">PNavi_InfoTurn</span>(<span class="mxinfo " id="T1:U1047">2</span>,<span class="mxinfo " id="T1:U1048">7</span>)</span></span>)</span>&gt;=<span class="mxinfo " id="T1:U1049"><span class="mxinfo " id="T1:U1050"><span class="var type1" id="S29T1U1419">AngTol</span>/<span class="mxinfo " id="T1:U1052">180</span></span>*<span class="mxinfo " id="T1:U1053">3.14</span></span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,219" id="srcline219">219</a></span><span class="line">                        <span class="mxinfo " id="T1:U1054"><span class="var type1" id="S10T1U1424">OpSts</span> = <span class="mxinfo " id="T1:U1056"><span class="var type1" id="S10T1U1426">OpSts</span> + <span class="mxinfo " id="T1:U1058">10</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,220" id="srcline220">220</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,221" id="srcline221">221</a></span><span class="line">                    <span class="keyword">if</span> (<span class="mxinfo " id="T8:U1059"><span class="var type1" id="S83T1U1432">PassFlg</span>&lt;<span class="mxinfo " id="T1:U1061">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,222" id="srcline222">222</a></span><span class="line">                        <span class="mxinfo " id="T1:U1062"><span class="var type1" id="S10T1U1436">OpSts</span> = <span class="mxinfo " id="T1:U1064"><span class="var type1" id="S10T1U1438">OpSts</span> + <span class="mxinfo " id="T1:U1066">100</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,223" id="srcline223">223</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,224" id="srcline224">224</a></span><span class="line">                    <span class="keyword">if</span> (<span class="mxinfo " id="T8:U1067"><span class="var type1" id="S28T1U1444">OperationFinishFlgIn</span>&lt;<span class="mxinfo " id="T1:U1069">0.5</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,225" id="srcline225">225</a></span><span class="line">                        <span class="mxinfo " id="T1:U1070"><span class="var type1" id="S10T1U1448">OpSts</span> = <span class="mxinfo " id="T1:U1072"><span class="var type1" id="S10T1U1450">OpSts</span> + <span class="mxinfo " id="T1:U1074">1000</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,226" id="srcline226">226</a></span><span class="line">                    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,227" id="srcline227">227</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,228" id="srcline228">228</a></span><span class="line">            <span class="keyword">end</span>   </span></span>
<span class="srcline"><span class="lineno"><a href="52,229" id="srcline229">229</a></span><span class="line">        <span class="keyword">else</span>            </span></span>
<span class="srcline"><span class="lineno"><a href="52,230" id="srcline230">230</a></span><span class="line">        <span class="keyword">end</span>    </span></span>
<span class="srcline"><span class="lineno"><a href="52,231" id="srcline231">231</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U1075"><span class="var type1" id="S60T1U1456">EgoPosTagFlg</span> &gt; <span class="mxinfo " id="T1:U1077">0.5</span></span>            </span></span>
<span class="srcline"><span class="lineno"><a href="52,232" id="srcline232">232</a></span><span class="line"><span class="comment">%             Temp = EgoCordOrig;</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,233" id="srcline233">233</a></span><span class="line">            <span class="mxinfo " id="T3:U1078"><span class="var type1" id="S41T3U1460">EgoCordOrig</span> = <span class="mxinfo " id="T3:U1080">[<span class="mxinfo " id="T1:U1081"><span class="var type1" id="S16T35U1464">Info_Me</span>(<span class="mxinfo " id="T1:U1083">1</span>)</span>,<span class="mxinfo " id="T1:U1084"><span class="var type1" id="S16T35U1467">Info_Me</span>(<span class="mxinfo " id="T1:U1086">2</span>)</span>,<span class="mxinfo " id="T1:U1087"><span class="var type1" id="S16T35U1470">Info_Me</span>(<span class="mxinfo " id="T1:U1089">6</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,234" id="srcline234">234</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,235" id="srcline235">235</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,236" id="srcline236">236</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U1090"><span class="var type1" id="S30T1U1476">LCStartFlg</span> &gt; <span class="mxinfo " id="T1:U1092">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,237" id="srcline237">237</a></span><span class="line">            <span class="mxinfo " id="T3:U1093"><span class="var type1" id="S48T3U1480">PreEgoCordOrig</span> = <span class="var type1" id="S41T3U1481">EgoCordOrig</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,238" id="srcline238">238</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,239" id="srcline239">239</a></span><span class="line">        <span class="mxinfo " id="T3:U1096"><span class="var type1" id="S61T3U1484">AbsCord_Ego</span> = <span class="mxinfo " id="T3:U1098">[<span class="mxinfo " id="T1:U1099"><span class="var type1" id="S16T35U1488">Info_Me</span>(<span class="mxinfo " id="T9:U1101">1</span>)</span>,<span class="mxinfo " id="T1:U1102"><span class="var type1" id="S16T35U1491">Info_Me</span>(<span class="mxinfo " id="T9:U1104">2</span>)</span>,<span class="mxinfo " id="T1:U1105"><span class="var type1" id="S16T35U1494">Info_Me</span>(<span class="mxinfo " id="T9:U1107">6</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,240" id="srcline240">240</a></span><span class="line">        <span class="mxinfo " id="T3:U1108"><span class="var type1" id="S84T3U1498">RelCord_Ego</span> = <span class="mxinfo " id="T3:U1110"><span class="fcn" id="F104N40:B1500">CordTransfer</span>(<span class="var type1" id="S61T3U1501">AbsCord_Ego</span>,<span class="var type1" id="S41T3U1502">EgoCordOrig</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,241" id="srcline241">241</a></span><span class="line">        <span class="mxinfo " id="T10:U1113"><span class="mxinfo " id="T10:U1114"><span class="var type1" id="S7T10U1506">Info_MeRel</span>(<span class="mxinfo " id="T10:U1116"><span class="mxinfo " id="T1:U1117">1</span>:<span class="mxinfo " id="T1:U1118">6</span></span>)</span>=<span class="mxinfo " id="T10:U1119"><span class="var type1" id="S16T35U1511">Info_Me</span>(<span class="mxinfo " id="T10:U1121"><span class="mxinfo " id="T1:U1122">1</span>:<span class="mxinfo " id="T1:U1123">6</span></span>)</span></span>;        </span></span>
<span class="srcline"><span class="lineno"><a href="52,242" id="srcline242">242</a></span><span class="line">        <span class="mxinfo " id="T1:U1124"><span class="mxinfo " id="T1:U1125"><span class="var type1" id="S7T10U1518">Info_MeRel</span>(<span class="mxinfo " id="T1:U1127">1</span>)</span> = <span class="mxinfo " id="T1:U1128"><span class="var type1" id="S84T3U1521">RelCord_Ego</span>(<span class="mxinfo " id="T1:U1130">1</span>)</span></span>;<span class="mxinfo " id="T1:U1131"><span class="mxinfo " id="T1:U1132"><span class="var type1" id="S7T10U1526">Info_MeRel</span>(<span class="mxinfo " id="T1:U1134">2</span>)</span> = <span class="mxinfo " id="T1:U1135"><span class="var type1" id="S84T3U1529">RelCord_Ego</span>(<span class="mxinfo " id="T1:U1137">2</span>)</span></span>;<span class="mxinfo " id="T1:U1138"><span class="mxinfo " id="T1:U1139"><span class="var type1" id="S7T10U1534">Info_MeRel</span>(<span class="mxinfo " id="T1:U1141">6</span>)</span> = <span class="mxinfo " id="T1:U1142"><span class="var type1" id="S84T3U1537">RelCord_Ego</span>(<span class="mxinfo " id="T1:U1144">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,243" id="srcline243">243</a></span><span class="line">        <span class="mxinfo " id="T10:U1145"><span class="var type1" id="S9T10U1541">PreInfo_MeRel</span> = <span class="var type1" id="S7T10U1542">Info_MeRel</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,244" id="srcline244">244</a></span><span class="line">        <span class="mxinfo " id="T3:U1148"><span class="var type1" id="S84T3U1545">RelCord_Ego</span> = <span class="mxinfo " id="T3:U1150"><span class="fcn" id="F104N40:B1547">CordTransfer</span>(<span class="var type1" id="S61T3U1548">AbsCord_Ego</span>,<span class="var type1" id="S48T3U1549">PreEgoCordOrig</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,245" id="srcline245">245</a></span><span class="line">        <span class="mxinfo " id="T1:U1153"><span class="mxinfo " id="T1:U1154"><span class="var type1" id="S9T10U1553">PreInfo_MeRel</span>(<span class="mxinfo " id="T1:U1156">1</span>)</span> = <span class="mxinfo " id="T1:U1157"><span class="var type1" id="S84T3U1556">RelCord_Ego</span>(<span class="mxinfo " id="T1:U1159">1</span>)</span></span>;<span class="mxinfo " id="T1:U1160"><span class="mxinfo " id="T1:U1161"><span class="var type1" id="S9T10U1561">PreInfo_MeRel</span>(<span class="mxinfo " id="T1:U1163">2</span>)</span> = <span class="mxinfo " id="T1:U1164"><span class="var type1" id="S84T3U1564">RelCord_Ego</span>(<span class="mxinfo " id="T1:U1166">2</span>)</span></span>;<span class="mxinfo " id="T1:U1167"><span class="mxinfo " id="T1:U1168"><span class="var type1" id="S9T10U1569">PreInfo_MeRel</span>(<span class="mxinfo " id="T1:U1170">6</span>)</span> = <span class="mxinfo " id="T1:U1171"><span class="var type1" id="S84T3U1572">RelCord_Ego</span>(<span class="mxinfo " id="T1:U1173">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,246" id="srcline246">246</a></span><span class="line">        <span class="mxinfo " id="T1:U1174"><span class="var type1" id="S2T1U1576">Curoperation</span> = <span class="var type1" id="S38T1U1577">CurOp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,247" id="srcline247">247</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U1177"><span class="var type1" id="S38T1U1581">CurOp</span> &gt; <span class="mxinfo " id="T1:U1179">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,248" id="srcline248">248</a></span><span class="line">            <span class="mxinfo " id="T1:U1180"><span class="var type1" id="S5T1U1585">SpeedLimit</span> = <span class="var type1" id="S23T1U1586">SpeedLimitOp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,249" id="srcline249">249</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,250" id="srcline250">250</a></span><span class="line">            <span class="keyword">if</span> (<span class="mxinfo " id="T8:U1183"><span class="mxinfo " id="T1:U1184"><span class="var type1" id="S16T35U1594">Info_Me</span>(<span class="mxinfo " id="T9:U1186">7</span>)</span> &gt; (<span class="mxinfo " id="T1:U1187"><span class="mxinfo " id="T1:U1188"><span class="var type1" id="S13T6U1599">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U1190">1</span>,<span class="mxinfo " id="T1:U1191">1</span>)</span>-<span class="mxinfo " id="T1:U1192">20</span></span>)</span>)&amp;&amp; (<span class="mxinfo " id="T8:U1193"><span class="mxinfo " id="T1:U1194"><span class="var type1" id="S16T35U1606">Info_Me</span>(<span class="mxinfo " id="T9:U1196">7</span>)</span> &lt; <span class="mxinfo " id="T1:U1197"><span class="var type1" id="S13T6U1609">Navi_InfoTurn</span>(<span class="mxinfo " id="T1:U1199">2</span>,<span class="mxinfo " id="T1:U1200">1</span>)</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="52,251" id="srcline251">251</a></span><span class="line">                <span class="mxinfo " id="T1:U1201"><span class="var type1" id="S5T1U1614">SpeedLimit</span> = <span class="var type1" id="S23T1U1615">SpeedLimitOp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,252" id="srcline252">252</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,253" id="srcline253">253</a></span><span class="line">                <span class="mxinfo " id="T1:U1204"><span class="var type1" id="S5T1U1619">SpeedLimit</span> = <span class="var type1" id="S24T1U1620">SpeedLimitIdle</span></span>;     </span></span>
<span class="srcline"><span class="lineno"><a href="52,254" id="srcline254">254</a></span><span class="line">            <span class="keyword">end</span>                   </span></span>
<span class="srcline"><span class="lineno"><a href="52,255" id="srcline255">255</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,256" id="srcline256">256</a></span><span class="line">        <span class="mxinfo " id="T1:U1207"><span class="var type1" id="S8T1U1623">InLaneLCFlgOut</span> = <span class="var type1" id="S44T1U1624">PInLaneLCFlgInt</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,257" id="srcline257">257</a></span><span class="line">        <span class="mxinfo " id="T1:U1210"><span class="mxinfo " id="T1:U1211"><span class="var type1" id="S4T11U1628">RoadInfo</span>(<span class="mxinfo " id="T1:U1213">1</span>,<span class="mxinfo " id="T1:U1214">1</span>)</span> = <span class="mxinfo " id="T1:U1215"><span class="var type1" id="S7T10U1632">Info_MeRel</span>(<span class="mxinfo " id="T1:U1217">1</span>)</span></span>;<span class="mxinfo " id="T1:U1218"><span class="mxinfo " id="T1:U1219"><span class="var type1" id="S4T11U1637">RoadInfo</span>(<span class="mxinfo " id="T1:U1221">1</span>,<span class="mxinfo " id="T1:U1222">2</span>)</span> = <span class="mxinfo " id="T1:U1223"><span class="var type1" id="S7T10U1641">Info_MeRel</span>(<span class="mxinfo " id="T1:U1225">2</span>)</span></span>;<span class="mxinfo " id="T1:U1226"><span class="mxinfo " id="T1:U1227"><span class="var type1" id="S4T11U1646">RoadInfo</span>(<span class="mxinfo " id="T1:U1229">1</span>,<span class="mxinfo " id="T1:U1230">3</span>)</span> = <span class="mxinfo " id="T1:U1231"><span class="var type1" id="S7T10U1650">Info_MeRel</span>(<span class="mxinfo " id="T1:U1233">6</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,258" id="srcline258">258</a></span><span class="line">        <span class="comment">% RisEdge Update this for Obj monitor</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,259" id="srcline259">259</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="52,260" id="srcline260">260</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T8:U1234"><span class="mxinfo " id="T1:U1235">abs(<span class="mxinfo " id="T1:U1236"><span class="var type1" id="S51T1U1658">PreOp</span> - <span class="mxinfo " id="T1:U1238">1</span></span>)</span>&lt;<span class="mxinfo " id="T1:U1239">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,261" id="srcline261">261</a></span><span class="line">            <span class="mxinfo " id="T11:U1240"><span class="var type1" id="S86T11U1663">RoadInfoTemp</span> = <span class="mxinfo " id="T11:U1242"><span class="fcn" id="F106N44:B1665">RoadInfoExtractTr</span>(<span class="var type1" id="S49T6U1666">PNavi_InfoTurn2</span>,<span class="var type1" id="S16T35U1667">Info_Me</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="52,262" id="srcline262">262</a></span><span class="line">            <span class="mxinfo " id="T11:U1245"><span class="var type1" id="S11T11U1670">RoadInfo2</span> = <span class="var type1" id="S86T11U1671">RoadInfoTemp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,263" id="srcline263">263</a></span><span class="line">        <span class="keyword">elseif</span> <span class="mxinfo " id="T8:U1248"><span class="mxinfo " id="T1:U1249">abs(<span class="mxinfo " id="T1:U1250"><span class="var type1" id="S51T1U1677">PreOp</span> - <span class="mxinfo " id="T1:U1252">5</span></span>)</span>&lt;<span class="mxinfo " id="T1:U1253">0.5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="52,264" id="srcline264">264</a></span><span class="line">            <span class="mxinfo " id="T40:U1254"><span class="var type1" id="S74T40U1682">Line_ShapeTemp</span> = <span class="mxinfo " id="T40:U1256"><span class="fcn" id="F111N41:B1684">Line_ShapeInfoExtract</span>(<span class="var type1" id="S50T1U1685">PTargetLaneNum2</span>,<span class="var type1" id="S14T4U1686">Line_ShapeInfo</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,265" id="srcline265">265</a></span><span class="line">            <span class="mxinfo " id="T7:U1259"><span class="mxinfo " id="T7:U1260"><span class="var type1" id="S11T11U1690">RoadInfo2</span>(<span class="mxinfo " id="T9:U1262">2</span>,<span class="mxinfo " id="T38:U1263">:</span>)</span> = <span class="mxinfo " id="T7:U1264"><span class="fcn" id="F112N43:B1694">RoadInfoExtractLC</span>(<span class="var type1" id="S74T40U1695">Line_ShapeTemp</span>,<span class="mxinfo " id="T1:U1266">50</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,266" id="srcline266">266</a></span><span class="line">            <span class="mxinfo " id="T1:U1267"><span class="var type1" id="S87T1U1699">TargetOffset</span> = <span class="mxinfo " id="T1:U1269"><span class="var type1" id="S52T1U1701">PCentTargetOffset</span>/(<span class="mxinfo " id="T1:U1271"><span class="mxinfo " id="T1:U1272">abs(<span class="mxinfo " id="T1:U1273">cos(<span class="mxinfo " id="T1:U1274"><span class="var type1" id="S11T11U1709">RoadInfo2</span>(<span class="mxinfo " id="T9:U1276">2</span>,<span class="mxinfo " id="T9:U1277">3</span>)</span>)</span>)</span>+<span class="mxinfo " id="T1:U1278">1e-4</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,267" id="srcline267">267</a></span><span class="line">            <span class="mxinfo " id="T1:U1279"><span class="mxinfo " id="T1:U1280"><span class="var type1" id="S11T11U1716">RoadInfo2</span>(<span class="mxinfo " id="T1:U1282">2</span>,<span class="mxinfo " id="T1:U1283">2</span>)</span> = <span class="mxinfo " id="T1:U1284"><span class="mxinfo " id="T1:U1285"><span class="var type1" id="S11T11U1721">RoadInfo2</span>(<span class="mxinfo " id="T1:U1287">2</span>,<span class="mxinfo " id="T1:U1288">2</span>)</span> - <span class="var type1" id="S87T1U1724">TargetOffset</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="52,268" id="srcline268">268</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,269" id="srcline269">269</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,270" id="srcline270">270</a></span><span class="line">    <span class="keyword">else</span>        </span></span>
<span class="srcline"><span class="lineno"><a href="52,271" id="srcline271">271</a></span><span class="line">    <span class="keyword">end</span>    </span></span>
<span class="srcline"><span class="lineno"><a href="52,272" id="srcline272">272</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="52,273" id="srcline273">273</a></span><span class="line"></span></span>
</pre>
<div class="dead">
<pre class="code">
<span class="srcline"><span class="lineno"><a href="52,274" id="srcline274">274</a></span><span class="line">function RoadInfo = RoadInfoExtractLC(Line_ShapeTemp,Xmax)</span></span>
<span class="srcline"><span class="lineno"><a href="52,275" id="srcline275">275</a></span><span class="line">    if Xmax &gt; min([Line_ShapeTemp(5),50])</span></span>
<span class="srcline"><span class="lineno"><a href="52,276" id="srcline276">276</a></span><span class="line">        Xmax = min([Line_ShapeTemp(5),50]);</span></span>
<span class="srcline"><span class="lineno"><a href="52,277" id="srcline277">277</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="52,278" id="srcline278">278</a></span><span class="line">    EndCentX = Xmax;</span></span>
<span class="srcline"><span class="lineno"><a href="52,279" id="srcline279">279</a></span><span class="line">    EndCentY = Xmax^3*Line_ShapeTemp(4)+Xmax^2*Line_ShapeTemp(3)+Xmax*Line_ShapeTemp(2)+Line_ShapeTemp(1);</span></span>
<span class="srcline"><span class="lineno"><a href="52,280" id="srcline280">280</a></span><span class="line">    EndCentY = EndCentY*-1;</span></span>
<span class="srcline"><span class="lineno"><a href="52,281" id="srcline281">281</a></span><span class="line">    LaneAngle = -atan(Line_ShapeTemp(2));</span></span>
<span class="srcline"><span class="lineno"><a href="52,282" id="srcline282">282</a></span><span class="line">    LaneWidth = Line_ShapeTemp(6);</span></span>
<span class="srcline"><span class="lineno"><a href="52,283" id="srcline283">283</a></span><span class="line">    RoadInfo = [EndCentX,EndCentY,LaneAngle,LaneWidth];</span></span>
<span class="srcline"><span class="lineno"><a href="52,284" id="srcline284">284</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="52,285" id="srcline285">285</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="52,286" id="srcline286">286</a></span><span class="line">function RoadInfo = RoadInfoExtractTr(Navi_InfoTurn,Info_Me)</span></span>
<span class="srcline"><span class="lineno"><a href="52,287" id="srcline287">287</a></span><span class="line">    RoadInfo = zeros(2,4);</span></span>
<span class="srcline"><span class="lineno"><a href="52,288" id="srcline288">288</a></span><span class="line">    RoadInfo(1,:) = [Navi_InfoTurn(1,3),Navi_InfoTurn(1,4),Navi_InfoTurn(1,7),4];</span></span>
<span class="srcline"><span class="lineno"><a href="52,289" id="srcline289">289</a></span><span class="line">    RoadInfo(2,:) = [Navi_InfoTurn(2,3),Navi_InfoTurn(2,4),Navi_InfoTurn(2,7),4];</span></span>
<span class="srcline"><span class="lineno"><a href="52,290" id="srcline290">290</a></span><span class="line">    CordOrig = [Info_Me(1),Info_Me(2),Info_Me(6)];    </span></span>
<span class="srcline"><span class="lineno"><a href="52,291" id="srcline291">291</a></span><span class="line">    for i = 1:2</span></span>
<span class="srcline"><span class="lineno"><a href="52,292" id="srcline292">292</a></span><span class="line">        Cord2Trans = RoadInfo(i,1:3);</span></span>
<span class="srcline"><span class="lineno"><a href="52,293" id="srcline293">293</a></span><span class="line">        RoadInfo(i,1:3) = CordTransfer(Cord2Trans,CordOrig);</span></span>
<span class="srcline"><span class="lineno"><a href="52,294" id="srcline294">294</a></span><span class="line">    end    </span></span>
<span class="srcline"><span class="lineno"><a href="52,295" id="srcline295">295</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="52,296" id="srcline296">296</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="52,297" id="srcline297">297</a></span><span class="line">function PassFlg = PassJudgement(EgoCord,TargetCord)</span></span>
<span class="srcline"><span class="lineno"><a href="52,298" id="srcline298">298</a></span><span class="line">    EgoCordTemp = CordTransfer(EgoCord,TargetCord);</span></span>
<span class="srcline"><span class="lineno"><a href="52,299" id="srcline299">299</a></span><span class="line">    if EgoCordTemp(1) &gt; 0</span></span>
<span class="srcline"><span class="lineno"><a href="52,300" id="srcline300">300</a></span><span class="line">        PassFlg = 1;</span></span>
<span class="srcline"><span class="lineno"><a href="52,301" id="srcline301">301</a></span><span class="line">    else</span></span>
<span class="srcline"><span class="lineno"><a href="52,302" id="srcline302">302</a></span><span class="line">        PassFlg = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="52,303" id="srcline303">303</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="52,304" id="srcline304">304</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="52,305" id="srcline305">305</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="52,306" id="srcline306">306</a></span><span class="line">function CordAfter = CordTransfer(CordBefore,CordOrig)</span></span>
<span class="srcline"><span class="lineno"><a href="52,307" id="srcline307">307</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="52,308" id="srcline308">308</a></span><span class="line">    theta_rot = CordOrig(3);</span></span>
<span class="srcline"><span class="lineno"><a href="52,309" id="srcline309">309</a></span><span class="line">    xpositionTemp = (CordBefore(1) - CordOrig(1))*cos(theta_rot) + (CordBefore(2) - CordOrig(2))*sin(theta_rot);</span></span>
<span class="srcline"><span class="lineno"><a href="52,310" id="srcline310">310</a></span><span class="line">    ypositionTemp = (CordBefore(2) - CordOrig(2))*cos(theta_rot) - (CordBefore(1) - CordOrig(1))*sin(theta_rot);</span></span>
<span class="srcline"><span class="lineno"><a href="52,311" id="srcline311">311</a></span><span class="line">    AngleTemp = CordBefore(3)-theta_rot;</span></span>
<span class="srcline"><span class="lineno"><a href="52,312" id="srcline312">312</a></span><span class="line">    while(1)</span></span>
<span class="srcline"><span class="lineno"><a href="52,313" id="srcline313">313</a></span><span class="line">        if (AngleTemp &gt;= 0)&amp;&amp;(AngleTemp &lt; 2*pi)</span></span>
<span class="srcline"><span class="lineno"><a href="52,314" id="srcline314">314</a></span><span class="line">            break;</span></span>
<span class="srcline"><span class="lineno"><a href="52,315" id="srcline315">315</a></span><span class="line">        else</span></span>
<span class="srcline"><span class="lineno"><a href="52,316" id="srcline316">316</a></span><span class="line">            if AngleTemp&lt;0</span></span>
<span class="srcline"><span class="lineno"><a href="52,317" id="srcline317">317</a></span><span class="line">                AngleTemp = AngleTemp + 2*pi;</span></span>
<span class="srcline"><span class="lineno"><a href="52,318" id="srcline318">318</a></span><span class="line">            else</span></span>
<span class="srcline"><span class="lineno"><a href="52,319" id="srcline319">319</a></span><span class="line">                AngleTemp = AngleTemp - 2*pi;</span></span>
<span class="srcline"><span class="lineno"><a href="52,320" id="srcline320">320</a></span><span class="line">            end            </span></span>
<span class="srcline"><span class="lineno"><a href="52,321" id="srcline321">321</a></span><span class="line">        end</span></span>
<span class="srcline"><span class="lineno"><a href="52,322" id="srcline322">322</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="52,323" id="srcline323">323</a></span><span class="line">    CordAfter = [xpositionTemp,ypositionTemp,AngleTemp];</span></span>
<span class="srcline"><span class="lineno"><a href="52,324" id="srcline324">324</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="52,325" id="srcline325">325</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="52,326" id="srcline326">326</a></span><span class="line">function [Distance,theta] = AngleDisCalin2Pi(Xdis,Ydis)</span></span>
<span class="srcline"><span class="lineno"><a href="52,327" id="srcline327">327</a></span><span class="line">    theta = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="52,328" id="srcline328">328</a></span><span class="line">    Distance = sqrt(Xdis^2 + Ydis^2);</span></span>
<span class="srcline"><span class="lineno"><a href="52,329" id="srcline329">329</a></span><span class="line">    if abs(Xdis) &lt; 1e-5</span></span>
<span class="srcline"><span class="lineno"><a href="52,330" id="srcline330">330</a></span><span class="line">        if Ydis &lt; 0</span></span>
<span class="srcline"><span class="lineno"><a href="52,331" id="srcline331">331</a></span><span class="line">            theta = 3*pi/2;</span></span>
<span class="srcline"><span class="lineno"><a href="52,332" id="srcline332">332</a></span><span class="line">        else</span></span>
<span class="srcline"><span class="lineno"><a href="52,333" id="srcline333">333</a></span><span class="line">            theta = pi/2;</span></span>
<span class="srcline"><span class="lineno"><a href="52,334" id="srcline334">334</a></span><span class="line">        end</span></span>
<span class="srcline"><span class="lineno"><a href="52,335" id="srcline335">335</a></span><span class="line">    else</span></span>
<span class="srcline"><span class="lineno"><a href="52,336" id="srcline336">336</a></span><span class="line">        theta = atan(Ydis/Xdis);</span></span>
<span class="srcline"><span class="lineno"><a href="52,337" id="srcline337">337</a></span><span class="line">        if abs(theta)&lt;1e-5</span></span>
<span class="srcline"><span class="lineno"><a href="52,338" id="srcline338">338</a></span><span class="line">            if Xdis &lt; 0</span></span>
<span class="srcline"><span class="lineno"><a href="52,339" id="srcline339">339</a></span><span class="line">                theta = pi;</span></span>
<span class="srcline"><span class="lineno"><a href="52,340" id="srcline340">340</a></span><span class="line">            else</span></span>
<span class="srcline"><span class="lineno"><a href="52,341" id="srcline341">341</a></span><span class="line">                theta = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="52,342" id="srcline342">342</a></span><span class="line">            end</span></span>
<span class="srcline"><span class="lineno"><a href="52,343" id="srcline343">343</a></span><span class="line">        else</span></span>
<span class="srcline"><span class="lineno"><a href="52,344" id="srcline344">344</a></span><span class="line">            if Xdis &lt; 0</span></span>
<span class="srcline"><span class="lineno"><a href="52,345" id="srcline345">345</a></span><span class="line">                theta = theta + pi;</span></span>
<span class="srcline"><span class="lineno"><a href="52,346" id="srcline346">346</a></span><span class="line">            else</span></span>
<span class="srcline"><span class="lineno"><a href="52,347" id="srcline347">347</a></span><span class="line">                if theta &lt; 1e-1</span></span>
<span class="srcline"><span class="lineno"><a href="52,348" id="srcline348">348</a></span><span class="line">                    theta = theta + 2*pi;</span></span>
<span class="srcline"><span class="lineno"><a href="52,349" id="srcline349">349</a></span><span class="line">                end</span></span>
<span class="srcline"><span class="lineno"><a href="52,350" id="srcline350">350</a></span><span class="line">            end                </span></span>
<span class="srcline"><span class="lineno"><a href="52,351" id="srcline351">351</a></span><span class="line">        end</span></span>
<span class="srcline"><span class="lineno"><a href="52,352" id="srcline352">352</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="52,353" id="srcline353">353</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="52,354" id="srcline354">354</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="52,355" id="srcline355">355</a></span><span class="line">function Line_ShapeRes = Line_ShapeInfoExtract(TargetLaneNum,Line_ShapeInfo)</span></span>
<span class="srcline"><span class="lineno"><a href="52,356" id="srcline356">356</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="52,357" id="srcline357">357</a></span><span class="line">    if (TargetLaneNum &gt; length(Line_ShapeInfo(:,1)))||(TargetLaneNum &lt; 0.5)</span></span>
<span class="srcline"><span class="lineno"><a href="52,358" id="srcline358">358</a></span><span class="line">        Line_ShapeRes = zeros(1,10);</span></span>
<span class="srcline"><span class="lineno"><a href="52,359" id="srcline359">359</a></span><span class="line">    else</span></span>
<span class="srcline"><span class="lineno"><a href="52,360" id="srcline360">360</a></span><span class="line">        Line_ShapeRes = Line_ShapeInfo(TargetLaneNum,:);</span></span>
<span class="srcline"><span class="lineno"><a href="52,361" id="srcline361">361</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="52,362" id="srcline362">362</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="52,363" id="srcline363">363</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="52,364" id="srcline364">364</a></span><span class="line"> </span></span>
</pre>
</div>
